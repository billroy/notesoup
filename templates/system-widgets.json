{
  "command": [
    [
      "notes", 
      {
        "1": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 130, 
          "id": "1", 
          "imports": "/js-src/js-widgets/uploadForm.js", 
          "mtime": 1324657141190, 
          "notename": "File Upload", 
          "text": "<script type='text/javascript'>\n/**\n*\tuploadForm.js - Note Soup file upload widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\thandleResponse: function(elt, success, response) {\n\t\t//notesoup.say('Upload status: ' + elt.id + ' ' + success + ' ' + response.responseText);\n\t\tthis.setContentDiv(response.responseText);\n\t\tthis.show.createDelegate(this).defer(3000);\n\t\tnotesoup.sendSync();\n\t},\n\n\tsubmitForm: function() {\n\t\tvar form = this.getEphemeral('uploadForm').getForm();\n\t\tif (form) {\n\t\t\tvar el = form.el.dom;\n\t\t\tif (el) {\n\t\t\t\tel.setAttribute('enctype', 'multipart/form-data');\n\t\t\t\ttry {\n\t\t\t\t\tformManager = new Ext.UpdateManager(el);\n\t\t\t\t\tformManager.formUpdate(el, '/upload', true, this.handleResponse.createDelegate(this));\n\t\t\t\t\tthis.showLoading();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tnotesoup.say('form submission error: ' + notesoup.dump(e));\n\t\t\t\t}\n\t\t\t}\n\t\t}\t\t\t\t\n\t},\n\n\tonrender: function() {\n\n\t\tvar uploadForm = new Ext.FormPanel({\n\n\t\t\tlabelAlign: 'right',\n\t\t\tfileUpload: true,\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tid: this.getFieldID('thefile'),\n\t\t\t\tallowBlank: false,\n\t\t\t\tinputType: 'file',\n\t\t\t\tname: 'thefile',\n\t\t\t\tfieldLabel: 'File to upload',\n\t\t\t\twidth: 300\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Upload',\n\t\t\t\thandler: this.submitForm,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Done', \n\t\t\t\thandler: this.destroy,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.submitForm,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\tthis.setContentDiv('<br/>');\n\t\tuploadForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('uploadForm', uploadForm);\n\t}\n});\nnote.show();\n</script>\nLoading...", 
          "width": 250, 
          "xPos": 798, 
          "yPos": 216, 
          "zIndex": 17
        }, 
        "10": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 55, 
          "id": "10", 
          "imports": "/js-src/js-widgets/avatar.js", 
          "mtime": 1324657141192, 
          "notename": "Avatar", 
          "text": "<script type='text/javascript'>\n/**\n*\tavatar.js - Note Soup avatar widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\ntry {var note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tinit: function() {\n\t\t//notesoup.say('Avatar here!', 'tell');\n\t\tif (this.isHome()) {\n\t\t\tthis.follow = true;\n\t\t\tthis.think(\"g'day!\");\n\t\t\t// slide on down\n\t\t\tvar maxy = 0;\n\t\t\tfor (var n in notesoup.notes) {\n\t\t\t\tif (n == this.id) continue;\n\t\t\t\tif (notesoup.notes[n].imports == this.imports) {\n\n\t\t\t\t\t// if it was dragged out of the alley, ignore it\n\t\t\t\t\tif (notesoup.notes[n].xPos > 25) continue;\n\n\t\t\t\t\tvar y = notesoup.notes[n].yPos;\n\t\t\t\t\tif (typeof(y) != 'number') y = parseInt(y);\n\t\t\t\t\tif (y > maxy) maxy = y;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar myY = this.yPos;\n\t\t\tif (typeof(myY) != 'number') myY = parseInt(myY);\n\t\t\tif (maxy >= myY) {\n\t\t\t\tthis.moveTo(12,  maxy + this.height + 12);\n\t\t\t\tnotesoup.refreshAvatar.defer(500, notesoup);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.think('hi!');\n\t\t\t//this.draggable = false;\n\t\t}\n\t\tExt.get(this.id).on('contextmenu', this.doMenu, this);\n\t},\n\n\tisHome: function() {\n\t\treturn (this.username && this.clientid && notesoup.username && notesoup.pushClientID &&\n\t\t\t(this.username == notesoup.username) && (this.clientid == notesoup.pushClientID));\n\t},\n\n\tontick: function() {\n\t\t// fidget the widget\n\t\tif (this.isHome() && (Math.random() < .05)) {\n\t\t\tvar dx = 12;\n\t\t\tvar dy = 3;\n\t\t\tthis.think('fidget...');\n\t\t\tthis.bump(Math.floor(Math.random() * dx) - dx/2,\n\t\t\t\t\t\tMath.floor(Math.random() * dy) - dy/2);\n\t\t\tnotesoup.refreshAvatar.defer(500, notesoup);\n\t\t}\n\t},\n\n\tonsay: function(request) {\n\t\tif ((request.sender == this.username) && (request.clientid == this.clientid)) {\n\t\t\tthis.think(request.data);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t\n\tonleave: function(request) {\n\t\tif ((request.data.username == this.username) && (request.clientid == this.clientid)) {\n\t\t\tnotesoup.destroyNote(this.id);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tdoMenu: function(e) {\n\t\te.stopEvent();\n\t\tthis.isHome() ? this.doHomeMenu(e) : this.doAwayMenu(e);\n\t},\n\t\n\ttoggleFollow: function() {\n\t\tthis.follow = !this.follow;\n\t\tthis.think(this.follow ? 'Following, aye.' : 'Standing by....');\n\t},\n\n\tdoHomeMenu: function(e) {\n\n\t\tvar avatarHomeMenu = new Ext.menu.Menu({\n\t\t\tid: 'avatarHomeMenu',\n\t\t\titems: [\n\t\t\t\t{text: 'Dismiss', handler: function(e) {\n\t\t\t\t\tnotesoup.removeAvatar();\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/user_delete.png'},\n\t\t\t\tnew Ext.menu.CheckItem({\n\t\t\t\t\ttext: 'Follow Me', \n\t\t\t\t\tchecked: this.follow,\n\t\t\t\t\thandler: this.toggleFollow,\n\t\t\t\t\tscope: this\n\t\t\t\t}),\n\t\t\t\t'-',\n\t\t\t\t{text: 'Say...', handler: function(e) {\n\t\t\t\t\tvar s = prompt(\"What would you like to say?\", '');\n\t\t\t\t\tif (s) notesoup.folderSay(s);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/comment.png'},\n\t\t\t\t{text: 'Flash...', handler: function(e) {\n\t\t\t\t\tvar s = prompt(\"Flash what?\", '');\n\t\t\t\t\tif (s) notesoup.folderFlash(s);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/sound.png'},\n\t\t\t\t{text: 'Transport Everybody to...', handler: function(e) {\n\t\t\t\t\tvar s = prompt(\"Beam everybody where?\", '');\n\t\t\t\t\tif (s) notesoup.folderSee(s);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/application_go.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Ping', handler: function(e) {\n\t\t\t\t\tnotesoup.folderPing();\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/transmit_blue.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Sync All', handler: function(e) {\n\t\t\t\t\tnotesoup.folderSync();\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/arrow_refresh.png'},\n\t\t\t\t{text: 'Refresh All', handler: function(e) {\n\t\t\t\t\tnotesoup.folderRefresh();\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/arrow_redo.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Remote console...', handler: function(e) {\n\t\t\t\t\tvar s = prompt(\"Rcon what? (don't be a jerk)\", '');\n\t\t\t\t\tif (s) notesoup.folderRcon(s);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/eye.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Info...', handler: this.info, scope: this,\n\t\t\t\t\ticon: notesoup.imageHost + 'images/famfamfam.com/information.png'}\n\t\t\t]\n\t\t});\n\t\tavatarHomeMenu.showAt(e.getXY());\n\t},\n\t\n\tkick: function() {\n\t\tnotesoup.folderSay(notesoup.username + 'is kicking ' + this.username);\n\t\tvar kickstr = [\n\t\t\t\"=if (notesoup.username == '\", this.username,\"') notesoup.logout();\"\n\t\t].join('');\n\t\t// thrice i kick thee\n\t\tnotesoup.folderRcon(kickstr);\n\t\tnotesoup.folderRcon(kickstr);\n\t\tnotesoup.folderRcon(kickstr);\n\t},\n\n\tthwack: function(whom, howlong) {\n\t\tif (!howlong) howlong = 5000;\n\t\tif (notesoup.username == whom) {\n\t\t\tnotesoup.frontstage.show('thwack!', 'yellow');\n\t\t\tnotesoup.frontstage.hide.defer(howlong);\n\t\t}\n\t\telse this.think('ouch!');\n\t},\n\t\n\tinfo: function() {\n\t\treturn(notesoup.say(notesoup.dump(this)));\n\t},\n\n\tdoAwayMenu: function(e) {\n\t\tvar avatarAwayMenu = new Ext.menu.Menu({\n\t\t\tid: 'avatarAwayMenu',\n\t\t\titems: [{text: 'Whisper privately...', handler: function(e) {\n\t\t\t\t\tvar msg = prompt('Whisper what to ' + this.username + '?', '');\n\t\t\t\t\tif (msg) notesoup.tell(this.username, msg);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/comment.png'},\n\t\t\t\t{text: 'Thwack', handler: function(e) {\n\t\t\t\t\tnotesoup.folderSay(notesoup.username + ' thwacks ' + this.username, 'warning');\n\t\t\t\t\tthis.sendself('thwack', this.username);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/home_go.png'},\n\t\t\t\t{text: 'Kick Out', handler: this.kick, scope: this,\n\t\t\t\t\ticon: notesoup.imageHost + 'images/famfamfam.com/home_go.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Info...', handler: this.info, scope: this,\n\t\t\t\t\ticon: notesoup.imageHost + 'images/famfamfam.com/information.png'}\n\t\t\t]\n\t\t});\n\t\tavatarAwayMenu.showAt(e.getXY());\n\t}\n});\nnote.init();} catch(e) {notesoup.say('widget load error: ' + notesoup.dump(e), 'error');}\n</script>\nAvatar widget is go.", 
          "width": 250, 
          "xPos": 12, 
          "yPos": 396, 
          "zIndex": 26
        }, 
        "11": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 103, 
          "id": "11", 
          "imports": "/js-src/js-widgets/createuser.js", 
          "mtime": 1324657141192, 
          "notename": "Create User", 
          "text": "<br/>\n<center><input type='submit' \n\tvalue='click here to take the red pill' \n\tonclick='javascript:notesoup.createUser();'/>\n</center><br/>", 
          "width": 250, 
          "xPos": 798, 
          "yPos": 96, 
          "zIndex": 9
        }, 
        "12": {
          "bgcolor": "#ccffcc", 
          "bigtalker": false, 
          "displaytimeout": 1, 
          "displaytimer": 0, 
          "from": "system in system/widgets", 
          "height": 70, 
          "id": "12", 
          "imports": "/js-src/js-widgets/twitterizer.js", 
          "mtime": 1324657141192, 
          "nexttweet": -1, 
          "notename": "Twitterizer", 
          "refreshtimeout": 20, 
          "refreshtimer": 0, 
          "text": "<script type='text/javascript'>\n/**\n*\ttwitterizer.js - Note Soup twitter public tweet widget\n*\tCopyright 2008 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tbigtalker: false,\n\tdisplaytimeout: 1,\n\tdisplaytimer: 0,\n\tnexttweet: -1,\n\trefreshtimeout: 20,\n\trefreshtimer: 0,\n\ttweetttl: 30,\n\n\tinit: function() {\n\t\tif (notesoup.foldername == 'system/widgets') {\n\t\t\tthis.setContentDiv('Copy to another workspace to activate.');\n\t\t\treturn;\n\t\t}\n\t\tnotesoup.newNotePositionMode = 'random';\n\t\tif (notesoup.aflax.connected) this.gettweets();\n\t\telse this.init.defer(100, this);\n\t},\n\n\tgettweets: function(str) {\n\t\tthis.geturl('http://twitter.com/statuses/public_timeline.json?since_id=' + (this.maxid || 0));\n\t},\n\n/*****\n    {\n        \"created_at\": \"Wed Jan 09 13:57:27 +0000 2008\", \n        \"id\": 579700522, \n        \"source\": \"web\", \n        \"text\": \"New blog post: Pay my student loans, please: student launches donation site to get help making payments http:\\/\\/tinyurl.com\\/2dncop\", \n        \"truncated\": false, \n        \"user\": {\n            \"description\": \"Personal finance magazine for students and young adults\", \n            \"id\": 8241542, \n            \"location\": \"\", \n            \"name\": \"youngmoney\", \n            \"profile_image_url\": \"http:\\/\\/s3.amazonaws.com\\/twitter_production\\/profile_images\\/19015422\\/logo_125_125_normal.png\", \n            \"protected\": false, \n            \"screen_name\": \"youngmoney\", \n            \"url\": \"http:\\/\\/www.youngmoney.com\"\n        }\n    }, \n*****/\n\n\tdisplay: function(text) {\n\t\tnotesoup.frontstage.say('<br/><br/>' + text);\n\t},\n\n\thandleTweet: function(t) {\n\t\t//alert('Tweet: ' + notesoup.dump(t));\n\t\tif (this.bigtalker)\n\t\t\treturn this.sendself('display', t.text);\n\n\t\tif ($n('tweet' + t.id)) return;\t\t// no dups please\n\t\tthis.maxid = Math.max(this.maxid || 0, t.id);\n\t\tvar theNote = {\n\t\t\tistweet: true,\n\t\t\tnotename: t.user.name || '?',\n\t\t\tscreenname: t.screen_name,\n\t\t\tid: 'tweet' + t.id,\n\t\t\tbgcolor: notesoup.ui.getRandomColor(),\n\t\t\tnosave: true,\n\t\t\tttl: this.tweetttl,\t\t//Math.floor(Math.random() * this.tweetttl),\n\t\t\t//xPos: Math.max(0, Math.floor(Math.random() * Ext.lib.Dom.getViewWidth() - notesoup.defaultNoteWidth)),\n\t\t\t//yPos: Math.max(30, Math.floor(Math.random() * Ext.lib.Dom.getViewHeight() - notesoup.defaultNoteHeight)),\n\t\t\tmtime: notesoup.getServerTime(),\n\t\t\ttext: [\n\t\t\t\t'<a href=\"http://twitter.com/', t.user.screen_name, '\" target=\"_blank\">',\n\t\t\t\t\t'<img src=\"', t.user.profile_image_url, '\"/>',\n\t\t\t\t'</a>',\n\t\t\t\tt.text, (t.truncated ? '...' : ''), '<br/>',\n\t\t\t\t'<hr/>', t.user.description, '<br/>'\n\t\t\t].join('') || '(gratuitous tweet)'\n\t\t};\n/*****\n\t\tif (t.text.charAt(0) == '@') {\n\t\t\tvar blankpos = t.text.search(' ');\n\t\t\tvar to = t.text.substr(1, blankpos-1);\n\t\t\tnotesoup.say('To: ' + to);\n\t\t\tfor (var n in notesoup.notes) {\n\t\t\t\tif (notesoup.notes[n].screen_name == to) {\n\t\t\t\t\ttheNote.xPos = notesoup.notes[n].xPos;\n\t\t\t\t\ttheNote.yPos = notesoup.notes[n].yPos + notesoup.notes[n].height + 36;\n\t\t\t\t\ttheNote.bgcolor = notesoup.notes[n].bgcolor;\n\t\t\t\t\tnotesoup.say('Match! ' + to, 'tell');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n*****/\n\t\tnotesoup.sound.play('/sound/35687__Bansemer__Clo_1CCE53.mp3');\n\t\tnotesoup.updateNote(theNote);\n\t\t//notesoup.postEvent('/folder/' + notesoup.foldername, 'updatenote', theNote);\n\t},\n\n\n\tgetURLHandler: function(response, success, options) {\n\t\tif (!success) {\n\t\t\tnotesoup.say('Failure loading data.');\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tthis.tweetstr = response.responseText;\n\t\t\t//alert(\"TWEETLOAD:\" + response.responseText);\n\t\t\tthis.tweets = Ext.util.JSON.decode(this.tweetstr);\t\t\t//.substr(15, this.tweetstr.length-16));\n\t\t\tthis.setContentDiv('Received ' + this.tweets.length + ' tweets...');\n\t\t\tthis.refreshtimer = this.refreshtimeout;\n\t\t\tthis.nexttweet = this.tweets.length - 1;\n\t\t\tthis.displaytimer = this.displaytimeout;\n\t\t\tthis.running = true;\n\t\t} catch (e) {\n\t\t\tthis.setContentDiv('Error loading data: ' + notesoup.dump(e));\n\t\t\tthis.init.defer(1000, this);\n\t\t}\n\t},\n\n\n\tontick: function() {\n\n\t\tif (!this.running) return;\n\n\t\t// shoot out the next note if we have one\n\t\tif (--this.displaytimer <= 0) {\n\t\t\tif (this.nexttweet >= 0) {\n\t\t\t\tthis.handleTweet(this.tweets[this.nexttweet--]);\n\t\t\t\tthis.displaytimer = this.displaytimeout;\n\t\t\t}\n\t\t}\n\n\t\t// make the notes vanish\n\t\tfor (var n in notesoup.notes) {\n\t\t\tvar thenote = notesoup.notes[n];\n\t\t\tif (thenote.istweet) {\n\t\t\t\tthenote.ttl = (thenote.ttl || 0) - 1;\n\t\t\t\tif (thenote.ttl > 0) {\n\t\t\t\t\tthenote.opacity = thenote.ttl / this.tweetttl;\n\t\t\t\t\tvar container = Ext.get(thenote.id + notesoup.ui.divSuffix);\n\t\t\t\t\tif (container) container.setStyle('opacity', '' + thenote.opacity);\n\t\t\t\t}\n\t\t\t\telse notesoup.destroyNote(thenote.id);\n\t\t\t}\t\t\t\t\n\t\t}\n\n\t\t// refresh our cache from twitter\n\t\tif (this.refreshtimer > 0) {\n\t\t\tthis.refreshtimer = this.refreshtimer - 1;\n\t\t\tthis.setContentDiv('Refresh in: ' + this.refreshtimer + ' seconds...');\n\t\t\tif (this.refreshtimer <= 0) this.gettweets();\n\t\t}\n\t},\n\n\tclick: function(e) {\n/***\n\t\tif (!this.feeddata) return;\n\t\tthis.currentImage = this.currentImage + 1;\n\t\tif (this.currentImage >= this.feeddata.items.length)\n\t\t\tthis.currentImage = 0;\n\t\tthis.show();\n***/\n\t}\n\n});\nExt.get(note.id+'_content').on('click', note.click, note);\nnote.init();\n</script>\nLoading...", 
          "tweetttl": 30, 
          "width": 250, 
          "xPos": 536, 
          "yPos": 156, 
          "zIndex": 12
        }, 
        "13": {
          "allowcreate": true, 
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 144, 
          "id": "13", 
          "imports": "/js-src/js-widgets/loginform.js", 
          "mtime": 1324657141192, 
          "notename": "Log In Here", 
          "text": "<script type='text/javascript'>\n/**\n*\tloginform.js - Note Soup login widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tallowcreate: true,\n\n\tonrender: function() {\n\n\t\tvar buttons = [{\n\t\t\ttext: 'log in',\n\t\t\thandler: this.submit,\n\t\t\tscope: this\n\t\t}];\n\n\t\tif (this.allowcreate) {\n\t\t\tbuttons.push({\n\t\t\t\ttext: 'create account',\n\t\t\t\thandler: this.create,\n\t\t\t\tscope: this\n\t\t\t});\n\t\t}\n\n\t\tvar loginForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Username',\n\t\t\t\tid: this.getFieldID('username'),\n\t\t\t\twidth: 175\n\t\t\t},{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Password',\n\t\t\t\tid: this.getFieldID('password'),\n\t\t\t\twidth: 175,\n\t\t\t\tinputType: 'password'\n\t\t\t}],\n\t\t\tbuttons: buttons,\n\t\t\tkeys: [{key: 13, fn: this.submit, scope: this}]\n\t\t});\n\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/>';\n\t\tloginForm.render(thediv);\n\t\tthis.setEphemeral('loginForm', loginForm);\n\t},\n\n\tcreate: function(e) {\n\t\tif (!this.allowcreate) {\n\t\t\tnotesoup.say('Account creation is not enabled.  Please contact the soupmaster.');\n\t\t\treturn;\n\t\t}\n\t\tnotesoup.createUser(this.getField('loginForm', 'username'), this.getField('loginForm', 'password'));\n\t},\n\n\n\tsubmit: function(e) {\n\t\t//notesoup.say('Login: ' + this.getField('loginForm', 'username') + ' ' + this.getField('loginForm', 'password'));\n\t\tnotesoup.login(this.getField('loginForm', 'username'), this.getField('loginForm', 'password'));\n\t}\n});\nnote.show();\n</script>", 
          "width": 250, 
          "xPos": 536, 
          "yPos": 336, 
          "zIndex": 24
        }, 
        "14": {
          "bgcolor": "#ccffcc", 
          "formfields": [], 
          "from": "system in system/widgets", 
          "height": 77, 
          "id": "14", 
          "imports": "/js-src/js-widgets/form.js", 
          "mtime": 1324657141193, 
          "notename": "Form", 
          "text": "<script type='text/javascript'>\n/**\n*\tform.js - Note Soup generic form widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tinit: function() {\n\t\tif (!this.formfields) this.formfields = [\n\t\t\t//{label: 'Notes', fieldkey: 'notes', type: 'textarea'}\n\t\t];\n\t\tthis.show();\n\t},\n\n\tonrender: function() {\n\t\tvar myForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 70,\n\t\t\tminButtonWidth: 25,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'hidden'\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'save',\n\t\t\t\tminWidth: 50,\n\t\t\t\thandler: this.savedata,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: '+',\n\t\t\t\tminWidth: 25,\n\t\t\t\thandler: this.insertfield,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tfor (var i=0; i<this.formfields.length; i++) {\n\t\t\tmyForm.add({\n\t\t\t\txtype: this.formfields[i].type,\n\t\t\t\tfieldLabel: this.formfields[i].label,\n\t\t\t\tid: this.getFieldID(this.formfields[i].fieldkey),\n\t\t\t\tname: this.formfields[i].fieldkey,\n\t\t\t\tvalue: this.getdata(this.formfields[i].fieldkey),\n\t\t\t\twidth: this.width - 36 - 76\t\t\n\t\t\t});\n\t\t}\n\n\t\tthis.setContentDiv('');\n\t\tmyForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('myForm', myForm);\n\t},\n\n\tgetdata: function(key) {\n\t\tif (key in this) return this[key];\n\t\treturn '';\n\t},\n\n\tsavedata: function() {\n\t\tfor (var f=0; f < this.formfields.length; f++) {\n\t\t\tthis[this.formfields[f].fieldkey] = this.getField('myForm', this.formfields[f].fieldkey);\n\t\t}\n\t\tthis.save();\n\t},\n\n\tinsertfield: function() {\n\t\tnotesoup.say('insertfield: ' + this.id);\n\t\tvar newfieldtype = prompt('New field type [textfield, textarea, checkbox, ...]', '');\n\t\tvar newfieldlabel = notesoup.prompt('New field display label:', '');\n\t\tvar newfieldkey = notesoup.prompt('New field key:', '');\n\t\tif ((newfieldtype.length > 0) && (newfieldlabel.length > 0) && (newfieldkey.length > 0)) {\n\t\t\tif (!(newfieldkey in this)) this[newfieldkey] = '';\n\t\t\tthis.formfields.push({label: newfieldlabel, fieldkey: newfieldkey, type: newfieldtype});\n\t\t\tthis.save();\n\t\t}\n\t},\n\n\tupdateValues: function() {\n\t\tfor (var f=0; f < this.formfields.length; f++) {\n\t\t\tthis.setValue('myForm', this.formfields[f].fieldkey, this[this.formfields[f].fieldkey]);\n\t\t}\n\t}\n});\nnote.init();\n</script>", 
          "width": 250, 
          "xPos": 798, 
          "yPos": 336, 
          "zIndex": 25
        }, 
        "15": {
          "bgcolor": "#ccffcc", 
          "buttons": [
            [
              "attention", 
              "lime", 
              "/sound/32304__acclivity__ShipsBell.mp3"
            ], 
            [
              "order", 
              "black", 
              "/sound/6164__NoiseCollector.mp3"
            ], 
            [
              "warning", 
              "yellow", 
              "/sound/23512__liquidhot__De_1C637C.mp3"
            ], 
            [
              "time is up", 
              "red", 
              "/sound/41344__ivanbailey__1.mp3"
            ], 
            [
              "recess", 
              "lightblue", 
              "/sound/41345__ivanbailey__2.mp3"
            ], 
            [
              "red alert", 
              "red", 
              "/sound/17468__cognito_perce_1C634D.mp3"
            ], 
            [
              "out of order", 
              "purple", 
              "/sound/46062__reinsamba__gong.mp3"
            ], 
            [
              "adjourned", 
              "black", 
              "/sound/43504__mkoenig__publ_1C660C.mp3"
            ]
          ], 
          "from": "system in system/widgets", 
          "height": 184, 
          "id": "15", 
          "imports": "/js-src/js-widgets/soundboard.js", 
          "mtime": 1324657141193, 
          "notename": "Sound Board", 
          "text": "<script type='text/javascript'>\n/**\n*\tsoundboard.js - Note Soup sound board widget\n*\tCopyright 2008 by Bill Roy\n*\tAll rights reserved.\n*\n*\tThese example sounds are from http://freesound.iua.upf.edu; see\n*\thttp://freesound.iua.upf.edu/legal.php for license information.\n*\tTransformed to mp3 and trimmed for use here.\n*\tTo extend this widget, provide the full url to your .mp3 audio file on the net.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tbuttons: [\n\t\t['attention', 'lime', '/sound/32304__acclivity__ShipsBell.mp3',],\n\t\t['order', 'black', '/sound/6164__NoiseCollector.mp3'],\n\t\t['warning', 'yellow', '/sound/23512__liquidhot__De_1C637C.mp3'],\n\t\t['time is up', 'red', '/sound/41344__ivanbailey__1.mp3'],\n\t\t['recess', 'lightblue', '/sound/41345__ivanbailey__2.mp3'],\n\t\t['red alert', 'red', '/sound/17468__cognito_perce_1C634D.mp3'],\n\t\t['out of order', 'purple', '/sound/46062__reinsamba__gong.mp3'],\n\t\t['adjourned', 'black', '/sound/43504__mkoenig__publ_1C660C.mp3']\n\t],\n\n\tfire: function(i) {\n\t\tvar b = this.buttons[i];\n\t\tnotesoup.sound.play(b[2]);\n\t\tnotesoup.frontstage.flash(b[0], b[1]);\n\t},\n\t\n\tplay: function(soundname) {\n\t\tfor (var i=0; i < this.buttons.length; i++) {\n\t\t\tif (this.buttons[i][0] == soundname) {\n\t\t\t\tthis.fire(i);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.fire(0);\n\t},\n\n\tmakeButton: function(i) {\n\t\treturn [\n\t\t\t'<input type=\"submit\" value=\"', this.buttons[i][0], '\"',\n\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).sendself(\\'fire\\',', i, ');\"/>',\n\t\t\t'<br/>'].join('');\n\t},\n\n\tonrender: function() {\n\t\tvar o = [];\n\t\tfor (var b=0; b<this.buttons.length; b++) {\n\t\t\to.push(this.makeButton(b));\n\t\t}\n\t\tthis.setContentDiv(o.join(''));\n\t}\n});\nnote.show();\n</script>", 
          "width": 250, 
          "xPos": 536, 
          "yPos": 216, 
          "zIndex": 16
        }, 
        "16": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 219, 
          "id": "16", 
          "imports": "/js-src/js-widgets/polling.js", 
          "mtime": 1324657141193, 
          "notename": "Poll", 
          "text": "<script type='text/javascript'>\n/**\n*\tpoll.js - Note Soup polling widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tvotespervoter: 1,\n\n\txPos: 12,\n\tyPos: 36,\n\n\tvotexpos: 276,\n\tvoteypos: 36,\n\tvoteyinc: 42,\n\n\tunlockFolder: function() {\n\t\tnotesoup.setFolderACL(notesoup.foldername, {\n\t\t\treaders: '*',\n\t\t\tsenders: '*'\n\t\t});\n\t},\n\n\n\tlockFolder: function() {\n\t\tnotesoup.setFolderACL(notesoup.foldername, {\n\t\t\t//readers: '-*',\n\t\t\tsenders: '-*'\n\t\t});\n\t},\n\n\n\tisPollOwner: function() {\n\t\treturn (notesoup.loggedin && (notesoup.username == notesoup.foldername.split('/')[0]));\n\t},\n\n\n\tgetTopic: function(save) {\n\t\tthis.topic = notesoup.prompt('Enter a topic for the poll:', this.topic);\n\t\tif (save) {\n\t\t\tthis.save();\n\t\t\tthis.show();\n\t\t}\n\t},\n\n\n\tstartPoll: function() {\n\t\tif (!this.running && notesoup.loggedin && this.isPollOwner()) {\n\t\t\tif (!this.topic) this.getTopic();\n\t\t\tvar duration = notesoup.prompt('Starting poll: How long should voting be open?', '100 seconds');\n\t\t\tif (!duration) return;\n\t\t\tduration = notesoup.getDuration(duration);\n\t\t\tif (!duration) return;\n\t\t\tthis.starttime = new Date().getTime();\n\t\t\tthis.duration = duration;\n\t\t\tthis.endtime = this.starttime + duration;\n\t\t\tthis.polluser = notesoup.username;\n\t\t\tthis.unlockFolder();\n\t\t\tthis.running = true;\n\t\t\tthis.ended = false;\n\t\t\tthis.save();\n\t\t\tthis.show();\n\t\t\tnotesoup.folderSync();\n\t\t\tnotesoup.say('The poll is running.');\n\t\t}\n\t\telse {\n\t\t\tnotesoup.say('Sorry, only the poll owner can start the poll.', 'error');\n\t\t}\n\t},\n\n\n\tendPoll: function() {\n\t\tif (this.running && this.isPollOwner()) {\n\t\t\tthis.running = false;\n\t\t\tthis.ended = true;\n\t\t\tnotesoup.say('Ending poll...');\n\t\t\tthis.lockFolder();\n\t\t\tthis.updateVoteCounts();\n\t\t\tthis.save();\n\t\t\tnotesoup.folderSync();\n\t\t\tnotesoup.folderSay('The poll is closed.');\n\t\t}\n\t\telse {\n\t\t\tthis.running = false;\n\t\t}\n\t},\n\t\n\n\taddChoice: function() {\n\t\tif (this.running) return;\n\t\tif (!this.isPollOwner()) return;\n\t\tvar choicetext = prompt('Add Choice: Enter the text for this poll choice:', '');\n\t\tif (!choicetext) return;\n\t\tif (this.choices == undefined) this.choices = [];\n\t\tthis.choices.push(choicetext);\n\t\tif (this.votecounts == undefined) this.votecounts = [];\n\t\tthis.votecounts.push(0);\n\t\tthis.save();\n\t\tthis.show();\n\t},\n\n\n\tvote: function(choiceindex) {\n\t\tif (!notesoup.loggedin || !notesoup.username) {\n\t\t\tnotesoup.say('Sorry, you must be logged in to vote.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.running) {\n\t\t\tnotesoup.say('Sorry, the poll is not running.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tif ((choiceindex > this.choices.length) || (choiceindex < 0)) return;\n\t\tnotesoup.say('Submitting your vote: ' + this.choices[choiceindex]);\n\n\t\t//var id = 'notepollvote' + notesoup.randomName(20);\n\t\tnotesoup.saveNote({\n\t\t\tnotename: 'vote',\n\t\t\t//id: id,\n\t\t\txPos: this.votexpos,\n\t\t\tyPos: this.voteypos,\n\t\t\tapropos: this.id,\n\t\t\tbgcolor: notesoup.ui.defaultNoteColor,\n\t\t\ttext: this.choices[choiceindex]\n\t\t}, notesoup.foldername);\n\t\tthis.voteypos += this.voteyinc;\n\t},\n\n\n\n\ttallyVote: function(vote) {\n\t\tfor (var c=0; c < this.choices.length; c++) {\n\t\t\tif (vote.text == this.choices[c]) {\n\t\t\t\tvar voter = vote.from.split(' ')[0];\n\t\t\t\tif (!(voter in this.votes)) this.votes[voter] = [];\n\t\t\t\tthis.votes[voter].push(c);\n\t\t\t\twhile (this.votes[voter].length > this.votespervoter) {\n\t\t\t\t\t//notesoup.say('discarding rolloff vote for ' + voter);\n\t\t\t\t\tthis.votes[voter].shift();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthenote.flash('chocolate');\n\t\tnotesoup.say('Invalid vote.');\n\t},\n\n\n\ttotalize: function() {\n\t\tfor (var i=0; i < this.choices.length; i++) this.votecounts[i] = 0;\n\t\tthis.totalvotes = 0;\n\t\tfor (var voter in this.votes) {\n\t\t\tfor (var vote=0; vote < this.votes[voter].length; vote++) {\n\t\t\t\t//notesoup.say('Totalizer: ' + voter + ' ' + vote + ' ' + this.votes[voter][vote]);\n\t\t\t\tthis.votecounts[this.votes[voter][vote]]++;\n\t\t\t\tthis.totalvotes++;\n\t\t\t}\n\t\t}\n\t\tnotesoup.say('Totalizer sees ' + this.totalvotes + ' votes.', 'whisper');\n\t},\n\n\n\tpostGrandTotal: function() {\n\t\tvar t = this.totalvotes ? this.totalvotes : 0;\n\t\tExt.get(this.id + '_pc_total').update('<hr/>Total votes: ' + t);\n\t},\n\n\n\tpostTotals: function() {\n\t\tfor (var i=0; i < this.choices.length; i++) {\n\t\t\tExt.get(this.id + '_pc_v_' + i).update(''+this.votecounts[i]);\n\t\t}\n\t\tthis.postGrandTotal();\n\t},\n\n\n\tupdateVoteCounts: function() {\n\t\tthis.votes = {};\n\t\tvar notelist = notesoup.getNotesOrderedBy('mtime', true);\n\t\tfor (var n=0; n < notelist.length; n++) {\n\t\t\tvar thenote = notesoup.notes[notelist[n]];\n\t\t\tif (thenote.id == this.id) continue;\n\t\t\tif (!thenote.notename) continue;\n\t\t\tif (thenote.notename != 'vote') continue;\n\t\t\tif (!thenote.apropos) continue;\n\t\t\tif (thenote.apropos != this.id) continue;\n\n\t\t\tif (!thenote.text || !thenote.from || !thenote.mtime || \n\t\t\t\t(thenote.mtime * 1000 < this.starttime) || (thenote.mtime * 1000 > this.endtime)) {\n\t\t\t\tif (this.isPollOwner()) {\n\t\t\t\t\tnotesoup.say('Deleting malformed vote.');\n\t\t\t\t\tthenote.destroy();\n\t\t\t\t}\n\t\t\t\telse continue;\n\t\t\t}\n\t\t\tthis.tallyVote(thenote);\n\t\t}\n\t\tthis.totalize();\n\t\tthis.postTotals();\n\t},\n\n\n\tontick: function() {\n\t\tif (!this.running) return;\n\t\tif (new Date() > this.endtime) {\n\t\t\tif (this.isPollOwner()) {\n\t\t\t\tthis.endPoll();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.running = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// update time remaining\n\t\tthis.timeleft = this.endtime - new Date();\n\t\tExt.get(this.id + '_pc_timeleft').update('Time remaining: ' + notesoup.stringifyTimeDiff(this.timeleft));\n\n\t\t// set the color\n\t\tvar newcolor = '';\n\t\tif (this.timeleft < (15*1000)) newcolor = 'red';\n\t\telse if (this.timeleft < (60*1000)) newcolor = 'yellow';\n\t\tif (newcolor) {\n\t\t\tthis.getContentDiv().style.background = newcolor;\n\t\t}\n\n\t\ttry {\n\t\t\tthis.updateVoteCounts();\n\t\t} catch(e) {\n\t\t\tnotesoup.say('Exception updating vote count: ' + notesoup.dump(e));\n\t\t\treturn;\n\t\t}\n\t},\n\n\n\tformatChoice: function(index) {\n\t\treturn(['<tr>',\n\t\t\t'<td>',\n\t\t\t\tthis.running ? '<input type=\"submit\" value=\"vote\"'+\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).vote(' + index + ');\"/>' : '&bull;&nbsp;',\n\t\t\t'</td>',\n\t\t\t'<td style=\"width:80%;\">', this.choices[index], '</td>',\n\t\t\t'<td style=\"align:right;\"><span id=\"', \n\t\t\tthis.id, '_pc_v_', \n\t\t\t''+index, '\">', \n\t\t\t''+this.votecounts[index], \n\t\t\t'</span></td>',\n\t\t'</tr>'].join(''));\n\t},\n\n\n\tonrender: function() {\n\t\tvar o = [];\n\t\t\n\t\tif (this.running || this.ended || this.isPollOwner()) {\n\n\t\t\to.push(\n\t\t\t\tthis.topic ? this.topic : this.isPollOwner() ? 'Click \"enter topic\" to supply a topic for this space.' : '',\n\t\t\t\t'<hr/>',\n\t\t\t\t'<center>',\n\t\t\t\t\tthis.running ? 'The poll is open.' : \n\t\t\t\t\t\tthis.ended ? 'The poll has ended.' : \n\t\t\t\t\t\t\t'The poll has not started.',\n\t\t\t\t\t'<br/>',\n\t\t\t\t\t'<span id=\"', this.id, '_pc_timeleft\">&nbsp;</span>',\n\t\t\t\t'</center><hr/>');\n\n\t\t\tif (this.choices) {\n\t\t\t\to.push('<table>');\n\t\t\t\tfor (var c=0; c < this.choices.length; c++) {\n\t\t\t\t\to.push(this.formatChoice(c));\n\t\t\t\t}\n\t\t\t\to.push('</table>');\n\t\t\t}\n\t\t\telse o.push('There are no choices for the poll yet.  Click \"add choice\" to get started.');\n\t\t\to.push('<span style=\"align:right;\" id=\"', this.id, '_pc_total\"></span>');\n\t\t}\n\t\telse {\n\t\t\to.push('<br/><br/><center>The poll has not started.</center><br/><br/>');\n\t\t}\n\n\t\tif (this.isPollOwner()) {\n\t\t\tif (this.running) {\n\t\t\t\to.push('<hr/><center>',\n\t\t\t\t\t'<input type=\"submit\" value=\"end poll\"',\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).endPoll();\"/>',\n\t\t\t\t\t'</center>');\n\t\t\t} else {\n\t\t\t\to.push('<hr/><center>',\n\t\t\t\t\t'<input type=\"submit\" value=\"enter topic\"',\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).getTopic(true);\"/>',\n\t\t\t\t\t'&nbsp;',\n\t\t\t\t\t'<input type=\"submit\" value=\"add choice\"',\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).addChoice();\"/>');\n\t\t\t\tif (this.choices) o.push(\n\t\t\t\t\t'&nbsp;',\n\t\t\t\t\t'<input type=\"submit\" value=\"start poll\"',\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).startPoll();\"/>');\n\t\t\t\to.push('</center>');\n\t\t\t}\n\t\t}\n\t\tthis.setContentDiv(o.join(''));\n\t\tthis.postGrandTotal.defer(200, this);\n\t}\n});\nnote.show();\n</script>\nloading...", 
          "votespervoter": 1, 
          "votexpos": 276, 
          "voteyinc": 42, 
          "voteypos": 36, 
          "width": 250, 
          "xPos": 12, 
          "yPos": 36, 
          "zIndex": 1
        }, 
        "17": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 73, 
          "id": "17", 
          "imports": "/js-src/js-widgets/graphy.js", 
          "mtime": 1324657141194, 
          "notename": "Graphy", 
          "text": "<script type='text/javascript'>\n/**\n*\tgraphy.js - Note Soup graph paper widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nnote.set({\n\n\n\tdrawGraphPaper: function(xmin, ymin, xmax, ymax, bcolor, xminor, yminor, cminor, xsemi, ysemi, csemi, xmajor, ymajor, cmajor) {\n\n\t\tvar ink = $n('Ink');\n\t\tink.think('Some graph paper would be nice...');\n\t\tif (bcolor) ink.sendself('clearRect', xmin, xmax, ymin, ymax, bcolor);\n\t\tif (xminor) for (var x = xmin; x <= xmax; x += xminor) ink.sendself('drawline', x, ymin, x, ymax, cminor, .5);\n\t\tif (yminor) for (var y = ymin; y <= ymax; y += yminor) ink.sendself('drawline', xmin, y, xmax, y, cminor, .5);\n\n\t\tif (xsemi) for (var x = xmin; x <= xmax; x += xsemi) ink.sendself('drawline', x, ymin, x, ymax, csemi, 1);\n\t\tif (ysemi) for (var y = ymin; y <= ymax; y += ysemi) ink.sendself('drawline', xmin, y, xmax, y, csemi, 1);\n\n\t\tif (xmajor) for (var x = xmin; x <= xmax; x += xmajor) ink.sendself('drawline', x, ymin, x, ymax, cmajor, 2);\n\t\tif (ymajor) for (var y = ymin; y <= ymax; y += ymajor) ink.sendself('drawline', xmin, y, xmax, y, cmajor, 2);\n\n\t},\n\n\tdraw: function() {\n\n\t\tvar pagesize = {\n\t\t\twindowWidth: Ext.lib.Dom.getViewWidth(), \n\t\t\twindowHeight: Ext.lib.Dom.getViewHeight()\n\t\t};\n\t\tvar inch = 110;\n\t\tthis.drawGraphPaper(0,0, pagesize.windowWidth, pagesize.windowHeight, 'white', \n\t\t\tinch/10, inch/10, 'lightgreen', inch/2, inch/2,'palegreen', inch, inch, 'mediumspringgreen');\n\t}\n});\n</script>\n<center>\nClick to draw graph paper.<br/>\n<input type='submit' value='draw' onclick = 'notesoup.ui.getEnclosingNote(this).draw();'/>\n</center>", 
          "width": 250, 
          "xPos": 274, 
          "yPos": 96, 
          "zIndex": 31
        }, 
        "18": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 118, 
          "id": "18", 
          "imports": "/js-src/js-widgets/message.js", 
          "mtime": 1324657141194, 
          "notename": "Message", 
          "text": "<script type='text/javascript'>\n/**\n*\tmessage.js - Note Soup message widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tsendit: function() {\n\t\tif (!notesoup.loggedin) {\n\t\t\tnotesoup.say('You must be logged in to do that.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tvar tofolder = '';\n\t\tif (this.replyto) tofolder = this.replyto;\n\t\telse {\n\t\t\tvar to = prompt('Send to:', '');\n\t\t\tif (!to) return;\n\t\t\tvar parts = to.split('/');\n\t\t\tif (parts.length == 1) tofolder = to + '/inbox';\n\t\t\telse if (parts.length == 2) tofolder = to;\n\t\t\telse {\n\t\t\t\tnotesoup.say('Address error.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Build a message note to save in the destination\t\t\n\t\tvar thenote = this.cleanNote();\n\t\tdelete thenote.zIndex;\n\n\t\tvar msg = notesoup.username + ': ' + this.getField('messageForm', 'msg');\n\n\t\tif (!thenote.msglog) thenote.msglog = [];\n\t\tthenote.msglog.push(msg);\n\n\t\tif (this.sendCount) {\n\t\t\tthenote.notename = 'Reply from ' + notesoup.username;\n\t\t\tthenote.sendCount++;\n\t\t}\n\t\telse {\n\t\t\tthenote.notename = 'Message from ' + notesoup.username;\n\t\t\tthenote.sendCount = 1;\n\t\t}\n\t\tthenote.replyto = notesoup.foldername;\n\n\t\tnotesoup.postRequest({\n\t\t\tmethod:\"savenote\",\n\t\t\tparams:{\n\t\t\t\tnote: thenote,\n\t\t\t\ttofolder: tofolder,\n\t\t\t\tnotifyfolder:notesoup.foldername\n\t\t\t}},{\n\t\t\tsuccessProc: this.sendCount ? this.quietDelete.createDelegate(this) : this.resetForm.createDelegate(this),\n\t\t\trequestMessage: 'Sending message...',\n\t\t\tfailureMessage: 'Could not deliver the message.  Confirm you have sender rights to the destination.'\n\t\t});\n\t},\n\n\n\tresetForm: function() {\n\t\tthis.setField('messageForm', 'msg', '');\n\t\tnotesoup.say('Message sent.');\n\t},\n\n\n\tquietDelete: function() {\n\t\tnotesoup.postRequest({\n\t\t\tmethod:\"sendnote\",\n\t\t\tparams:{\n\t\t\t\tnoteid: this.id,\n\t\t\t\tfromfolder: notesoup.foldername,\n\t\t\t\ttofolder: notesoup.username + '/trash',\n\t\t\t\tnotifyfolder: notesoup.foldername,\n\t\t\t\tdeleteoriginal: true\n\t\t\t}},{\n\t\t\trequestMessage: 'Message sent.'\n\t\t});\n\t},\n\n\n\tonrender: function() {\n\n\t\tvar messageForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\tlabelalign: 'top',\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: ('sendCount' in this) && (this.sendCount > 1) ? 'Reply' : 'Message',\n\t\t\t\tname: 'msg',\n\t\t\t\tid: this.getFieldID('msg'),\n\t\t\t\twidth: this.width - 36 - 86\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Send',\n\t\t\t\thandler: this.sendit,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Done',\n\t\t\t\thandler: this.destroy,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.sendit,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tvar o = [];\n\t\tif (this.msglog) {\n\t\t\tvar m = [];\n\t\t\tfor (var i=0; i < this.msglog.length; i++) m.push(this.msglog[i]);\n\t\t\to.push('<br/>');\n\t\t\to.push(m.reverse().join('<hr/>'));\n\t\t\to.push('<hr/>');\n\t\t}\n\t\to.push('<br/>');\n\t\tthis.setContentDiv(o.join(''));\n\t\tmessageForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('messageForm', messageForm);\n\t}\n});\nnote.show();\n</script>", 
          "width": 250, 
          "xPos": 536, 
          "yPos": 36, 
          "zIndex": 3
        }, 
        "19": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 52, 
          "heightOffset": 70, 
          "id": "19", 
          "imagecountdown": 6, 
          "imagedisplaytime": 6, 
          "imageroot": "http://notesoup.net/images/UII_Icons/24x24/", 
          "imports": "/js-src/js-widgets/porthole.js", 
          "isPortableHole": true, 
          "minHeight": 80, 
          "minWidth": 250, 
          "mtime": 1324657141194, 
          "nextimage": "forward.png", 
          "notename": "Portable Hole", 
          "openfolderimage": "open.png", 
          "pauseimage": "pause.png", 
          "previmage": "backward.png", 
          "random": false, 
          "refreshimage": "refresh.png", 
          "settingsimage": "configuration.png", 
          "snapshotimage": "digital_camera.png", 
          "startimage": "play.png", 
          "text": "<script type='text/javascript'>\n/**\n*\tporthole.js - Note Soup portable hole widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tisPortableHole: true,\n\trandom: false,\n\n\tinit: function() {\n\t\tif (this.viewfolder) this.refreshNoteList();\n\t\telse if (this.feedurl) this.getFeed();\n\t\tthis.show();\n\t\tthis.updateControls();\n\t},\n\n\n\trefreshNoteList: function() {\n\t\tif (this.viewfolder) {\n\t\t\tdelete this.running;\n\t\t\tdelete this.targetnoteid;\n\t\t\tdelete this.targetnote;\n\t\t\tdelete this.notes;\n\t\t\tdelete this.noteidlist;\n\n\t\t\tnotesoup.postRequest({\n\t\t\t\tmethod:\"gettemplatelist\",\n\t\t\t\tparams:{\n\t\t\t\t\tfromfolder: this.viewfolder\n\t\t\t}},{\n\t\t\t\t//requestMessage: 'Fetching note list from ' + this.viewfolder + '...',\n\t\t\t\t//successMessage: 'Fetch complete.',\n\t\t\t\tsuccessProc:\tthis.handleNoteListUpdate,\n\t\t\t\tsuccessProcScope: this,\n\t\t\t\tfailureMessage: 'Failure fetching note list from ' + this.viewfolder\n\t\t\t});\n\t\t\tthis.showLoading();\n\t\t}\n\t},\n\n\n\t/**\n\t*\tnotelist:\n\t*\t[0]: foldername like charlie/inbox\n\t*\t[1]: noteid like noteN003kkrOI\n\t*\t[2]: notename like shopping list\n\t*/\n\thandleNoteListUpdate: function(response, options) {\n\t\tthis.setContentDiv('');\t// kill the loading indicator\n\t\tvar response = Ext.util.JSON.decode(response.responseText);\n\n\t\tif (response['error']) {\n\t\t\tnotesoup.say('Could not fetch note list.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tvar notelist = response.command[0][1];\n\n\t\tthis.noteidlist = [];\n\t\tfor (var i=0; i < notelist.length; i++) {\n\t\t\tif (notelist[i][1].indexOf('.') < 0) {\n\t\t\t\tthis.noteidlist.push(notelist[i][1]);\n\t\t\t}\n\t\t}\n\t\t//notesoup.say('Note id list: ' + notesoup.dump(this.noteidlist));\n\t\tif (this.random) this.randomNote();\n\t\telse this.firstNote();\n\t\tthis.running = true;\n\t},\n\n\n\n\t/**\n\t*\tFetch an RSS feed via the server\n\t*/\n\tgetFeed: function() {\n\t\tExt.Ajax.request({\n\t\t\tmethod: 'GET',\n\t\t\turl: '/getfeed',\n\t\t\tparams: {url: 'http' + this.feedurl.substr(4)},\n\t\t\tdisableCaching: false,\n\t\t\tsuccess: this.getFeedHandler,\n\t\t\tscope: this\n\t\t});\n\t\t//notesoup.say('Feed request sent...');\n\t\tthis.showLoading.createDelegate(this).defer(10);\n\t},\n\t\n\t\n\t/**\n\t*\tFormat and display the specified rss feed item.\n\t*\t@param {number} entry\tthe index of the entry in feed[entries]\n\t*/\n\tnoteFromRSSEntry: function(entry) {\n\t\tvar text = [];\n\t\ttext.push(\n\t\t\t'<b>', entry.title, ': </b>',\n\t\t\tentry.summary,\n\t\t\t'<a href=\"', entry.link, '\" target=\"_blank\">',\n\t\t\t'<img src=\"', notesoup.imageHost, 'images/famfamfam.com/link.png\"></a>',\n\t\t\tentry.updated ? '<hr/><h5>Updated: ' + entry.updated + '</h5>' : '');\n\n\t\treturn {\n\t\t\tnotename: this.feedname || 'RSS Hole',\n\t\t\ttext: text.join(''),\n\t\t\tid: 'feed' + notesoup.randomName(10),\n\t\t\tbgcolor: notesoup.ui.defaultNoteColor\n\t\t};\n\t},\n\t\n\t\n\t/**\n\t*\tHandler for getfeed: process incoming feed data.\n\t*\t@param {object} response\tthe response object\n\t*\t@param {boolean} success\ttrue if we got a feed back\n\t*/\n\tgetFeedHandler: function(response, success) {\n\t\tif (success) {\n\t\t\tthis.setContentDiv('Feed data received.');\n\t\t\tvar feed = Ext.util.JSON.decode(response.responseText);\n\t\t\tif (feed.bozo) {\n\t\t\t\tthis.setContentDiv('Server reports a format error in feed data.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.feedname = feed.feed.title || this.notename || '';\n\t\t\tthis.notes = {};\n\t\t\tthis.noteidlist = [];\n\t\t\tfor (var entry=0; entry < feed.entries.length; entry++) {\n\t\t\t\tvar thenote = this.noteFromRSSEntry(feed.entries[entry]);\n\t\t\t\tthis.notes[thenote.id] = thenote;\n\t\t\t\tthis.noteidlist.push(thenote.id);\n\t\t\t}\n\t\t\tthis.setContentDiv('');\n\t\t\t\n\t\t\tif (this.random) this.randomNote();\n\t\t\telse this.firstNote();\n\t\t\tthis.running = true;\n\t\t} \n\t\telse this.setContentDiv('Unable to fetch feed.');\n\t},\n\n\n\n\n\thandleNotePick: function(combo, record, index) {\n\t\tthis.cleanupGuests();\n\t\tif (index < 0) index = this.noteidlist.length - 1;\n\t\tif (index > this.noteidlist.length-1) index = 0;\n\t\tthis.targetnoteindex = index;\n\t\tthis.targetnoteid = this.noteidlist[this.targetnoteindex];\n\t\t\n\t\tif (this.notes && (this.targetnoteid in this.notes)) {\n\t\t\tthis.targetnote = this.notes[this.targetnoteid];\n\t\t\tthis.settimer();\n\t\t\tthis.show();\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tnotesoup.postRequest({\n\t\t\tmethod:\"getnote\",\n\t\t\tparams:{\n\t\t\t\tfromfolder: this.viewfolder,\n\t\t\t\tnoteid: this.targetnoteid\n\t\t\t}\n\t\t},{\n\t\t\t//requestMessage: 'Fetching note...',\n\t\t\tsuccessProc: this.getNoteHandler,\n\t\t\tsuccessProcScope: this,\n\t\t\tfailureMessage: 'Could not fetch note: ' + this.targetnoteid\n\t\t});\n\t},\n\n\n\tgetNoteHandler: function(response, options) {\n\t\t//notesoup.say('Fetch complete.');\n\t\t//notesoup.say(response.responseText);\n\t\tvar response = Ext.util.JSON.decode(response.responseText);\n\n\t\tif (response['error']) {\n\t\t\tthis.targetnote = {\n\t\t\t\tnotename: 'Error',\n\t\t\t\ttext: '<br/><br/><center>Error fetching note: ' + response.error + '</center></br></br>',\n\t\t\t\tbgcolor: 'red'\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tthis.targetnote = response.command[0][1];\n\t\t\tthis.settimer();\n\t\t}\n\t\t//notesoup.say('GETNOTEHANDLER: ' + notesoup.dump(this.targetnote));\n\t\tthis.show();\n\t},\n\n\n\t// player control panel\n\timageroot: \t\tnotesoup.imageHost + 'images/UII_Icons/24x24/',\n\tprevimage: \t\t'backward.png',\n\tstartimage: \t'play.png',\n\tpauseimage: \t'pause.png',\n\tnextimage:\t\t'forward.png',\n\trefreshimage: \t'refresh.png',\n\topenfolderimage:'open.png',\n\tsettingsimage:\t'configuration.png',\n\tsnapshotimage: \t'digital_camera.png',\n\n\timagedisplaytime: 6,\n\timagecountdown: 6,\n\n\tsettimer: function() {\n\t\tthis.imagecountdown = this.imagedisplaytime;\n\t},\n\n\tontick: function() {\n\t\tif (this.running) {\n\t\t\t//notesoup.say('countdown: ' + this.imagecountdown + typeof(this.imagecountdown));\n\t\t\tif (--this.imagecountdown <= 0) {\n\t\t\t\tthis.settimer();\n\t\t\t\t//if (this.random) this.randomNote.defer(Math.random() * 2000, this);\n\t\t\t\t//else this.nextNote.defer(Math.floor(Math.random() * 2000), this);\n\t\t\t\tif (this.random) this.randomNote();\n\t\t\t\telse this.nextNote();\n\t\t\t}\n\t\t}\n\t},\n\n\tfirstNote: function() {\n\t\tthis.handleNotePick(null, null, 0);\n\t},\n\n\tprevNote: function() {\n\t\tthis.handleNotePick(null, null, this.targetnoteindex-1);\n\t},\n\n\tnextNote: function() {\n\t\tthis.handleNotePick(null, null, this.targetnoteindex+1);\n\t},\n\t\n\trandomNote: function() {\n\t\tthis.handleNotePick(null, null, Math.floor(Math.random() * this.noteidlist.length));\n\t},\n\t\n\tpause: function() {\n\t\tnotesoup.say('Stopped.');\n\t\tdelete this.running;\n\t\tthis.updateControls();\n\t},\n\n\tstart: function() {\n\t\tnotesoup.say('Starting...');\n\t\tthis.running = true;\n\t\tthis.updateControls();\n\t},\n\t\n\topenfolder: function() {\n\t\tif (this.viewfolder)\n\t\t\tnotesoup.openFolder(this.viewfolder);\n\t},\n\t\n\tsettings: function() {\n\t\tvar f = notesoup.prompt('Enter the folder to view, or an RSS feed URL:', this.viewfolder || this.feedurl || notesoup.foldername);\n\t\tif (!f) return;\n\n\t\tif (f.substring(0,7) == 'feed://') {\n\t\t\tthis.feedurl = f;\n\t\t\tdelete this.viewfolder;\n\t\t\tthis.save();\n\t\t\tthis.getFeed();\n\t\t}\n\t\telse {\n\t\t\tthis.viewfolder = f;\n\t\t\tdelete this.feedurl;\n\t\t\tthis.save();\n\t\t\tthis.refreshNoteList();\n\t\t}\n\t},\n\n\tclone: function(obj) {\n\t\tvar theclone = {};\n\t\tfor (var o in obj) theclone[o] = obj[o];\n\t\treturn theclone;\n\t},\n\n\tsnapshot: function() {\n\t\tvar newnote = this.clone(this.targetnote);\n\t\tdelete newnote.id;\n\t\tdelete newnote.homediv;\n\t\tdelete newnote.xPos;\n\t\tdelete newnote.yPos;\n\t\tdelete newnote.zIndex;\n\t\tdelete newnote.isGuest;\n\t\tnotesoup.saveNote(newnote, notesoup.foldername);\n\t},\n\n\tmakeButton: function(img, handler) {\n\t\treturn ['<img src=\"', this.imageroot, img, '\"',\n\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).', handler, '();\"/>'].join('');\n\t},\n\n\trenderControls: function() {\n\t\tvar o = [];\n\t\to.push('<center>');\n\t\to.push(this.makeButton(this.settingsimage, 'settings'));\n\t\tif (this.noteidlist) {\n\t\t\to.push(this.makeButton(this.previmage, 'prevNote'));\n\n\t\t\tif (this.running) o.push(this.makeButton(this.pauseimage, 'pause'));\n\t\t\telse o.push(this.makeButton(this.startimage, 'start'));\n\n\t\t\to.push(this.makeButton(this.nextimage, 'nextNote'));\n\t\t\to.push(this.makeButton(this.snapshotimage, 'snapshot'));\n\t\t}\n\t\tif (this.viewfolder)\n\t\t\to.push(this.makeButton(this.openfolderimage, 'openfolder'));\n\t\to.push('</center>');\n\t\treturn o.join('');\n\t},\n\n\tupdateControls: function() {\n\t\tvar elt = Ext.get(this.id + '_title');\n\t\tif (elt) elt.update([\n\t\t\t//this.notename ? this.notename + '<hr/>' : '',\n\t\t\tthis.renderControls()\n\t\t].join(''));\n\t},\n\t\n\tguestNoteName: function() {\n\t\tfor (var i=0; i < 10000; i++) {\n\t\t\tvar name = 'guest' + notesoup.randomName(10);\n\t\t\tif (!$(name)) return name;\n\t\t}\n\t\tnotesoup.say('oops guestname');\n\t},\n\t\n\tcleanupGuests: function() {\n\t\tif (this.guestnotes) {\n\t\t\twhile (this.guestnotes.length > 0) {\n\t\t\t\tvar noteid = this.guestnotes.pop();\n\t\t\t\tif (noteid in notesoup.notes) {\n\t\t\t\t\tif (notesoup.notes[noteid].isPortableHole)\n\t\t\t\t\t\tnotesoup.notes[noteid].cleanupGuests();\n\t\t\t\t\tnotesoup.destroyNote(noteid);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (notesoup.debugLevel > 4)\n\t\t\t\t\t\tnotesoup.say('Guest already left: ' + noteid);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\txoffset: 14,\n\tyoffset: 38,\n\n\tonrender: function() {\n\t\tvar o = [];\n\t\tvar portHoleCover = {\n\t\t\tnotename: this.renderControls(),\t\t//'Portable Hole',\n\t\t\ttext:[ '<br/><center>',\n\t\t\t\t'<img src=\"http://notesoup.net/images/UII_Icons/80x80/smiley.png\" align=\"center\" />',\n\t\t\t\t'</center><br/>'].join(''),\n\t\t\tbgcolor: '#ffffff'\n\t\t};\n\t\tif (this.targetnote) {\n\t\t\tthis.cleanupGuests();\n\t\t\n\t\t\t//var guestnote = this.clone(this.targetnote.isPortableHole ? portHoleCover : this.targetnote);\n\t\t\tvar guestnote = {};\n\t\t\tif (this.targetnote.isPortableHole && (this.viewfolder == notesoup.foldername) &&\n\t\t\t\t(this.targetnote.id == this.id)) guestnote = this.clone(portHoleCover);\n\t\t\telse guestnote = this.clone(this.targetnote);\t\n\t\n\t\t\tguestnote.id = 'guest' + notesoup.randomName(10);\n\t\t\tguestnote.isGuest = true;\n\t\t\tguestnote.homediv = this.id + notesoup.ui.contentSuffix;\n\n\t\t\tguestnote.xPos = this.xPos + this.xoffset;\n\t\t\tguestnote.yPos = this.yPos + this.yoffset;\n\t\t\t//guestnote.xPos = Ext.get(guestnote.homediv).getX();\n\t\t\t//guestnote.yPos = Ext.get(guestnote.homediv).getY();\n\n\t\t\tguestnote.zIndex = this.zIndex + 1;\n\t\t\tnotesoup.updateNote(guestnote);\n\t\t\tif (!this.guestnotes) this.guestnotes = [];\n\t\t\tthis.guestnotes.push(guestnote.id);\n\t\t\tthis.guestnoteid = guestnote.id;\n\t\t}\n\t\tthis.updateControls();\n\t},\n\t\n\n\twidthOffset: 28,\n\theightOffset: 70,\t\t//92,\n\tminWidth: 250,\n\tminHeight: 80,\n\n\tsyncHeight: function() {\n\n\t\tif (!this.targetnote) return soupnote.prototype.syncHeight.apply(this);\n\t\tvar guestdiv = Ext.get(this.guestnoteid + notesoup.ui.divSuffix);\n\t\tif (!guestdiv) {\n\t\t\t//notesoup.say('Could not fetch guest div.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tvar guestsize = guestdiv.getSize();\n\t\tguestsize.width = Math.max(guestsize.width || 0, this.minWidth);\n\t\tguestsize.height = Math.max(guestsize.height || 0, this.minHeight);\n\t\t//notesoup.say('Adjusting to guest size: ' + guestsize.width + ' ' + guestsize.height);\n\n\t\tvar outerDiv = Ext.get(this.id + notesoup.ui.divSuffix);\n\t\tvar noteDiv = Ext.get(this.id);\n\t\tvar contentDiv = Ext.get(this.id + notesoup.ui.contentSuffix);\n\t\tif (!outerDiv || !contentDiv) {\n\t\t\tnotesoup.say('No outer DIV or no content DIV.', 'error');\n\t\t}\n\t\tcontentDiv.setSize(guestsize.width || notesoup.defaultNoteWidth, guestsize.height || notesoup.defaultNoteHeight, true);\n\t\tnoteDiv.setSize(guestsize.width + this.widthOffset, guestsize.height + this.heightOffset, true);\n\t\touterDiv.setSize(guestsize.width + this.widthOffset, guestsize.height + this.heightOffset, true);\n\t}\n});\nnote.init();\n</script>", 
          "width": 250, 
          "widthOffset": 28, 
          "xPos": 12, 
          "xoffset": 14, 
          "yPos": 156, 
          "yoffset": 38, 
          "zIndex": 10
        }, 
        "2": {
          "allowAnonymous": false, 
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 162, 
          "id": "2", 
          "imports": "/js-src/js-widgets/chat.js", 
          "mtime": 1324657141190, 
          "notename": "Chat", 
          "text": "<script type='text/javascript'>\n/**\n*\tchat.js - Note Soup chat widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tallowAnonymous: false,\n\n\tchatSay: function() {\n\t\tvar user = notesoup.username;\n\t\tif (!notesoup.loggedin) {\n\t\t\tif (!this.allowAnonymous) {\n\t\t\t\tnotesoup.say('You must be logged in to chat.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuser = 'Anonymous';\n\t\t}\n\n\t\tvar utterance = this.getField('chatForm', 'chattext');\n\t\tif (utterance) {\n\t\t\tnotesoup.folderSay(utterance);\n\t\t\tif ($n('chat log')) {\n\t\t\t\t$n('chat log').append(user + ': ' + utterance + '<br/>');\n\t\t\t}\n\t\t\tthis.setField('chatForm', 'chattext', '');\n\t\t\tExt.get(this.id + '_chattext').focus(true);\n\t\t}\n\t},\n\n\tonrender: function() {\n\n\t\tvar chatForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 50, \n\t\t\tlabelalign: 'top',\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\n\t\t\titems: [{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Type here',\n\t\t\t\tid: this.getFieldID('chattext'),\n\t\t\t\tname: 'chattext',\n\t\t\t\tvalue: '',\n\t\t\t\twidth: 300\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'say it',\n\t\t\t\thandler: this.chatSay,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.chatSay,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/>';\n\t\tchatForm.render(thediv);\n\t\tthis.setEphemeral('chatForm', chatForm);\n\t\tExt.get(thediv).addKeyListener(13, this.chatSay, this);\n\t}\n});\nnote.show();\n</script>\nloading...", 
          "width": 250, 
          "xPos": 536, 
          "yPos": 96, 
          "zIndex": 8
        }, 
        "20": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 158, 
          "id": "20", 
          "imports": "/js-src/js-widgets/bizcard.js", 
          "mtime": 1324657141194, 
          "notename": "My Card", 
          "text": "<style type='text/css'>\n\tdiv.span {\n\t}\n\tspan.thename, div.thename {\n\t\tfont-size: 1.75em;\n\t\tfont-weight: bold;\n\t}\n\tspan.theaddy, div.theaddy {\n\t\tfont-size: 1em;\n\t\tcolor: gray;\n\t}\n</style>\n&nbsp;<br>\n<div class='thename'>\n<span class='thename'>bill roy<img src='/images/notesoup-color-mini.gif' style='float:right'/></span></div>\n<div style='float: clear;'><br/><hr/></div>\n<span class='theaddy'>founder<div style='float:right'>+1 720 468 3568 (m)&nbsp;</div></span>\n<span class='theaddy'>&nbsp;<span style='float:right'><a href='mailto:bill@notesoup.net'>bill@notesoup.net&nbsp;</a></span></span><br/><br/>\n", 
          "width": 250, 
          "xPos": 12, 
          "yPos": 216, 
          "zIndex": 14
        }, 
        "21": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 58, 
          "id": "21", 
          "imports": "/js-src/js-widgets/button.js", 
          "mtime": 1324814985.888, 
          "notename": "Button", 
          "text": "<script type='text/javascript'>\n/**\n*\tbutton.js - Note Soup scriptable button widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tclick: function() {\n\t\t// your click code here\n\t\tnotesoup.say('CLICK! ' + this.id);\n\t}\n});\n</script>\n<center><input type='submit' value='go' onclick='notesoup.ui.getEnclosingNote(this).click();'/></center>\n", 
          "width": 250, 
          "xPos": 16, 
          "yPos": 426, 
          "zIndex": 34
        }, 
        "22": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 55, 
          "id": "22", 
          "imports": "/js-src/js-widgets/helloworld.js", 
          "mtime": 1324657141195, 
          "notename": "Hello World", 
          "text": "<script type='text/javascript'>\nnotesoup.say(\"Hello, world!\");\n</script>\nThis is the Hello World note.\n", 
          "width": 250, 
          "xPos": 798, 
          "yPos": 396, 
          "zIndex": 29
        }, 
        "23": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 198, 
          "id": "23", 
          "imports": "/js-src/js-widgets/periodicalreminder.js", 
          "mtime": 1324657141195, 
          "notename": "Periodical Reminder", 
          "text": "<script type='text/javascript'>\n/**\n*\tperiodicalreminder.js - Note Soup reminder widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tontick: function() {\n\t\ttry {\n\t\t\tif (this.running) this.updateDisplay();\n\t\t} catch (e) {\n\t\t\tnotesoup.say('pr onrender error: ' + notesoup.dump(e));\n\t\t}\n\t},\n\n\tonrender: function() {\n\t\tif (this.running) this.updateDisplay();\n\t\telse this.showInputForm();\n\t},\n\n\tshowInputForm: function() {\n\t\tvar reminderForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tid: this.getFieldID('remindername'),\n\t\t\t\tfieldLabel: 'Subject',\n\t\t\t\tvalue: this.notename || '',\n\t\t\t\twidth: 175\n\t\t\t},{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'In how long',\n\t\t\t\tvalue: this.durationstring || '',\n\t\t\t\twidth: 175,\n\t\t\t\tid: this.getFieldID('duration')\n\t\t\t},{\n\t\t\t\txtype: 'checkbox',\n\t\t\t\tid: this.getFieldID('autorestart'),\n\t\t\t\tfieldLabel: 'Auto restart',\n\t\t\t\tchecked: this.autorestart\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'remind me',\n\t\t\t\thandler: this.submitReminder,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.submitReminder,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/><center><h2>Periodical Reminder Settings</h2></center><br/>';\n\t\treminderForm.render(thediv);\n\t\tthis.setEphemeral('reminderForm', reminderForm);\n\t\t//Ext.get(thediv).addKeyListener(13, this.submitReminder, this);\n\t},\n\n\tsubmitReminder: function(e) {\n\t\tnotesoup.say('Setting reminder to: ' + this.getField('reminderForm', 'remindername') + ' in ' + this.getField('reminderForm', 'duration'));\n\t\tthis.setupClock(this.getField('reminderForm', 'remindername'), this.getField('reminderForm', 'duration'), this.getField('reminderForm', 'autorestart'));\n\t\tthis.startClock();\n\t\t//this.save();\n\t},\n\n\tsetupClock: function(name, duration, autorestart) {\n\t\tif (!name || !duration) return;\n\t\tvar t = new Date();\n\t\tthis.set({\n\t\t\tnotename: name,\n\t\t\tclockstartstring: t.toString(),\n\t\t\tclockstart: t.getTime(),\n\t\t\tclockduration: notesoup.getDuration(duration),\n\t\t\tdurationstring: duration,\n\t\t\tautorestart: autorestart\n\t\t});\n\t\tExt.get(this.id + '_title').update(name);\n\t},\n\n\tstartClock: function() {\n\t\tthis.running = true;\n\t\tthis.complete = false;\n\t\tthis.editing = false;\n\t\tthis.flash('#22f822');\n\t},\n\t\n\trestartClock: function() {\n\t\tthis.setupClock(this.notename, this.durationstring, this.autorestart);\n\t\tthis.startClock();\n\t},\n\n\tstopClock: function() {\n\t\tdelete this.running;\n\t\tvar outerDiv = Ext.get(this.id + notesoup.ui.divSuffix);\n\t\touterDiv.setStyle('opacity', 1.0);\n\t},\n\t\n\teditClock: function() {\n\t\tthis.stopClock();\n\t\tthis.editing = true;\n\t\tthis.show();\n\t},\n\t\n\tontimercomplete: function() {\n\t\tnotesoup.say('Ding! ' + this.notename);\n\t},\n\n\tupdateDisplay: function() {\n\n\t\tvar timediff = new Date().getTime() - this.clockstart;\n\t\tthis.completed = timediff / this.clockduration;\n\t\tif ((this.completed >= 1.0)  || (this.completed < 0)) {\n\t\t\tif (!this.complete) {\n\t\t\t\tthis.ontimercomplete();\n\t\t\t\tthis.complete = true;\n\t\t\t\tif (this.autorestart) this.restartClock();\n\t\t\t}\n\t\t}\n\t\tvar bg = '#ff3030';\n\t\tif (this.completed < 0.75) bg = '#80ff80';\n\t\telse if (this.completed < 0.90) bg = '#ffff30';\n\n\t\tthis.setContentDiv([\n\t\t\t'<br/><h2><center>', \n\t\t\t\tthis.complete ? 'PAST DUE<br/>' : '',\n\t\t\t\tnotesoup.stringifyTimeDiff(timediff), \n\t\t\t\t' (', ''+Math.floor(100 * this.completed), '%) of ', this.durationstring, '<br/>',\n\t\t\t\t'since ', ''+this.clockstartstring,\n\t\t\t'</center></h2><br/>'\n\t\t].join(''));\n\n\t\tvar outerDiv = Ext.get(this.id + notesoup.ui.divSuffix);\n\t\touterDiv.setStyle('opacity', '' + Math.max(0.05, this.completed));\n\t\t\n\t\touterDiv.on('dblclick', function(e) {\n\t\t\tvar thenote = notesoup.notes[notesoup.ui.getNoteIDFromWindowID(this.id)];\n\t\t\tthenote.editClock();\n\t\t\treturn true;\n\t\t});\n\t\t\n\t\tvar innerDiv = Ext.get(this.id + notesoup.ui.contentSuffix);\n\t\tinnerDiv.setStyle('background', bg);\n\t\tvar runningForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'hidden'\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'restart',\n\t\t\t\thandler: this.restartClock,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'edit',\n\t\t\t\thandler: this.editClock,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\trunningForm.render(this.getContentDiv());\n\t}\t\n});\nnote.show();\n</script>", 
          "width": 250, 
          "xPos": 274, 
          "yPos": 336, 
          "zIndex": 23
        }, 
        "24": {
          "bgcolor": "#ccffcc", 
          "destination": "system/widgets", 
          "duration": "5 minutes", 
          "from": "system in system/widgets", 
          "height": 85, 
          "id": "24", 
          "imports": "/js-src/js-widgets/egress.js", 
          "mtime": 1324657141195, 
          "notename": "Egress", 
          "text": "<script type='text/javascript'>\n/**\n*\tegress.js - Note Soup programmable egress widget\n*\tCopyright 2007, 2008 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tduration: '5 minutes',\n\tdestination: notesoup.foldername,\n\n\tontick: function() {\n\t\tif (notesoup.sessionTime() > notesoup.getDuration(this.duration)) \n\t\t\treturn notesoup.openFolder(this.destination);\n\t\tthis.onrender();\n\t},\n\n\tonrender: function() {\n\t\tthis.setContentDiv([\n\t\t\t'<br/><h1><center>', \n\t\t\t\tnotesoup.stringifyTimeDiff(notesoup.getDuration(this.duration) - notesoup.sessionTime()), \n\t\t\t'</center></h1><br/>'\n\t\t].join(''));\n\t}\n});\nnote.show();\n</script>", 
          "width": 250, 
          "xPos": 12, 
          "yPos": 336, 
          "zIndex": 22
        }, 
        "25": {
          "bgcolor": "#ccffcc", 
          "currentImage": 3, 
          "feeddata": {
            "description": "", 
            "generator": "http://www.flickr.com/", 
            "items": [
              {
                "author": "nobody@flickr.com (FrenchLandscapes)", 
                "author_id": "16985849@N06", 
                "date_taken": "2008-02-25T20:54:23-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/frenchlandscapes/&quot;&gt;FrenchLandscapes&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/frenchlandscapes/2291747727/&quot; title=&quot;Ultimate light on the lake&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3146/2291747727_0c6c0fd351_m.jpg&quot; width=&quot;240&quot; height=&quot;180&quot; alt=&quot;Ultimate light on the lake&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;One of my firsts &amp;quot;serious&amp;quot; hdr try with landscapes.&lt;br /&gt; &lt;br /&gt; Nikon D200 and Sigma 10-20.&lt;br /&gt; 3 nef files converted to HDR and tone mapped with photomatix.&lt;/p&gt;", 
                "link": "http://www.flickr.com/photos/frenchlandscapes/2291747727/", 
                "media": {
                  "m": "http://farm4.static.flickr.com/3146/2291747727_0c6c0fd351_m.jpg"
                }, 
                "published": "2008-02-25T22:21:17Z", 
                "tags": "light sunset lake france nature french landscape pond natural scenic environment provence var hdr hdri scenicsnotjustlandscapes", 
                "title": "Ultimate light on the lake"
              }, 
              {
                "author": "nobody@flickr.com (La c\u00c3\u00a1mara l\u00c3\u00bacida)", 
                "author_id": "39945239@N00", 
                "date_taken": "2008-02-11T13:20:23-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/lacamaralucida/&quot;&gt;La c\u00c3\u00a1mara l\u00c3\u00bacida&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/lacamaralucida/2291753039/&quot; title=&quot;&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3062/2291753039_e37bc6c539_m.jpg&quot; width=&quot;240&quot; height=&quot;175&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/lacamaralucida/2291753039/", 
                "media": {
                  "m": "http://farm4.static.flickr.com/3062/2291753039_e37bc6c539_m.jpg"
                }, 
                "published": "2008-02-25T22:23:48Z", 
                "tags": "windows sunset atardecer ventanas", 
                "title": ""
              }, 
              {
                "author": "nobody@flickr.com (sammorrowphotography)", 
                "author_id": "59463981@N00", 
                "date_taken": "2008-02-24T17:12:06-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/sammorrowphotography/&quot;&gt;sammorrowphotography&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/sammorrowphotography/2291745279/&quot; title=&quot;Good Harbor 2&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2131/2291745279_a2fa5a1916_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Good Harbor 2&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/sammorrowphotography/2291745279/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2131/2291745279_a2fa5a1916_m.jpg"
                }, 
                "published": "2008-02-25T22:20:08Z", 
                "tags": "sunset sky beach gloucester goodharbor rockyneck", 
                "title": "Good Harbor 2"
              }, 
              {
                "author": "nobody@flickr.com (sammorrowphotography)", 
                "author_id": "59463981@N00", 
                "date_taken": "2008-02-24T17:11:48-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/sammorrowphotography/&quot;&gt;sammorrowphotography&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/sammorrowphotography/2291745273/&quot; title=&quot;Good Harbor Sunset&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2333/2291745273_dfba8683fd_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Good Harbor Sunset&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/sammorrowphotography/2291745273/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2333/2291745273_dfba8683fd_m.jpg"
                }, 
                "published": "2008-02-25T22:20:08Z", 
                "tags": "sunset sky beach gloucester goodharbor rockyneck", 
                "title": "Good Harbor Sunset"
              }, 
              {
                "author": "nobody@flickr.com (Kitty e Kal-El)", 
                "author_id": "8705414@N05", 
                "date_taken": "2008-02-21T19:58:00-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/tatinski/&quot;&gt;Kitty e Kal-El&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/tatinski/2292548816/&quot; title=&quot;Sunset colors&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2298/2292548816_683be08fab_m.jpg&quot; width=&quot;240&quot; height=&quot;180&quot; alt=&quot;Sunset colors&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/tatinski/2292548816/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2298/2292548816_683be08fab_m.jpg"
                }, 
                "published": "2008-02-25T22:28:51Z", 
                "tags": "sunset color nature colors colorful", 
                "title": "Sunset colors"
              }, 
              {
                "author": "nobody@flickr.com (Stormbird)", 
                "author_id": "59264290@N00", 
                "date_taken": "2007-04-04T20:14:54-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/59264290@N00/&quot;&gt;Stormbird&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/59264290@N00/2291754735/&quot; title=&quot;breeze block henge&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2414/2291754735_e07af4731f_m.jpg&quot; width=&quot;160&quot; height=&quot;240&quot; alt=&quot;breeze block henge&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/59264290@N00/2291754735/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2414/2291754735_e07af4731f_m.jpg"
                }, 
                "published": "2008-02-25T22:24:35Z", 
                "tags": "sunset arty canonef35mmf2", 
                "title": "breeze block henge"
              }, 
              {
                "author": "nobody@flickr.com (p3n)", 
                "author_id": "7938643@N08", 
                "date_taken": "2008-02-25T17:35:45-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/t0mj0hns0n/&quot;&gt;p3n&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/t0mj0hns0n/2291752775/&quot; title=&quot;&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3203/2291752775_39cc48a99e_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/t0mj0hns0n/2291752775/", 
                "media": {
                  "m": "http://farm4.static.flickr.com/3203/2291752775_39cc48a99e_m.jpg"
                }, 
                "published": "2008-02-25T22:23:40Z", 
                "tags": "sunset photoshop canon germany radebeul 40d", 
                "title": ""
              }, 
              {
                "author": "nobody@flickr.com (stepanm)", 
                "author_id": "69584604@N00", 
                "date_taken": "2008-01-06T14:47:52-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/stepan/&quot;&gt;stepanm&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/stepan/2292534802/&quot; title=&quot;sunset&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2278/2292534802_90f990be5e_m.jpg&quot; width=&quot;240&quot; height=&quot;158&quot; alt=&quot;sunset&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/stepan/2292534802/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2278/2292534802_90f990be5e_m.jpg"
                }, 
                "published": "2008-02-25T22:22:27Z", 
                "tags": "sunset landscape murmansk", 
                "title": "sunset"
              }, 
              {
                "author": "nobody@flickr.com (John\u00e2\u201e\u00a2)", 
                "author_id": "17739807@N08", 
                "date_taken": "2007-12-12T15:57:30-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/johnbm/&quot;&gt;John\u00e2\u201e\u00a2&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/johnbm/2292542948/&quot; title=&quot;Cabin boat at leigh&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2415/2292542948_98f0e40a90_m.jpg&quot; width=&quot;160&quot; height=&quot;240&quot; alt=&quot;Cabin boat at leigh&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;The weather hasn't been that great lately so thought I would go through some of my archives. This one was taken on 12th December last year.&lt;/p&gt;", 
                "link": "http://www.flickr.com/photos/johnbm/2292542948/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2415/2292542948_98f0e40a90_m.jpg"
                }, 
                "published": "2008-02-25T22:26:11Z", 
                "tags": "sunset sea sky cloud water boat twilight purple calm leigh lylac", 
                "title": "Cabin boat at leigh"
              }, 
              {
                "author": "nobody@flickr.com (anacm.silva)", 
                "author_id": "81126336@N00", 
                "date_taken": "2008-02-24T19:15:09-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/anasilva/&quot;&gt;anacm.silva&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/anasilva/2291748397/&quot; title=&quot;P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2050/2291748397_0df47176fb_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Aveiro&lt;br /&gt; Portugal&lt;/p&gt;", 
                "link": "http://www.flickr.com/photos/anasilva/2291748397/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2050/2291748397_0df47176fb_m.jpg"
                }, 
                "published": "2008-02-25T22:21:35Z", 
                "tags": "sunset portugal salinas p\u00c3\u00b4rdosol aveiro salinasdeaveiro", 
                "title": "P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro"
              }, 
              {
                "author": "nobody@flickr.com (Cepree4)", 
                "author_id": "23704453@N07", 
                "date_taken": "2008-02-21T17:20:48-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/23704453@N07/&quot;&gt;Cepree4&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/23704453@N07/2291728641/&quot; title=&quot;IMG_4270&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2334/2291728641_120bef358d_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;IMG_4270&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/23704453@N07/2291728641/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2334/2291728641_120bef358d_m.jpg"
                }, 
                "published": "2008-02-25T22:12:18Z", 
                "tags": "sunset hdr", 
                "title": "IMG_4270"
              }, 
              {
                "author": "nobody@flickr.com (CANDYTANGERINE)", 
                "author_id": "41482113@N00", 
                "date_taken": "2008-02-25T14:20:26-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2292518142/&quot; title=&quot;s p l e n d i p p i n g&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2237/2292518142_21956d5853_m.jpg&quot; width=&quot;240&quot; height=&quot;201&quot; alt=&quot;s p l e n d i p p i n g&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/candytangerine/2292518142/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2237/2292518142_21956d5853_m.jpg"
                }, 
                "published": "2008-02-25T22:14:41Z", 
                "tags": "pink blue sunset sky moon home cheese stars big long exposure luna timer beams", 
                "title": "s p l e n d i p p i n g"
              }, 
              {
                "author": "nobody@flickr.com (DanielJames)", 
                "author_id": "37996577120@N01", 
                "date_taken": "2008-02-22T18:11:09-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/revjim/&quot;&gt;DanielJames&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/revjim/2291740795/&quot; title=&quot;sticks in the mud&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2352/2291740795_a69d396b90_m.jpg&quot; width=&quot;159&quot; height=&quot;240&quot; alt=&quot;sticks in the mud&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/revjim/2291740795/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2352/2291740795_a69d396b90_m.jpg"
                }, 
                "published": "2008-02-25T22:18:00Z", 
                "tags": "sunset sun water geotagged sticks texas unitedstates mud littleelm geo:lat=3318230200 geo:lon=9694531900", 
                "title": "sticks in the mud"
              }, 
              {
                "author": "nobody@flickr.com (bill1608)", 
                "author_id": "89666969@N00", 
                "date_taken": "2008-02-14T18:07:39-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/89666969@N00/&quot;&gt;bill1608&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/89666969@N00/2292529192/&quot; title=&quot;The Mark of Zorro&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2046/2292529192_3f3bc6fd43_m.jpg&quot; width=&quot;240&quot; height=&quot;154&quot; alt=&quot;The Mark of Zorro&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/89666969@N00/2292529192/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2046/2292529192_3f3bc6fd43_m.jpg"
                }, 
                "published": "2008-02-25T22:19:50Z", 
                "tags": "sunset nature", 
                "title": "The Mark of Zorro"
              }, 
              {
                "author": "nobody@flickr.com (CANDYTANGERINE)", 
                "author_id": "41482113@N00", 
                "date_taken": "2008-02-25T14:19:15-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2291733901/&quot; title=&quot;hearty cheese&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3161/2291733901_94f6fb9ebc_m.jpg&quot; width=&quot;240&quot; height=&quot;210&quot; alt=&quot;hearty cheese&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/candytangerine/2291733901/", 
                "media": {
                  "m": "http://farm4.static.flickr.com/3161/2291733901_94f6fb9ebc_m.jpg"
                }, 
                "published": "2008-02-25T22:14:45Z", 
                "tags": "pink blue sunset sky moon home cheese stars big long exposure luna timer beams", 
                "title": "hearty cheese"
              }, 
              {
                "author": "nobody@flickr.com (Paul Patras)", 
                "author_id": "29584905@N00", 
                "date_taken": "2008-02-24T17:36:33-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/paulpatras/&quot;&gt;Paul Patras&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/paulpatras/2292525954/&quot; title=&quot;Sunset over Vatican&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2165/2292525954_b1d12674b7_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Sunset over Vatican&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Afternoon view from Castel S. Angelo, Roma.&lt;/p&gt;", 
                "link": "http://www.flickr.com/photos/paulpatras/2292525954/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2165/2292525954_b1d12674b7_m.jpg"
                }, 
                "published": "2008-02-25T22:18:15Z", 
                "tags": "sunset vatican roma santangelo", 
                "title": "Sunset over Vatican"
              }, 
              {
                "author": "nobody@flickr.com (DanielJames)", 
                "author_id": "37996577120@N01", 
                "date_taken": "2008-02-22T18:21:05-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/revjim/&quot;&gt;DanielJames&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/revjim/2292525550/&quot; title=&quot;a single drop&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3137/2292525550_621e263c34_m.jpg&quot; width=&quot;159&quot; height=&quot;240&quot; alt=&quot;a single drop&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/revjim/2292525550/", 
                "media": {
                  "m": "http://farm4.static.flickr.com/3137/2292525550_621e263c34_m.jpg"
                }, 
                "published": "2008-02-25T22:18:04Z", 
                "tags": "park sunset water geotagged texas unitedstates ripple littleelm doebranch geo:lat=3318229600 geo:lon=9694531900", 
                "title": "a single drop"
              }, 
              {
                "author": "nobody@flickr.com (CANDYTANGERINE)", 
                "author_id": "41482113@N00", 
                "date_taken": "2008-02-25T14:26:45-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2292517812/&quot; title=&quot;lumie lunie&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2323/2292517812_8fec38bdd1_m.jpg&quot; width=&quot;182&quot; height=&quot;240&quot; alt=&quot;lumie lunie&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/candytangerine/2292517812/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2323/2292517812_8fec38bdd1_m.jpg"
                }, 
                "published": "2008-02-25T22:14:34Z", 
                "tags": "pink blue sunset sky moon home cheese stars big long exposure luna timer beams", 
                "title": "lumie lunie"
              }, 
              {
                "author": "nobody@flickr.com (norjam8)", 
                "author_id": "25685920@N00", 
                "date_taken": "2008-02-21T18:13:00-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/norjam8/&quot;&gt;norjam8&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/norjam8/2291729627/&quot; title=&quot;Dancing Trees&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3175/2291729627_13a46b6df5_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;Dancing Trees&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                "link": "http://www.flickr.com/photos/norjam8/2291729627/", 
                "media": {
                  "m": "http://farm4.static.flickr.com/3175/2291729627_13a46b6df5_m.jpg"
                }, 
                "published": "2008-02-25T22:12:48Z", 
                "tags": "trees winter sunset orange lake snow ice beach yellow riley dancing michigan imgp6097ap", 
                "title": "Dancing Trees"
              }, 
              {
                "author": "nobody@flickr.com (o_bbarone)", 
                "author_id": "22944142@N06", 
                "date_taken": "2007-12-27T17:38:43-08:00", 
                "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/o_barone/&quot;&gt;o_bbarone&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/o_barone/2291739317/&quot; title=&quot;Tramonto a Cuma&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2227/2291739317_f4083462a1_m.jpg&quot; width=&quot;240&quot; height=&quot;136&quot; alt=&quot;Tramonto a Cuma&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;l'incredibile .. c'era una fila di macchine ferme a guardar qeusto spettacolo ...&lt;/p&gt;", 
                "link": "http://www.flickr.com/photos/o_barone/2291739317/", 
                "media": {
                  "m": "http://farm3.static.flickr.com/2227/2291739317_f4083462a1_m.jpg"
                }, 
                "published": "2008-02-25T22:17:15Z", 
                "tags": "sunset eos tramonto campania blu napoli rosso barone cuma pozzuoli campi flegrei 400d oniricamente canoniani", 
                "title": "Tramonto a Cuma"
              }
            ], 
            "link": "http://www.flickr.com/photos/tags/sunset/", 
            "modified": "2008-02-25T22:21:17Z", 
            "title": "Photos from everyone tagged sunset"
          }, 
          "feedstr": "jsonFlickrFeed({\n\t\t\"title\": \"Photos from everyone tagged sunset\",\n\t\t\"link\": \"http://www.flickr.com/photos/tags/sunset/\",\n\t\t\"description\": \"\",\n\t\t\"modified\": \"2008-02-25T22:21:17Z\",\n\t\t\"generator\": \"http://www.flickr.com/\",\n\t\t\"items\": [\n\t   {\n\t\t\t\"title\": \"Ultimate light on the lake\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/frenchlandscapes/2291747727/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3146/2291747727_0c6c0fd351_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T20:54:23-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/frenchlandscapes/&quot;&gt;FrenchLandscapes&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/frenchlandscapes/2291747727/&quot; title=&quot;Ultimate light on the lake&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3146/2291747727_0c6c0fd351_m.jpg&quot; width=&quot;240&quot; height=&quot;180&quot; alt=&quot;Ultimate light on the lake&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;One of my firsts &amp;quot;serious&amp;quot; hdr try with landscapes.&lt;br /&gt; &lt;br /&gt; Nikon D200 and Sigma 10-20.&lt;br /&gt; 3 nef files converted to HDR and tone mapped with photomatix.&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:21:17Z\",\n\t\t\t\"author\": \"nobody@flickr.com (FrenchLandscapes)\",\n\t\t\t\"author_id\": \"16985849@N06\",\n\t\t\t\"tags\": \"light sunset lake france nature french landscape pond natural scenic environment provence var hdr hdri scenicsnotjustlandscapes\"\n\t   },\n\t   {\n\t\t\t\"title\": \"\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/lacamaralucida/2291753039/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3062/2291753039_e37bc6c539_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-11T13:20:23-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/lacamaralucida/&quot;&gt;La c\u00c3\u00a1mara l\u00c3\u00bacida&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/lacamaralucida/2291753039/&quot; title=&quot;&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3062/2291753039_e37bc6c539_m.jpg&quot; width=&quot;240&quot; height=&quot;175&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:23:48Z\",\n\t\t\t\"author\": \"nobody@flickr.com (La c\u00c3\u00a1mara l\u00c3\u00bacida)\",\n\t\t\t\"author_id\": \"39945239@N00\",\n\t\t\t\"tags\": \"windows sunset atardecer ventanas\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Good Harbor 2\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/sammorrowphotography/2291745279/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2131/2291745279_a2fa5a1916_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-24T17:12:06-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/sammorrowphotography/&quot;&gt;sammorrowphotography&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/sammorrowphotography/2291745279/&quot; title=&quot;Good Harbor 2&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2131/2291745279_a2fa5a1916_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Good Harbor 2&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:20:08Z\",\n\t\t\t\"author\": \"nobody@flickr.com (sammorrowphotography)\",\n\t\t\t\"author_id\": \"59463981@N00\",\n\t\t\t\"tags\": \"sunset sky beach gloucester goodharbor rockyneck\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Good Harbor Sunset\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/sammorrowphotography/2291745273/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2333/2291745273_dfba8683fd_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-24T17:11:48-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/sammorrowphotography/&quot;&gt;sammorrowphotography&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/sammorrowphotography/2291745273/&quot; title=&quot;Good Harbor Sunset&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2333/2291745273_dfba8683fd_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Good Harbor Sunset&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:20:08Z\",\n\t\t\t\"author\": \"nobody@flickr.com (sammorrowphotography)\",\n\t\t\t\"author_id\": \"59463981@N00\",\n\t\t\t\"tags\": \"sunset sky beach gloucester goodharbor rockyneck\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Sunset colors\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/tatinski/2292548816/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2298/2292548816_683be08fab_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-21T19:58:00-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/tatinski/&quot;&gt;Kitty e Kal-El&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/tatinski/2292548816/&quot; title=&quot;Sunset colors&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2298/2292548816_683be08fab_m.jpg&quot; width=&quot;240&quot; height=&quot;180&quot; alt=&quot;Sunset colors&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:28:51Z\",\n\t\t\t\"author\": \"nobody@flickr.com (Kitty e Kal-El)\",\n\t\t\t\"author_id\": \"8705414@N05\",\n\t\t\t\"tags\": \"sunset color nature colors colorful\"\n\t   },\n\t   {\n\t\t\t\"title\": \"breeze block henge\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/59264290@N00/2291754735/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2414/2291754735_e07af4731f_m.jpg\"},\n\t\t\t\"date_taken\": \"2007-04-04T20:14:54-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/59264290@N00/&quot;&gt;Stormbird&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/59264290@N00/2291754735/&quot; title=&quot;breeze block henge&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2414/2291754735_e07af4731f_m.jpg&quot; width=&quot;160&quot; height=&quot;240&quot; alt=&quot;breeze block henge&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:24:35Z\",\n\t\t\t\"author\": \"nobody@flickr.com (Stormbird)\",\n\t\t\t\"author_id\": \"59264290@N00\",\n\t\t\t\"tags\": \"sunset arty canonef35mmf2\"\n\t   },\n\t   {\n\t\t\t\"title\": \"\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/t0mj0hns0n/2291752775/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3203/2291752775_39cc48a99e_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T17:35:45-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/t0mj0hns0n/&quot;&gt;p3n&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/t0mj0hns0n/2291752775/&quot; title=&quot;&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3203/2291752775_39cc48a99e_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:23:40Z\",\n\t\t\t\"author\": \"nobody@flickr.com (p3n)\",\n\t\t\t\"author_id\": \"7938643@N08\",\n\t\t\t\"tags\": \"sunset photoshop canon germany radebeul 40d\"\n\t   },\n\t   {\n\t\t\t\"title\": \"sunset\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/stepan/2292534802/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2278/2292534802_90f990be5e_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-01-06T14:47:52-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/stepan/&quot;&gt;stepanm&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/stepan/2292534802/&quot; title=&quot;sunset&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2278/2292534802_90f990be5e_m.jpg&quot; width=&quot;240&quot; height=&quot;158&quot; alt=&quot;sunset&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:22:27Z\",\n\t\t\t\"author\": \"nobody@flickr.com (stepanm)\",\n\t\t\t\"author_id\": \"69584604@N00\",\n\t\t\t\"tags\": \"sunset landscape murmansk\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Cabin boat at leigh\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/johnbm/2292542948/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2415/2292542948_98f0e40a90_m.jpg\"},\n\t\t\t\"date_taken\": \"2007-12-12T15:57:30-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/johnbm/&quot;&gt;John\u00e2\u201e\u00a2&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/johnbm/2292542948/&quot; title=&quot;Cabin boat at leigh&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2415/2292542948_98f0e40a90_m.jpg&quot; width=&quot;160&quot; height=&quot;240&quot; alt=&quot;Cabin boat at leigh&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;The weather hasn't been that great lately so thought I would go through some of my archives. This one was taken on 12th December last year.&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:26:11Z\",\n\t\t\t\"author\": \"nobody@flickr.com (John\u00e2\u201e\u00a2)\",\n\t\t\t\"author_id\": \"17739807@N08\",\n\t\t\t\"tags\": \"sunset sea sky cloud water boat twilight purple calm leigh lylac\"\n\t   },\n\t   {\n\t\t\t\"title\": \"P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/anasilva/2291748397/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2050/2291748397_0df47176fb_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-24T19:15:09-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/anasilva/&quot;&gt;anacm.silva&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/anasilva/2291748397/&quot; title=&quot;P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2050/2291748397_0df47176fb_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Aveiro&lt;br /&gt; Portugal&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:21:35Z\",\n\t\t\t\"author\": \"nobody@flickr.com (anacm.silva)\",\n\t\t\t\"author_id\": \"81126336@N00\",\n\t\t\t\"tags\": \"sunset portugal salinas p\u00c3\u00b4rdosol aveiro salinasdeaveiro\"\n\t   },\n\t   {\n\t\t\t\"title\": \"IMG_4270\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/23704453@N07/2291728641/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2334/2291728641_120bef358d_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-21T17:20:48-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/23704453@N07/&quot;&gt;Cepree4&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/23704453@N07/2291728641/&quot; title=&quot;IMG_4270&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2334/2291728641_120bef358d_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;IMG_4270&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:12:18Z\",\n\t\t\t\"author\": \"nobody@flickr.com (Cepree4)\",\n\t\t\t\"author_id\": \"23704453@N07\",\n\t\t\t\"tags\": \"sunset hdr\"\n\t   },\n\t   {\n\t\t\t\"title\": \"s p l e n d i p p i n g\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/candytangerine/2292518142/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2237/2292518142_21956d5853_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T14:20:26-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2292518142/&quot; title=&quot;s p l e n d i p p i n g&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2237/2292518142_21956d5853_m.jpg&quot; width=&quot;240&quot; height=&quot;201&quot; alt=&quot;s p l e n d i p p i n g&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:14:41Z\",\n\t\t\t\"author\": \"nobody@flickr.com (CANDYTANGERINE)\",\n\t\t\t\"author_id\": \"41482113@N00\",\n\t\t\t\"tags\": \"pink blue sunset sky moon home cheese stars big long exposure luna timer beams\"\n\t   },\n\t   {\n\t\t\t\"title\": \"sticks in the mud\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/revjim/2291740795/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2352/2291740795_a69d396b90_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-22T18:11:09-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/revjim/&quot;&gt;DanielJames&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/revjim/2291740795/&quot; title=&quot;sticks in the mud&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2352/2291740795_a69d396b90_m.jpg&quot; width=&quot;159&quot; height=&quot;240&quot; alt=&quot;sticks in the mud&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:18:00Z\",\n\t\t\t\"author\": \"nobody@flickr.com (DanielJames)\",\n\t\t\t\"author_id\": \"37996577120@N01\",\n\t\t\t\"tags\": \"sunset sun water geotagged sticks texas unitedstates mud littleelm geo:lat=3318230200 geo:lon=9694531900\"\n\t   },\n\t   {\n\t\t\t\"title\": \"The Mark of Zorro\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/89666969@N00/2292529192/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2046/2292529192_3f3bc6fd43_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-14T18:07:39-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/89666969@N00/&quot;&gt;bill1608&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/89666969@N00/2292529192/&quot; title=&quot;The Mark of Zorro&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2046/2292529192_3f3bc6fd43_m.jpg&quot; width=&quot;240&quot; height=&quot;154&quot; alt=&quot;The Mark of Zorro&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:19:50Z\",\n\t\t\t\"author\": \"nobody@flickr.com (bill1608)\",\n\t\t\t\"author_id\": \"89666969@N00\",\n\t\t\t\"tags\": \"sunset nature\"\n\t   },\n\t   {\n\t\t\t\"title\": \"hearty cheese\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/candytangerine/2291733901/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3161/2291733901_94f6fb9ebc_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T14:19:15-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2291733901/&quot; title=&quot;hearty cheese&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3161/2291733901_94f6fb9ebc_m.jpg&quot; width=&quot;240&quot; height=&quot;210&quot; alt=&quot;hearty cheese&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:14:45Z\",\n\t\t\t\"author\": \"nobody@flickr.com (CANDYTANGERINE)\",\n\t\t\t\"author_id\": \"41482113@N00\",\n\t\t\t\"tags\": \"pink blue sunset sky moon home cheese stars big long exposure luna timer beams\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Sunset over Vatican\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/paulpatras/2292525954/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2165/2292525954_b1d12674b7_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-24T17:36:33-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/paulpatras/&quot;&gt;Paul Patras&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/paulpatras/2292525954/&quot; title=&quot;Sunset over Vatican&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2165/2292525954_b1d12674b7_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Sunset over Vatican&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Afternoon view from Castel S. Angelo, Roma.&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:18:15Z\",\n\t\t\t\"author\": \"nobody@flickr.com (Paul Patras)\",\n\t\t\t\"author_id\": \"29584905@N00\",\n\t\t\t\"tags\": \"sunset vatican roma santangelo\"\n\t   },\n\t   {\n\t\t\t\"title\": \"a single drop\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/revjim/2292525550/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3137/2292525550_621e263c34_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-22T18:21:05-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/revjim/&quot;&gt;DanielJames&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/revjim/2292525550/&quot; title=&quot;a single drop&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3137/2292525550_621e263c34_m.jpg&quot; width=&quot;159&quot; height=&quot;240&quot; alt=&quot;a single drop&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:18:04Z\",\n\t\t\t\"author\": \"nobody@flickr.com (DanielJames)\",\n\t\t\t\"author_id\": \"37996577120@N01\",\n\t\t\t\"tags\": \"park sunset water geotagged texas unitedstates ripple littleelm doebranch geo:lat=3318229600 geo:lon=9694531900\"\n\t   },\n\t   {\n\t\t\t\"title\": \"lumie lunie\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/candytangerine/2292517812/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2323/2292517812_8fec38bdd1_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T14:26:45-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2292517812/&quot; title=&quot;lumie lunie&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2323/2292517812_8fec38bdd1_m.jpg&quot; width=&quot;182&quot; height=&quot;240&quot; alt=&quot;lumie lunie&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:14:34Z\",\n\t\t\t\"author\": \"nobody@flickr.com (CANDYTANGERINE)\",\n\t\t\t\"author_id\": \"41482113@N00\",\n\t\t\t\"tags\": \"pink blue sunset sky moon home cheese stars big long exposure luna timer beams\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Dancing Trees\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/norjam8/2291729627/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3175/2291729627_13a46b6df5_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-21T18:13:00-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/norjam8/&quot;&gt;norjam8&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/norjam8/2291729627/&quot; title=&quot;Dancing Trees&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3175/2291729627_13a46b6df5_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;Dancing Trees&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:12:48Z\",\n\t\t\t\"author\": \"nobody@flickr.com (norjam8)\",\n\t\t\t\"author_id\": \"25685920@N00\",\n\t\t\t\"tags\": \"trees winter sunset orange lake snow ice beach yellow riley dancing michigan imgp6097ap\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Tramonto a Cuma\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/o_barone/2291739317/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2227/2291739317_f4083462a1_m.jpg\"},\n\t\t\t\"date_taken\": \"2007-12-27T17:38:43-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/o_barone/&quot;&gt;o_bbarone&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/o_barone/2291739317/&quot; title=&quot;Tramonto a Cuma&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2227/2291739317_f4083462a1_m.jpg&quot; width=&quot;240&quot; height=&quot;136&quot; alt=&quot;Tramonto a Cuma&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;l'incredibile .. c'era una fila di macchine ferme a guardar qeusto spettacolo ...&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:17:15Z\",\n\t\t\t\"author\": \"nobody@flickr.com (o_bbarone)\",\n\t\t\t\"author_id\": \"22944142@N06\",\n\t\t\t\"tags\": \"sunset eos tramonto campania blu napoli rosso barone cuma pozzuoli campi flegrei 400d oniricamente canoniani\"\n\t   }\n        ]\n})", 
          "from": "system in system/widgets", 
          "height": 191, 
          "id": "25", 
          "imports": "/js-src/js-widgets/flickrjson.js", 
          "keywords": "sunset", 
          "mtime": 1324657141195, 
          "notename": "sunset", 
          "text": "<script type='text/javascript'>\n/**\n*\tflickrjson.js - Note Soup flickr.com json api widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tviewtimeout: 10,\n\tviewtimer: 10,\n\n\tinit: function() {\n\t\tthis.keywords = (this.notename != 'Flickr Images') ? this.notename : 'sunset';\n\t\tthis.notename = this.keywords;\n\t\tnote.getflickr(this.keywords);\n\t},\n\n\tontick: function() {\n\n\t\tif (this.notename != this.keywords)\n\t\t\treturn this.init();\n\n\t\tthis.viewtimer = this.viewtimer - 1;\n\t\tif (this.viewtimer <= 0) {\n\t\t\tthis.click();\n\t\t\tthis.viewtimer = this.viewtimeout;\n\t\t}\n\t},\n\n\tgetURLHandler: function(response, success, options) {\n\t\tif (!success) {\n\t\t\tnotesoup.say('Failure loading data.');\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\t// prune 'jsonFlickrFeed('\n\t\t\tthis.feedstr = response.responseText;\n\t\t\tthis.feeddata = Ext.util.JSON.decode(this.feedstr.substr(15, this.feedstr.length-16));\n\t\t\tnotesoup.say('Received ' + this.feeddata.items.length + ' images...');\n\t\t\tthis.onrender = this.renderimage;\n\t\t\tthis.currentImage = 0;\n\t\t\tthis.show();\n\t\t} catch (e) {\n\t\t\tthis.setContentDiv('Error loading feed: ' + notesoup.dump(e));\n\t\t}\n\t},\n\n\trenderimage: function() {\n\t\tvar markup = [\n\t\t\t\"<img style='width:100%;' src='\",\n\t\t\tthis.getimage(),\n\t\t\t\"'/>\"\n\t\t].join('');\n\t\tthis.setContentDiv(markup);\n\t},\n\n\tgetimage: function() {\n\t\tif (!this.feeddata) return '';\n\t\treturn this.feeddata.items[this.currentImage].media.m;\n\t},\n\n\tclick: function(e) {\n\t\tif (!this.feeddata) return;\n\t\tthis.currentImage = this.currentImage + 1;\n\t\tif (this.currentImage >= this.feeddata.items.length)\n\t\t\tthis.currentImage = 0;\n\t\tthis.show();\n\t},\n\n\tgetflickr: function(str) {\n\t\tnotesoup.say('Fetching Flickr images for keyword: ' + str);\n\t\tthis.geturl('http://api.flickr.com/services/feeds/photos_public.gne?tags=' + escape(str) + '&format=json');\n\t}\n});\nExt.get(note.id+'_content').on('click', note.click, note);\nnote.init();\n</script>\nLoading...", 
          "viewtimeout": 10, 
          "viewtimer": 8, 
          "width": 250, 
          "xPos": 560, 
          "yPos": 519, 
          "zIndex": 30
        }, 
        "26": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 103, 
          "id": "26", 
          "imports": "/js-src/js-widgets/betasignup.js", 
          "mtime": 1324657141197, 
          "notename": "Beta Signup", 
          "text": "<br/>\n<center><input type='submit' value='click here to sign up for the Note Soup interest list' \n\tonmousedown='javascript:document.location.href = \"mailto:beta@notesoup.net?\" + Ext.urlEncode({\n\t\t\tsubject: \"[beta] interest list signup request\",\n\t\t\tbody: \"I would like to sign up for the Note Soup beta waiting list and the general interest mailing list.\\n\\nHere are a few words about how I found out about Note Soup and why I want to participate in the Beta:\"\n\t\t});' />\n</center>\n<br/>\n", 
          "width": 250, 
          "xPos": 950, 
          "yPos": 36, 
          "zIndex": 5
        }, 
        "27": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 168, 
          "id": "27", 
          "imports": "/js-src/js-widgets/calculator.js", 
          "mtime": 1324657141197, 
          "notename": "Calculator", 
          "text": "<script type='text/javascript'>\n/**\n*\tcalculator.js - Note Soup calculator widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tinit: function() {\n\t\tthis.show();\n\t},\n\n\tontick: function() {\n\t\tif (this.getField('calculatorForm', 'autorecalc')) this.calc();\n\t},\n\t\n\tstart: function() {\n\t\tthis.setField('calculatorForm', 'autorecalc', true);\n\t},\n\n\tstop: function() {\n\t\tthis.setField('calculatorForm', 'autorecalc', false);\n\t},\n\n\tcalc: function() {\n\t\tthis.formula = this.getField('calculatorForm', 'formula');\n\t\tthis.autorecalc = this.getField('calculatorForm', 'autorecalc');\n\t\tthis.value = null;\n\t\ttry {\n\t\t\tthis.value = eval(this.formula);\n\t\t} catch (e) {\n\t\t\tthis.value = 'ERROR: ' + e;\n\t\t}\n\t\tthis.setField('calculatorForm', 'value', this.value);\n\t\treturn this.value;\n\t},\n\t\n\tsaveForm: function() {\n\t\tthis.formula = this.getField('calculatorForm', 'formula');\n\t\tthis.autorecalc = this.getField('calculatorForm', 'autorecalc');\n\t\tthis.save();\n\t},\n\n\tgetvalue: function() {\n\t\treturn this.value;\n\t},\n\n\tsetvalue: function(newformula) {\n\t\tthis.formula = newformula;\n\t\treturn this.calc();\n\t},\n\t\n\n\tonrender: function() {\n\n\t\tvar calculatorForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: (this.formula && (this.formula.length > 40)) ? 'textarea' : 'textfield',\n\t\t\t\tfieldLabel: 'Formula',\n\t\t\t\tid: this.getFieldID('formula'),\n\t\t\t\tvalue: this.formula || '',\n\t\t\t\twidth: this.width - 36 - 86,\n\t\t\t\theight: (this.formula && (this.formula.length > 40)) ? Math.max(48, this.height - 85) : null\n\t\t\t},{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Value',\n\t\t\t\tid: this.getFieldID('value'),\n\t\t\t\tvalue: this.value || '',\n\t\t\t\twidth: this.width - 36 - 86\n\t\t\t},{\n\t\t\t\txtype: 'checkbox',\n\t\t\t\tfieldLabel: 'Auto recalc',\n\t\t\t\tid: this.getFieldID('autorecalc'),\n\t\t\t\tchecked: this.autorecalc\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Calc',\n\t\t\t\thandler: this.calc,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Save', \n\t\t\t\thandler: this.saveForm,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.calc,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tthis.setContentDiv('<br/>');\n\t\tcalculatorForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('calculatorForm', calculatorForm);\n\n\t\tExt.get(this.getFieldID('formula')).on('focus', this.stop, this);\n\t\tExt.get(this.getFieldID('value')).on('focus', this.stop, this);\n\t}\n});\nnote.init();\n</script>", 
          "width": 250, 
          "xPos": 798, 
          "yPos": 276, 
          "zIndex": 21
        }, 
        "28": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 55, 
          "id": "28", 
          "imports": "/js-src/js-widgets/clock.js", 
          "mtime": 1324657141198, 
          "notename": "Clock", 
          "text": "<script type='text/javascript'>\n/**\n*\tclock.js - Note Soup clock widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tontick: function() {\n\t\tthis.setContentDiv([\n\t\t\t'<h2><center>',\n\t\t\t\tnotesoup.timeStamp('','time'),\n\t\t\t'</h2></center>'].join(''));\n\t}\n});\n</script>", 
          "width": 250, 
          "xPos": 274, 
          "yPos": 216, 
          "zIndex": 15
        }, 
        "29": {
          "backZ": 0, 
          "bgcolor": "#ccffcc", 
          "canvasname": "backdrop", 
          "chalky": false, 
          "color": "black", 
          "from": "system in system/widgets", 
          "frontZ": 30000, 
          "height": 103, 
          "id": "29", 
          "imports": "/js-src/js-widgets/ink.js", 
          "linewidth": 3, 
          "mtime": 1324657141198, 
          "notename": "Ink", 
          "text": "<script type='text/javascript'>\n/**\n*\tink.js - Note Soup ink widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tchalky: false,\n\tlinewidth: 3,\n\tcolor: 'black',\n\tyoffset: 45,\n\n\tinit: function(canvasname) {\n\t\tif (canvasname) this.canvasname = canvasname;\n\t\telse this.canvasname = 'backdrop';\n\t\t\n\t\tif (this.chalky) {\n\t\t\tthis.color = 'white';\n\t\t\tthis.linewidth = 4;\n\t\t}\n\t\n\t\tvar canvas = document.getElementById(this.canvasname);\n\t\tvar ctx = canvas.getContext('2d');\n\t\tif (ctx) {\n\t\t\tnotesoup.say('Ink here!');\n\t\t\tthis.setEphemeral('ctx', ctx);\n\t\t}\n\t\telse {\n\t\t\tnotesoup.say('Ink: load failed: sorry, failed to get ctx.', 'error');\n\t\t\treturn;\n\t\t}\n\n\t\t//this.yoffset = Ext.get(this.canvasname).getTop();\n\t\tExt.get(this.canvasname).on('mousedown', this.startsegment, this);\n\t\tExt.get(this.canvasname).on('mousemove', this.updatesegment, this);\n\t\tExt.get(this.canvasname).on('mouseup', this.endsegment, this);\n\t},\n\n\tgetctx: function() {\n\t\treturn this.getEphemeral('ctx');\n\t},\n\n\tplay: function(sounduri) {\n\t\tnotesoup.sound.play(sounduri);\n\t},\n\n\tstartsegment: function(e) {\n\t\tthis.lastx = e.getPageX();\n\t\tthis.lasty = e.getPageY() - this.yoffset;\n\t\tthis.pendown = true;\n\t\tif (this.chalky) this.sendself('play', '/sound/43548__richymel__tiza.mp3');\n\t\tif (this.zIndex != this.frontZ) this.sendself('canvasfront');\n\t},\n\n\tendsegment: function(e) {\n\t\tdelete this.pendown;\n\t\tnotesoup.sound.stop();\n\t\tif (this.zIndex != this.backZ) this.sendself('canvasback');\n\t},\n\n\tfrontZ: 30000,\n\tbackZ: 0,\n\tsetZ: function(z) {\n\t\tthis.zIndex = z;\n\t\tvar container = Ext.get(this.canvasname);\n\t\tif (container) {\n\t\t\tcontainer.setStyle({position: 'absolute', zIndex: this.zIndex});\n\t\t}\n\t},\n\tcanvasfront: function() { this.setZ(this.frontZ); },\n\tcanvasback: function() { this.setZ(this.backZ); },\n\n\tupdatesegment: function(e) {\n\t\tif (!this.pendown) return;\n\n\t\tvar x = e.getPageX();\n\t\tvar y = e.getPageY() - this.yoffset;\n\t\tif ((x == this.lastx) && (y == this.lasty)) return;\n\t\t\n\t\tvar color = (notesoup.ui.defaultNoteColor == '#FFFF99') ? this.color : notesoup.ui.defaultNoteColor;\n\n\t\tthis.sendself('drawline', this.lastx, this.lasty, x, y, color, this.linewidth);\n\n\t\tthis.lastx = x;\n\t\tthis.lasty = y;\n\n\t},\n\t\n\tdrawline: function(x1, y1, x2, y2, color, linewidth) {\n\t\tthis.getctx().beginPath();\n\t\tthis.getctx().strokeStyle = color || this.color;\n\t\tthis.getctx().lineWidth = linewidth || this.linewidth;\n\t\tthis.getctx().moveTo(x1, y1);\n\t\tthis.getctx().lineTo(x2, y2);\n\t\tthis.getctx().stroke();\n\t},\n\t\n\tmoveTo: function(x, y) { this.getctx().moveTo(x, y); },\n\tlineTo: function(x, y) { this.getctx().lineTo(x, y); },\n\tbeginPath: function() { this.getctx().beginPath(); },\n\tclosePath: function() { this.getctx().closePath(); },\n\tfillStyle: function(s) { this.getctx().fillStyle = s; },\n\tfill: function() { this.getctx().fill(); },\n\tstrokeStyle: function(s) { this.getctx().strokeStyle = s; },\n\tstroke: function() { this.getctx().stroke(); },\n\tfillRect: function(x, y, width, height) { this.getctx().fillRect(x, y, width, height); },\n\tstrokeRect: function(x, y, width, height) { this.getctx().strokeRect(x, y, width, height); },\n\tclearRect: function(x, y, width, height) { this.getctx().clearRect(x, y, width, height); },\n\tclear: function() { this.getctx().clearRect(0, 0, 1200, 800); },\n\tarc: function(x, y, radius, startAngle, endAngle, ccw) { this.getctx().arc(x, y, radius, startAngle, endAngle, ccw); },\n\trect: function(x, y, width, height) { this.getctx().rect(x, y, width, height); },\n\tquadraticCurveTo: function(cp1x, cp1y, x, y) { this.getctx().quadraticCurveTo(cp1x, cp1y, x, y); },\n\tbezierCurveTo: function(cp1x, cp1y, cp2x, cp2y, x, y) { this.getctx().bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y); },\n\n\tdrawImage: function(image, x, y, width, height) { this.getctx().drawImage(image, x, y, width, height); },\n\n\tfillCircle: function(x, y, radius, color) {\n\t\tthis.getctx().beginPath();\n\t\tthis.getctx().fillStyle = color || this.color;\n\t\tthis.getctx().arc(x, y, radius, 0, 2*Math.PI, true);\n\t\tthis.getctx().fill();\n\t},\n\n\n/*****\nimage can be:\n1. http:blah\n2. data: blah\n3. an element or element id\nfunction draw() {\n  var ctx = document.getElementById('canvas').getContext('2d');\n\n  // create new image object to use as pattern\n  var img = new Image();\n  img.src = 'images/wallpaper.png';\n  img.onload = function(){\n\n    // create pattern\n    var ptrn = ctx.createPattern(img,'repeat');\n    ctx.fillStyle = ptrn;\n    ctx.fillRect(0,0,150,150);\n\n  }\n}\n      \nvar img = new Image();   // Create new Image object\nimg.src = 'myImage.png'; // Set source path\nWhen this script gets executed, the image starts loading. If loading isn't finished when a drawImage statement gets executed, the script halts until the image is finished loading. If you don't want this to happen, use an onload event handler:\nvar img = new Image();   // Create new Image object\nimg.onload = function(){\n  // execute drawImage statements here\n}\nimg.src = 'myImage.png'; // Set source path\n*****/\n\n\tglobalAlpha: function(alpha) { this.getctx.globalAlpha = alpha; },\n\n\tsnapshot: function() {\n\t\tvar canvas = document.getElementById(this.canvasname);\n\t\tif (!canvas || !canvas.toDataURL) {\n\t\t\tnotesoup.say('Sorry, this browser does not support snapshots.  Firefox is known to work.', 'warning');\n\t\t\treturn;\n\t\t}\n\t\tvar thenote = {\n\t\t\tnotename: 'Snapshot',\n\t\t\t//noframe: true,\n\t\t\tnotetype: 'proxy',\n\t\t\tbgcolor: this.bgcolor,\n\t\t\twidth: this.canvaswidth,\n\t\t\theight: this.canvasheight,\n\t\t\tproxyfor: canvas.toDataURL()\n\t\t};\n\t\tnotesoup.saveNote(thenote, notesoup.foldername);\n\t},\n\n\tclearButton: function() {\n\t\tthis.sendself('clear');\n\t}\n});\nnote.init();\n</script>\n<center>\nInk widget is here!<br/>\nClick to draw on the desktop.<br/>\nToolbar sets color.<br/>\n<center>\n<input type='submit' value='clear' onclick = 'notesoup.ui.getEnclosingNote(this).clearButton();'/>\n<input type='submit' value='snapshot' onclick = 'notesoup.ui.getEnclosingNote(this).snapshot();'/>\n</center>\n", 
          "width": 250, 
          "xPos": 798, 
          "yPos": 156, 
          "yoffset": 45, 
          "zIndex": 13
        }, 
        "3": {
          "backImage": "/images/cards_png/b1fv.png", 
          "bgcolor": "#ccffcc", 
          "buttons": [
            [
              "1 up", 
              "deal(1);"
            ], 
            [
              "5 up", 
              "deal(5);"
            ], 
            [
              "shuffle", 
              "shuffle();"
            ]
          ], 
          "cardcolumns": 7, 
          "cardgutter": 12, 
          "cardheight": 76, 
          "cardwidth": 130, 
          "cardxoffset": 150, 
          "cardyoffset": 50, 
          "from": "system in system/widgets", 
          "height": 230, 
          "id": "3", 
          "imports": "/js-src/js-widgets/deck.js", 
          "mtime": 1324657141190, 
          "notename": "Deck", 
          "ranks": [
            2, 
            3, 
            4, 
            5, 
            6, 
            7, 
            8, 
            9, 
            10, 
            "j", 
            "q", 
            "k", 
            "1"
          ], 
          "suits": [
            "s", 
            "h", 
            "d", 
            "c"
          ], 
          "text": "<script type='text/javascript'>\n/**\n*\tdeck.js - Note Soup playing card deck widget\n*\tCopyright 2007, 2008 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tbgcolor: '#008000',\n\n\tinit: function() {\n\t\tthis.show();\n\t\tthis.sendself.defer(1000, this, ['sync']);\n\t},\n\n\tbackImage: notesoup.imageHost + 'images/cards_png/b1fv.png',\t// or b2fv for red\n\tsuits: ['s','h','d','c'],\n\tranks: [2,3,4,5,6,7,8,9,10,'j','q','k','1'],\n\n\tcardxoffset: 150,\n\tcardyoffset: 50,\n\tcardwidth: 130,\n\tcardgutter: 12,\n\tcardheight: 76,\n\tcardcolumns: 7,\n\n\tmakecard: function() {\n\n\t\tvar x = this.cardxoffset + ((this.cardcount % this.cardcolumns) * (this.cardwidth + this.cardgutter));\n\t\tvar y = this.cardyoffset + Math.floor(this.cardcount / this.cardcolumns) * this.cardheight;\n\t\t//notesoup.say('Pos: ' + this.cardcount + ': ' + x + ' ' + y);\n\n\t\tvar thecard = this.getrandomcard();\n\t\tif (!thecard) return;\n\t\t \n\t\tvar cardnote = {\n\t\t\tid: 'card' + notesoup.randomName(20), \n\t\t\tmtime: notesoup.getServerTime(),\n\t\t\trank: thecard.rank,\n\t\t\tsuit: thecard.suit,\n\t\t\tdeckid: this.id,\n\t\t\tnosave: true,\n\t\t\twidth: this.cardwidth,\n\t\t\txPos: x,\n\t\t\tyPos: y,\n\t\t\tzIndex: 0,\n\t\t\tbgcolor: '#f9f9f9',\n\t\t\tnotetype: 'proxy',\n\t\t\tproxyfor: notesoup.imageHost + 'images/cards_png/' + this.suits[thecard.suit] + this.ranks[thecard.rank] + '.png',\n\t\t};\n\t\tthis.sendself('showcard', cardnote);\n\t},\n\n\tshowcard: function(thecard) {\n\t\tnotesoup.updateNote(thecard);\n\t},\n\n\tsnapcard: function() {\n\t\tnotesoup.sound.play('/sound/45813__themfish__draw_card.mp3');\n\t\t//\t\t19244__deathpie__cardDrop2.mp3');\n\t},\n\n\tdeletecard: function(cardid) {\n\t\tnotesoup.destroyNote(cardid);\n\t},\n\n\tdeal: function(howmany, showing) {\n\t\tthis.sendself('snapcard');\n\t\tthis.updatedealt();\n\t\twhile (howmany-- > 0) {\n\t\t\tthis.makecard(showing);\n\t\t}\n\t},\n\n\tshuffle: function() {\n\t\tnotesoup.sound.play('/sound/19245__deathpie__shuffle.mp3');\n\t\tthis.cards = {};\n\t\tfor (var n in notesoup.notes) {\n\t\t\tif (n == this.id) continue;\n\t\t\tif (notesoup.notes[n].deckid == this.id) {\n\t\t\t\t//notesoup.say(\"Deleting card \" + notesoup.notes[n].rank + ' ' + notesoup.notes[n].suit);\n\t\t\t\tthis.sendself('deletecard', n);\n\t\t\t}\n\t\t}\n\t},\n\t\n\tsync: function() {\n\t\tfor (var n in notesoup.notes) {\n\t\t\tif (n == this.id) continue;\n\t\t\tif (notesoup.notes[n].deckid == this.id) {\n\t\t\t\tthis.sendself('showcard', notesoup.notes[n]);\n\t\t\t}\n\t\t}\n\t},\n\n\tupdatedealt: function() {\n\t\tthis.dealt = [];\n\t\tthis.cardcount = 0;\n\n\t\tfor (var s=0; s < this.suits.length; s++) {\n\t\t\tthis.dealt[s] = [];\n\t\t\tfor (var r=0; r < this.ranks.length; r++) this.dealt[s][r] = false;\n\t\t}\n\n\t\tfor (var n in notesoup.notes) {\n\t\t\tif (notesoup.notes[n].deckid == this.id) {\n\t\t\t\tthis.cardcount++;\n\t\t\t\tthis.dealt[notesoup.notes[n].suit][notesoup.notes[n].rank] = true;\n\t\t\t}\n\t\t}\n\t\t//notesoup.say('Dealt: ' + this.cardcount);\n\t},\n\n\tgetrandomcard: function() {\n\t\tvar cardsleft = this.suits.length * this.ranks.length - this.cardcount;\n\t\tif (cardsleft <= 0) {\n\t\t\tnotesoup.say('No cards left to deal.  Shuffle to start again.', 'error');\n\t\t\treturn null;\n\t\t}\n\t\tvar cardpicked = this.random(cardsleft);\n\t\t//notesoup.say('Picked card ' + cardpicked + ' of ' + cardsleft);\n\n\t\tfor (var s=0; s < this.suits.length; s++) {\n\t\t\tfor (var r=0; r < this.ranks.length; r++) {\n\t\t\t\tif (this.dealt[s][r]) continue;\n\t\t\t\tif (--cardpicked < 0) {\n\t\t\t\t\tthis.dealt[s][r] = true;\n\t\t\t\t\tthis.cardcount++;\n\t\t\t\t\treturn {suit: s, rank: r};\n\t\t\t\t}\n\t\t\t\t//else notesoup.say('Skipping card ' + s + ' ' + r);\n\t\t\t}\n\t\t}\n\t\tnotesoup.say('oops dealbot broke');\n\t\treturn null;\n\t},\n\n\n\trandom: function(max) { return Math.floor(Math.random() * max); },\n\tpick: function(list) { return '' + list[Math.floor(Math.random() * list.length)]; },\n\tpicksuit: function() { return random(4); },\n\tpickrank: function() { return random(13); },\n\n\tbuttons: [\n\t\t['1 up', 'deal(1);'],\n\t\t//['1 down', 'deal(1, false);'],\n\t\t['5 up', 'deal(5);'],\n\t\t//['5 down', 'deal(5, false);'],\n\t\t['shuffle', 'shuffle();']\n\t],\n\n\tmakeButton: function(b) {\n\t\treturn [\n\t\t\t'<input type=\"submit\" value=\"', b[0], \n\t\t\t'\" onclick=\"{notesoup.ui.getEnclosingNote(this).', b[1], ';return false;}\" />'\n\t\t].join('');\n\t},\n\n\tmakeButtons: function() {\n\t\tvar o = [];\n\t\to.push('<center>');\n\t\tfor (var i=0; i < this.buttons.length; i++) {\n\t\t\to.push(this.makeButton(this.buttons[i]));\n\t\t}\n\t\to.push('</center>');\n\t\treturn o.join('');\n\t},\n\n\tonrender: function() {\n\t\tvar markup = [\n\t\t\t'<img style=\"width:100%;\" src=\"', this.backImage, '\"/>',\n\t\t\tthis.makeButtons()\n\t\t].join('');\n\t\tthis.setContentDiv(markup);\n\t},\n\n\tface: function(upness) {\n\t\t//notesoup.say('Click! ' + suit + ' ' + rank);\n\t\t//this.showing = upness;\n\t\t//this.onrender();\n\t},\n\n\tclick: function(e) {\n\t\tthis.sendself('face', !this.showing);\n\t}\n});\n//Ext.get(note.id+'_content').on('click', note.click, note);\nnote.init();\n</script>", 
          "width": 140, 
          "xPos": 798, 
          "yPos": 36, 
          "zIndex": 4
        }, 
        "30": {
          "bgcolor": "#8080f0", 
          "id": "30", 
          "notelist": [
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 55, 
              "imports": "/js-src/js-widgets/avatar.js", 
              "notename": "Avatar", 
              "text": "<script type='text/javascript'>\n/**\n*\tavatar.js - Note Soup avatar widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\ntry {var note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tinit: function() {\n\t\t//notesoup.say('Avatar here!', 'tell');\n\t\tif (this.isHome()) {\n\t\t\tthis.follow = true;\n\t\t\tthis.think(\"g'day!\");\n\t\t\t// slide on down\n\t\t\tvar maxy = 0;\n\t\t\tfor (var n in notesoup.notes) {\n\t\t\t\tif (n == this.id) continue;\n\t\t\t\tif (notesoup.notes[n].imports == this.imports) {\n\n\t\t\t\t\t// if it was dragged out of the alley, ignore it\n\t\t\t\t\tif (notesoup.notes[n].xPos > 25) continue;\n\n\t\t\t\t\tvar y = notesoup.notes[n].yPos;\n\t\t\t\t\tif (typeof(y) != 'number') y = parseInt(y);\n\t\t\t\t\tif (y > maxy) maxy = y;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar myY = this.yPos;\n\t\t\tif (typeof(myY) != 'number') myY = parseInt(myY);\n\t\t\tif (maxy >= myY) {\n\t\t\t\tthis.moveTo(12,  maxy + this.height + 12);\n\t\t\t\tnotesoup.refreshAvatar.defer(500, notesoup);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.think('hi!');\n\t\t\t//this.draggable = false;\n\t\t}\n\t\tExt.get(this.id).on('contextmenu', this.doMenu, this);\n\t},\n\n\tisHome: function() {\n\t\treturn (this.username && this.clientid && notesoup.username && notesoup.pushClientID &&\n\t\t\t(this.username == notesoup.username) && (this.clientid == notesoup.pushClientID));\n\t},\n\n\tontick: function() {\n\t\t// fidget the widget\n\t\tif (this.isHome() && (Math.random() < .05)) {\n\t\t\tvar dx = 12;\n\t\t\tvar dy = 3;\n\t\t\tthis.think('fidget...');\n\t\t\tthis.bump(Math.floor(Math.random() * dx) - dx/2,\n\t\t\t\t\t\tMath.floor(Math.random() * dy) - dy/2);\n\t\t\tnotesoup.refreshAvatar.defer(500, notesoup);\n\t\t}\n\t},\n\n\tonsay: function(request) {\n\t\tif ((request.sender == this.username) && (request.clientid == this.clientid)) {\n\t\t\tthis.think(request.data);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t\n\tonleave: function(request) {\n\t\tif ((request.data.username == this.username) && (request.clientid == this.clientid)) {\n\t\t\tnotesoup.destroyNote(this.id);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tdoMenu: function(e) {\n\t\te.stopEvent();\n\t\tthis.isHome() ? this.doHomeMenu(e) : this.doAwayMenu(e);\n\t},\n\t\n\ttoggleFollow: function() {\n\t\tthis.follow = !this.follow;\n\t\tthis.think(this.follow ? 'Following, aye.' : 'Standing by....');\n\t},\n\n\tdoHomeMenu: function(e) {\n\n\t\tvar avatarHomeMenu = new Ext.menu.Menu({\n\t\t\tid: 'avatarHomeMenu',\n\t\t\titems: [\n\t\t\t\t{text: 'Dismiss', handler: function(e) {\n\t\t\t\t\tnotesoup.removeAvatar();\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/user_delete.png'},\n\t\t\t\tnew Ext.menu.CheckItem({\n\t\t\t\t\ttext: 'Follow Me', \n\t\t\t\t\tchecked: this.follow,\n\t\t\t\t\thandler: this.toggleFollow,\n\t\t\t\t\tscope: this\n\t\t\t\t}),\n\t\t\t\t'-',\n\t\t\t\t{text: 'Say...', handler: function(e) {\n\t\t\t\t\tvar s = prompt(\"What would you like to say?\", '');\n\t\t\t\t\tif (s) notesoup.folderSay(s);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/comment.png'},\n\t\t\t\t{text: 'Flash...', handler: function(e) {\n\t\t\t\t\tvar s = prompt(\"Flash what?\", '');\n\t\t\t\t\tif (s) notesoup.folderFlash(s);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/sound.png'},\n\t\t\t\t{text: 'Transport Everybody to...', handler: function(e) {\n\t\t\t\t\tvar s = prompt(\"Beam everybody where?\", '');\n\t\t\t\t\tif (s) notesoup.folderSee(s);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/application_go.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Ping', handler: function(e) {\n\t\t\t\t\tnotesoup.folderPing();\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/transmit_blue.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Sync All', handler: function(e) {\n\t\t\t\t\tnotesoup.folderSync();\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/arrow_refresh.png'},\n\t\t\t\t{text: 'Refresh All', handler: function(e) {\n\t\t\t\t\tnotesoup.folderRefresh();\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/arrow_redo.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Remote console...', handler: function(e) {\n\t\t\t\t\tvar s = prompt(\"Rcon what? (don't be a jerk)\", '');\n\t\t\t\t\tif (s) notesoup.folderRcon(s);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/eye.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Info...', handler: this.info, scope: this,\n\t\t\t\t\ticon: notesoup.imageHost + 'images/famfamfam.com/information.png'}\n\t\t\t]\n\t\t});\n\t\tavatarHomeMenu.showAt(e.getXY());\n\t},\n\t\n\tkick: function() {\n\t\tnotesoup.folderSay(notesoup.username + 'is kicking ' + this.username);\n\t\tvar kickstr = [\n\t\t\t\"=if (notesoup.username == '\", this.username,\"') notesoup.logout();\"\n\t\t].join('');\n\t\t// thrice i kick thee\n\t\tnotesoup.folderRcon(kickstr);\n\t\tnotesoup.folderRcon(kickstr);\n\t\tnotesoup.folderRcon(kickstr);\n\t},\n\n\tthwack: function(whom, howlong) {\n\t\tif (!howlong) howlong = 5000;\n\t\tif (notesoup.username == whom) {\n\t\t\tnotesoup.frontstage.show('thwack!', 'yellow');\n\t\t\tnotesoup.frontstage.hide.defer(howlong);\n\t\t}\n\t\telse this.think('ouch!');\n\t},\n\t\n\tinfo: function() {\n\t\treturn(notesoup.say(notesoup.dump(this)));\n\t},\n\n\tdoAwayMenu: function(e) {\n\t\tvar avatarAwayMenu = new Ext.menu.Menu({\n\t\t\tid: 'avatarAwayMenu',\n\t\t\titems: [{text: 'Whisper privately...', handler: function(e) {\n\t\t\t\t\tvar msg = prompt('Whisper what to ' + this.username + '?', '');\n\t\t\t\t\tif (msg) notesoup.tell(this.username, msg);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/comment.png'},\n\t\t\t\t{text: 'Thwack', handler: function(e) {\n\t\t\t\t\tnotesoup.folderSay(notesoup.username + ' thwacks ' + this.username, 'warning');\n\t\t\t\t\tthis.sendself('thwack', this.username);\n\t\t\t\t}, icon: notesoup.imageHost + 'images/famfamfam.com/home_go.png'},\n\t\t\t\t{text: 'Kick Out', handler: this.kick, scope: this,\n\t\t\t\t\ticon: notesoup.imageHost + 'images/famfamfam.com/home_go.png'},\n\t\t\t\t'-',\n\t\t\t\t{text: 'Info...', handler: this.info, scope: this,\n\t\t\t\t\ticon: notesoup.imageHost + 'images/famfamfam.com/information.png'}\n\t\t\t]\n\t\t});\n\t\tavatarAwayMenu.showAt(e.getXY());\n\t}\n});\nnote.init();} catch(e) {notesoup.say('widget load error: ' + notesoup.dump(e), 'error');}\n</script>\nAvatar widget is go.", 
              "width": 250, 
              "xPos": 12, 
              "yPos": 396
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 158, 
              "imports": "/js-src/js-widgets/bizcard.js", 
              "notename": "My Card", 
              "text": "<style type='text/css'>\n\tdiv.span {\n\t}\n\tspan.thename, div.thename {\n\t\tfont-size: 1.75em;\n\t\tfont-weight: bold;\n\t}\n\tspan.theaddy, div.theaddy {\n\t\tfont-size: 1em;\n\t\tcolor: gray;\n\t}\n</style>\n&nbsp;<br>\n<div class='thename'>\n<span class='thename'>bill roy<img src='/images/notesoup-color-mini.gif' style='float:right'/></span></div>\n<div style='float: clear;'><br/><hr/></div>\n<span class='theaddy'>founder<div style='float:right'>+1 720 468 3568 (m)&nbsp;</div></span>\n<span class='theaddy'>&nbsp;<span style='float:right'><a href='mailto:bill@notesoup.net'>bill@notesoup.net&nbsp;</a></span></span><br/><br/>\n", 
              "width": 250, 
              "xPos": 12, 
              "yPos": 216
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 88, 
              "imports": "/js-src/js-widgets/createuser.js", 
              "notename": "Create User", 
              "text": "<br/>\n<center><input type='submit' \n\tvalue='click here to take the red pill' \n\tonclick='javascript:notesoup.createUser();'/>\n</center><br/>", 
              "width": 250, 
              "xPos": 798, 
              "yPos": 96
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 58, 
              "imports": "/js-src/js-widgets/button.js", 
              "notename": "Button", 
              "text": "<script type='text/javascript'>\n/**\n*\tbutton.js - Note Soup scriptable button widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tclick: function() {\n\t\t// your click code here\n\t\tnotesoup.say('CLICK! ' + this.id);\n\t}\n});\n</script>\n<center><input type='submit' value='go' onclick='notesoup.ui.getEnclosingNote(this).click();'/></center>\n", 
              "width": 250, 
              "xPos": 16, 
              "yPos": 426
            }, 
            {
              "bgcolor": "#ccffcc", 
              "bigtalker": false, 
              "displaytimeout": 1, 
              "displaytimer": 0, 
              "from": "system in system/widgets", 
              "height": 55, 
              "imports": "/js-src/js-widgets/twitterizer.js", 
              "nexttweet": -1, 
              "notename": "Twitterizer", 
              "refreshtimeout": 20, 
              "refreshtimer": 0, 
              "text": "<script type='text/javascript'>\n/**\n*\ttwitterizer.js - Note Soup twitter public tweet widget\n*\tCopyright 2008 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tbigtalker: false,\n\tdisplaytimeout: 1,\n\tdisplaytimer: 0,\n\tnexttweet: -1,\n\trefreshtimeout: 20,\n\trefreshtimer: 0,\n\ttweetttl: 30,\n\n\tinit: function() {\n\t\tif (notesoup.foldername == 'system/widgets') {\n\t\t\tthis.setContentDiv('Copy to another workspace to activate.');\n\t\t\treturn;\n\t\t}\n\t\tnotesoup.newNotePositionMode = 'random';\n\t\tif (notesoup.aflax.connected) this.gettweets();\n\t\telse this.init.defer(100, this);\n\t},\n\n\tgettweets: function(str) {\n\t\tthis.geturl('http://twitter.com/statuses/public_timeline.json?since_id=' + (this.maxid || 0));\n\t},\n\n/*****\n    {\n        \"created_at\": \"Wed Jan 09 13:57:27 +0000 2008\", \n        \"id\": 579700522, \n        \"source\": \"web\", \n        \"text\": \"New blog post: Pay my student loans, please: student launches donation site to get help making payments http:\\/\\/tinyurl.com\\/2dncop\", \n        \"truncated\": false, \n        \"user\": {\n            \"description\": \"Personal finance magazine for students and young adults\", \n            \"id\": 8241542, \n            \"location\": \"\", \n            \"name\": \"youngmoney\", \n            \"profile_image_url\": \"http:\\/\\/s3.amazonaws.com\\/twitter_production\\/profile_images\\/19015422\\/logo_125_125_normal.png\", \n            \"protected\": false, \n            \"screen_name\": \"youngmoney\", \n            \"url\": \"http:\\/\\/www.youngmoney.com\"\n        }\n    }, \n*****/\n\n\tdisplay: function(text) {\n\t\tnotesoup.frontstage.say('<br/><br/>' + text);\n\t},\n\n\thandleTweet: function(t) {\n\t\t//alert('Tweet: ' + notesoup.dump(t));\n\t\tif (this.bigtalker)\n\t\t\treturn this.sendself('display', t.text);\n\n\t\tif ($n('tweet' + t.id)) return;\t\t// no dups please\n\t\tthis.maxid = Math.max(this.maxid || 0, t.id);\n\t\tvar theNote = {\n\t\t\tistweet: true,\n\t\t\tnotename: t.user.name || '?',\n\t\t\tscreenname: t.screen_name,\n\t\t\tid: 'tweet' + t.id,\n\t\t\tbgcolor: notesoup.ui.getRandomColor(),\n\t\t\tnosave: true,\n\t\t\tttl: this.tweetttl,\t\t//Math.floor(Math.random() * this.tweetttl),\n\t\t\t//xPos: Math.max(0, Math.floor(Math.random() * Ext.lib.Dom.getViewWidth() - notesoup.defaultNoteWidth)),\n\t\t\t//yPos: Math.max(30, Math.floor(Math.random() * Ext.lib.Dom.getViewHeight() - notesoup.defaultNoteHeight)),\n\t\t\tmtime: notesoup.getServerTime(),\n\t\t\ttext: [\n\t\t\t\t'<a href=\"http://twitter.com/', t.user.screen_name, '\" target=\"_blank\">',\n\t\t\t\t\t'<img src=\"', t.user.profile_image_url, '\"/>',\n\t\t\t\t'</a>',\n\t\t\t\tt.text, (t.truncated ? '...' : ''), '<br/>',\n\t\t\t\t'<hr/>', t.user.description, '<br/>'\n\t\t\t].join('') || '(gratuitous tweet)'\n\t\t};\n/*****\n\t\tif (t.text.charAt(0) == '@') {\n\t\t\tvar blankpos = t.text.search(' ');\n\t\t\tvar to = t.text.substr(1, blankpos-1);\n\t\t\tnotesoup.say('To: ' + to);\n\t\t\tfor (var n in notesoup.notes) {\n\t\t\t\tif (notesoup.notes[n].screen_name == to) {\n\t\t\t\t\ttheNote.xPos = notesoup.notes[n].xPos;\n\t\t\t\t\ttheNote.yPos = notesoup.notes[n].yPos + notesoup.notes[n].height + 36;\n\t\t\t\t\ttheNote.bgcolor = notesoup.notes[n].bgcolor;\n\t\t\t\t\tnotesoup.say('Match! ' + to, 'tell');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n*****/\n\t\tnotesoup.sound.play('/sound/35687__Bansemer__Clo_1CCE53.mp3');\n\t\tnotesoup.updateNote(theNote);\n\t\t//notesoup.postEvent('/folder/' + notesoup.foldername, 'updatenote', theNote);\n\t},\n\n\n\tgetURLHandler: function(response, success, options) {\n\t\tif (!success) {\n\t\t\tnotesoup.say('Failure loading data.');\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tthis.tweetstr = response.responseText;\n\t\t\t//alert(\"TWEETLOAD:\" + response.responseText);\n\t\t\tthis.tweets = Ext.util.JSON.decode(this.tweetstr);\t\t\t//.substr(15, this.tweetstr.length-16));\n\t\t\tthis.setContentDiv('Received ' + this.tweets.length + ' tweets...');\n\t\t\tthis.refreshtimer = this.refreshtimeout;\n\t\t\tthis.nexttweet = this.tweets.length - 1;\n\t\t\tthis.displaytimer = this.displaytimeout;\n\t\t\tthis.running = true;\n\t\t} catch (e) {\n\t\t\tthis.setContentDiv('Error loading data: ' + notesoup.dump(e));\n\t\t\tthis.init.defer(1000, this);\n\t\t}\n\t},\n\n\n\tontick: function() {\n\n\t\tif (!this.running) return;\n\n\t\t// shoot out the next note if we have one\n\t\tif (--this.displaytimer <= 0) {\n\t\t\tif (this.nexttweet >= 0) {\n\t\t\t\tthis.handleTweet(this.tweets[this.nexttweet--]);\n\t\t\t\tthis.displaytimer = this.displaytimeout;\n\t\t\t}\n\t\t}\n\n\t\t// make the notes vanish\n\t\tfor (var n in notesoup.notes) {\n\t\t\tvar thenote = notesoup.notes[n];\n\t\t\tif (thenote.istweet) {\n\t\t\t\tthenote.ttl = (thenote.ttl || 0) - 1;\n\t\t\t\tif (thenote.ttl > 0) {\n\t\t\t\t\tthenote.opacity = thenote.ttl / this.tweetttl;\n\t\t\t\t\tvar container = Ext.get(thenote.id + notesoup.ui.divSuffix);\n\t\t\t\t\tif (container) container.setStyle('opacity', '' + thenote.opacity);\n\t\t\t\t}\n\t\t\t\telse notesoup.destroyNote(thenote.id);\n\t\t\t}\t\t\t\t\n\t\t}\n\n\t\t// refresh our cache from twitter\n\t\tif (this.refreshtimer > 0) {\n\t\t\tthis.refreshtimer = this.refreshtimer - 1;\n\t\t\tthis.setContentDiv('Refresh in: ' + this.refreshtimer + ' seconds...');\n\t\t\tif (this.refreshtimer <= 0) this.gettweets();\n\t\t}\n\t},\n\n\tclick: function(e) {\n/***\n\t\tif (!this.feeddata) return;\n\t\tthis.currentImage = this.currentImage + 1;\n\t\tif (this.currentImage >= this.feeddata.items.length)\n\t\t\tthis.currentImage = 0;\n\t\tthis.show();\n***/\n\t}\n\n});\nExt.get(note.id+'_content').on('click', note.click, note);\nnote.init();\n</script>\nLoading...", 
              "tweetttl": 30, 
              "width": 250, 
              "xPos": 536, 
              "yPos": 156
            }, 
            {
              "allowcreate": true, 
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/loginform.js", 
              "notename": "Log In Here", 
              "text": "<script type='text/javascript'>\n/**\n*\tloginform.js - Note Soup login widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tallowcreate: true,\n\n\tonrender: function() {\n\n\t\tvar buttons = [{\n\t\t\ttext: 'log in',\n\t\t\thandler: this.submit,\n\t\t\tscope: this\n\t\t}];\n\n\t\tif (this.allowcreate) {\n\t\t\tbuttons.push({\n\t\t\t\ttext: 'create account',\n\t\t\t\thandler: this.create,\n\t\t\t\tscope: this\n\t\t\t});\n\t\t}\n\n\t\tvar loginForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Username',\n\t\t\t\tid: this.getFieldID('username'),\n\t\t\t\twidth: 175\n\t\t\t},{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Password',\n\t\t\t\tid: this.getFieldID('password'),\n\t\t\t\twidth: 175,\n\t\t\t\tinputType: 'password'\n\t\t\t}],\n\t\t\tbuttons: buttons,\n\t\t\tkeys: [{key: 13, fn: this.submit, scope: this}]\n\t\t});\n\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/>';\n\t\tloginForm.render(thediv);\n\t\tthis.setEphemeral('loginForm', loginForm);\n\t},\n\n\tcreate: function(e) {\n\t\tif (!this.allowcreate) {\n\t\t\tnotesoup.say('Account creation is not enabled.  Please contact the soupmaster.');\n\t\t\treturn;\n\t\t}\n\t\tnotesoup.createUser(this.getField('loginForm', 'username'), this.getField('loginForm', 'password'));\n\t},\n\n\n\tsubmit: function(e) {\n\t\t//notesoup.say('Login: ' + this.getField('loginForm', 'username') + ' ' + this.getField('loginForm', 'password'));\n\t\tnotesoup.login(this.getField('loginForm', 'username'), this.getField('loginForm', 'password'));\n\t}\n});\nnote.show();\n</script>", 
              "width": 250, 
              "xPos": 536, 
              "yPos": 336
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 55, 
              "imports": "/js-src/js-widgets/helloworld.js", 
              "notename": "Hello World", 
              "text": "<script type='text/javascript'>\nnotesoup.say(\"Hello, world!\");\n</script>\nThis is the Hello World note.\n", 
              "width": 250, 
              "xPos": 798, 
              "yPos": 396
            }, 
            {
              "bgcolor": "#ccffcc", 
              "formfields": [], 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/form.js", 
              "notename": "Form", 
              "text": "<script type='text/javascript'>\n/**\n*\tform.js - Note Soup generic form widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tinit: function() {\n\t\tif (!this.formfields) this.formfields = [\n\t\t\t//{label: 'Notes', fieldkey: 'notes', type: 'textarea'}\n\t\t];\n\t\tthis.show();\n\t},\n\n\tonrender: function() {\n\t\tvar myForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 70,\n\t\t\tminButtonWidth: 25,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'hidden'\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'save',\n\t\t\t\tminWidth: 50,\n\t\t\t\thandler: this.savedata,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: '+',\n\t\t\t\tminWidth: 25,\n\t\t\t\thandler: this.insertfield,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tfor (var i=0; i<this.formfields.length; i++) {\n\t\t\tmyForm.add({\n\t\t\t\txtype: this.formfields[i].type,\n\t\t\t\tfieldLabel: this.formfields[i].label,\n\t\t\t\tid: this.getFieldID(this.formfields[i].fieldkey),\n\t\t\t\tname: this.formfields[i].fieldkey,\n\t\t\t\tvalue: this.getdata(this.formfields[i].fieldkey),\n\t\t\t\twidth: this.width - 36 - 76\t\t\n\t\t\t});\n\t\t}\n\n\t\tthis.setContentDiv('');\n\t\tmyForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('myForm', myForm);\n\t},\n\n\tgetdata: function(key) {\n\t\tif (key in this) return this[key];\n\t\treturn '';\n\t},\n\n\tsavedata: function() {\n\t\tfor (var f=0; f < this.formfields.length; f++) {\n\t\t\tthis[this.formfields[f].fieldkey] = this.getField('myForm', this.formfields[f].fieldkey);\n\t\t}\n\t\tthis.save();\n\t},\n\n\tinsertfield: function() {\n\t\tnotesoup.say('insertfield: ' + this.id);\n\t\tvar newfieldtype = prompt('New field type [textfield, textarea, checkbox, ...]', '');\n\t\tvar newfieldlabel = notesoup.prompt('New field display label:', '');\n\t\tvar newfieldkey = notesoup.prompt('New field key:', '');\n\t\tif ((newfieldtype.length > 0) && (newfieldlabel.length > 0) && (newfieldkey.length > 0)) {\n\t\t\tif (!(newfieldkey in this)) this[newfieldkey] = '';\n\t\t\tthis.formfields.push({label: newfieldlabel, fieldkey: newfieldkey, type: newfieldtype});\n\t\t\tthis.save();\n\t\t}\n\t},\n\n\tupdateValues: function() {\n\t\tfor (var f=0; f < this.formfields.length; f++) {\n\t\t\tthis.setValue('myForm', this.formfields[f].fieldkey, this[this.formfields[f].fieldkey]);\n\t\t}\n\t}\n});\nnote.init();\n</script>", 
              "width": 250, 
              "xPos": 798, 
              "yPos": 336
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/periodicalreminder.js", 
              "notename": "Periodical Reminder", 
              "text": "<script type='text/javascript'>\n/**\n*\tperiodicalreminder.js - Note Soup reminder widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tontick: function() {\n\t\ttry {\n\t\t\tif (this.running) this.updateDisplay();\n\t\t} catch (e) {\n\t\t\tnotesoup.say('pr onrender error: ' + notesoup.dump(e));\n\t\t}\n\t},\n\n\tonrender: function() {\n\t\tif (this.running) this.updateDisplay();\n\t\telse this.showInputForm();\n\t},\n\n\tshowInputForm: function() {\n\t\tvar reminderForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tid: this.getFieldID('remindername'),\n\t\t\t\tfieldLabel: 'Subject',\n\t\t\t\tvalue: this.notename || '',\n\t\t\t\twidth: 175\n\t\t\t},{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'In how long',\n\t\t\t\tvalue: this.durationstring || '',\n\t\t\t\twidth: 175,\n\t\t\t\tid: this.getFieldID('duration')\n\t\t\t},{\n\t\t\t\txtype: 'checkbox',\n\t\t\t\tid: this.getFieldID('autorestart'),\n\t\t\t\tfieldLabel: 'Auto restart',\n\t\t\t\tchecked: this.autorestart\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'remind me',\n\t\t\t\thandler: this.submitReminder,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.submitReminder,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/><center><h2>Periodical Reminder Settings</h2></center><br/>';\n\t\treminderForm.render(thediv);\n\t\tthis.setEphemeral('reminderForm', reminderForm);\n\t\t//Ext.get(thediv).addKeyListener(13, this.submitReminder, this);\n\t},\n\n\tsubmitReminder: function(e) {\n\t\tnotesoup.say('Setting reminder to: ' + this.getField('reminderForm', 'remindername') + ' in ' + this.getField('reminderForm', 'duration'));\n\t\tthis.setupClock(this.getField('reminderForm', 'remindername'), this.getField('reminderForm', 'duration'), this.getField('reminderForm', 'autorestart'));\n\t\tthis.startClock();\n\t\t//this.save();\n\t},\n\n\tsetupClock: function(name, duration, autorestart) {\n\t\tif (!name || !duration) return;\n\t\tvar t = new Date();\n\t\tthis.set({\n\t\t\tnotename: name,\n\t\t\tclockstartstring: t.toString(),\n\t\t\tclockstart: t.getTime(),\n\t\t\tclockduration: notesoup.getDuration(duration),\n\t\t\tdurationstring: duration,\n\t\t\tautorestart: autorestart\n\t\t});\n\t\tExt.get(this.id + '_title').update(name);\n\t},\n\n\tstartClock: function() {\n\t\tthis.running = true;\n\t\tthis.complete = false;\n\t\tthis.editing = false;\n\t\tthis.flash('#22f822');\n\t},\n\t\n\trestartClock: function() {\n\t\tthis.setupClock(this.notename, this.durationstring, this.autorestart);\n\t\tthis.startClock();\n\t},\n\n\tstopClock: function() {\n\t\tdelete this.running;\n\t\tvar outerDiv = Ext.get(this.id + notesoup.ui.divSuffix);\n\t\touterDiv.setStyle('opacity', 1.0);\n\t},\n\t\n\teditClock: function() {\n\t\tthis.stopClock();\n\t\tthis.editing = true;\n\t\tthis.show();\n\t},\n\t\n\tontimercomplete: function() {\n\t\tnotesoup.say('Ding! ' + this.notename);\n\t},\n\n\tupdateDisplay: function() {\n\n\t\tvar timediff = new Date().getTime() - this.clockstart;\n\t\tthis.completed = timediff / this.clockduration;\n\t\tif ((this.completed >= 1.0)  || (this.completed < 0)) {\n\t\t\tif (!this.complete) {\n\t\t\t\tthis.ontimercomplete();\n\t\t\t\tthis.complete = true;\n\t\t\t\tif (this.autorestart) this.restartClock();\n\t\t\t}\n\t\t}\n\t\tvar bg = '#ff3030';\n\t\tif (this.completed < 0.75) bg = '#80ff80';\n\t\telse if (this.completed < 0.90) bg = '#ffff30';\n\n\t\tthis.setContentDiv([\n\t\t\t'<br/><h2><center>', \n\t\t\t\tthis.complete ? 'PAST DUE<br/>' : '',\n\t\t\t\tnotesoup.stringifyTimeDiff(timediff), \n\t\t\t\t' (', ''+Math.floor(100 * this.completed), '%) of ', this.durationstring, '<br/>',\n\t\t\t\t'since ', ''+this.clockstartstring,\n\t\t\t'</center></h2><br/>'\n\t\t].join(''));\n\n\t\tvar outerDiv = Ext.get(this.id + notesoup.ui.divSuffix);\n\t\touterDiv.setStyle('opacity', '' + Math.max(0.05, this.completed));\n\t\t\n\t\touterDiv.on('dblclick', function(e) {\n\t\t\tvar thenote = notesoup.notes[notesoup.ui.getNoteIDFromWindowID(this.id)];\n\t\t\tthenote.editClock();\n\t\t\treturn true;\n\t\t});\n\t\t\n\t\tvar innerDiv = Ext.get(this.id + notesoup.ui.contentSuffix);\n\t\tinnerDiv.setStyle('background', bg);\n\t\tvar runningForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'hidden'\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'restart',\n\t\t\t\thandler: this.restartClock,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'edit',\n\t\t\t\thandler: this.editClock,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\trunningForm.render(this.getContentDiv());\n\t}\t\n});\nnote.show();\n</script>", 
              "width": 250, 
              "xPos": 274, 
              "yPos": 336
            }, 
            {
              "bgcolor": "#ccffcc", 
              "destination": "system/widgets", 
              "duration": "5 minutes", 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/egress.js", 
              "notename": "Egress", 
              "text": "<script type='text/javascript'>\n/**\n*\tegress.js - Note Soup programmable egress widget\n*\tCopyright 2007, 2008 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tduration: '5 minutes',\n\tdestination: notesoup.foldername,\n\n\tontick: function() {\n\t\tif (notesoup.sessionTime() > notesoup.getDuration(this.duration)) \n\t\t\treturn notesoup.openFolder(this.destination);\n\t\tthis.onrender();\n\t},\n\n\tonrender: function() {\n\t\tthis.setContentDiv([\n\t\t\t'<br/><h1><center>', \n\t\t\t\tnotesoup.stringifyTimeDiff(notesoup.getDuration(this.duration) - notesoup.sessionTime()), \n\t\t\t'</center></h1><br/>'\n\t\t].join(''));\n\t}\n});\nnote.show();\n</script>", 
              "width": 250, 
              "xPos": 12, 
              "yPos": 336
            }, 
            {
              "bgcolor": "#ccffcc", 
              "buttons": [
                [
                  "attention", 
                  "lime", 
                  "/sound/32304__acclivity__ShipsBell.mp3"
                ], 
                [
                  "order", 
                  "black", 
                  "/sound/6164__NoiseCollector.mp3"
                ], 
                [
                  "warning", 
                  "yellow", 
                  "/sound/23512__liquidhot__De_1C637C.mp3"
                ], 
                [
                  "time is up", 
                  "red", 
                  "/sound/41344__ivanbailey__1.mp3"
                ], 
                [
                  "recess", 
                  "lightblue", 
                  "/sound/41345__ivanbailey__2.mp3"
                ], 
                [
                  "red alert", 
                  "red", 
                  "/sound/17468__cognito_perce_1C634D.mp3"
                ], 
                [
                  "out of order", 
                  "purple", 
                  "/sound/46062__reinsamba__gong.mp3"
                ], 
                [
                  "adjourned", 
                  "black", 
                  "/sound/43504__mkoenig__publ_1C660C.mp3"
                ]
              ], 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/soundboard.js", 
              "notename": "Sound Board", 
              "text": "<script type='text/javascript'>\n/**\n*\tsoundboard.js - Note Soup sound board widget\n*\tCopyright 2008 by Bill Roy\n*\tAll rights reserved.\n*\n*\tThese example sounds are from http://freesound.iua.upf.edu; see\n*\thttp://freesound.iua.upf.edu/legal.php for license information.\n*\tTransformed to mp3 and trimmed for use here.\n*\tTo extend this widget, provide the full url to your .mp3 audio file on the net.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tbuttons: [\n\t\t['attention', 'lime', '/sound/32304__acclivity__ShipsBell.mp3',],\n\t\t['order', 'black', '/sound/6164__NoiseCollector.mp3'],\n\t\t['warning', 'yellow', '/sound/23512__liquidhot__De_1C637C.mp3'],\n\t\t['time is up', 'red', '/sound/41344__ivanbailey__1.mp3'],\n\t\t['recess', 'lightblue', '/sound/41345__ivanbailey__2.mp3'],\n\t\t['red alert', 'red', '/sound/17468__cognito_perce_1C634D.mp3'],\n\t\t['out of order', 'purple', '/sound/46062__reinsamba__gong.mp3'],\n\t\t['adjourned', 'black', '/sound/43504__mkoenig__publ_1C660C.mp3']\n\t],\n\n\tfire: function(i) {\n\t\tvar b = this.buttons[i];\n\t\tnotesoup.sound.play(b[2]);\n\t\tnotesoup.frontstage.flash(b[0], b[1]);\n\t},\n\t\n\tplay: function(soundname) {\n\t\tfor (var i=0; i < this.buttons.length; i++) {\n\t\t\tif (this.buttons[i][0] == soundname) {\n\t\t\t\tthis.fire(i);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.fire(0);\n\t},\n\n\tmakeButton: function(i) {\n\t\treturn [\n\t\t\t'<input type=\"submit\" value=\"', this.buttons[i][0], '\"',\n\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).sendself(\\'fire\\',', i, ');\"/>',\n\t\t\t'<br/>'].join('');\n\t},\n\n\tonrender: function() {\n\t\tvar o = [];\n\t\tfor (var b=0; b<this.buttons.length; b++) {\n\t\t\to.push(this.makeButton(b));\n\t\t}\n\t\tthis.setContentDiv(o.join(''));\n\t}\n});\nnote.show();\n</script>", 
              "width": 250, 
              "xPos": 536, 
              "yPos": 216
            }, 
            {
              "bgcolor": "#ccffcc", 
              "currentImage": 3, 
              "feeddata": {
                "description": "", 
                "generator": "http://www.flickr.com/", 
                "items": [
                  {
                    "author": "nobody@flickr.com (FrenchLandscapes)", 
                    "author_id": "16985849@N06", 
                    "date_taken": "2008-02-25T20:54:23-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/frenchlandscapes/&quot;&gt;FrenchLandscapes&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/frenchlandscapes/2291747727/&quot; title=&quot;Ultimate light on the lake&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3146/2291747727_0c6c0fd351_m.jpg&quot; width=&quot;240&quot; height=&quot;180&quot; alt=&quot;Ultimate light on the lake&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;One of my firsts &amp;quot;serious&amp;quot; hdr try with landscapes.&lt;br /&gt; &lt;br /&gt; Nikon D200 and Sigma 10-20.&lt;br /&gt; 3 nef files converted to HDR and tone mapped with photomatix.&lt;/p&gt;", 
                    "link": "http://www.flickr.com/photos/frenchlandscapes/2291747727/", 
                    "media": {
                      "m": "http://farm4.static.flickr.com/3146/2291747727_0c6c0fd351_m.jpg"
                    }, 
                    "published": "2008-02-25T22:21:17Z", 
                    "tags": "light sunset lake france nature french landscape pond natural scenic environment provence var hdr hdri scenicsnotjustlandscapes", 
                    "title": "Ultimate light on the lake"
                  }, 
                  {
                    "author": "nobody@flickr.com (La c\u00c3\u00a1mara l\u00c3\u00bacida)", 
                    "author_id": "39945239@N00", 
                    "date_taken": "2008-02-11T13:20:23-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/lacamaralucida/&quot;&gt;La c\u00c3\u00a1mara l\u00c3\u00bacida&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/lacamaralucida/2291753039/&quot; title=&quot;&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3062/2291753039_e37bc6c539_m.jpg&quot; width=&quot;240&quot; height=&quot;175&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/lacamaralucida/2291753039/", 
                    "media": {
                      "m": "http://farm4.static.flickr.com/3062/2291753039_e37bc6c539_m.jpg"
                    }, 
                    "published": "2008-02-25T22:23:48Z", 
                    "tags": "windows sunset atardecer ventanas", 
                    "title": ""
                  }, 
                  {
                    "author": "nobody@flickr.com (sammorrowphotography)", 
                    "author_id": "59463981@N00", 
                    "date_taken": "2008-02-24T17:12:06-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/sammorrowphotography/&quot;&gt;sammorrowphotography&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/sammorrowphotography/2291745279/&quot; title=&quot;Good Harbor 2&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2131/2291745279_a2fa5a1916_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Good Harbor 2&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/sammorrowphotography/2291745279/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2131/2291745279_a2fa5a1916_m.jpg"
                    }, 
                    "published": "2008-02-25T22:20:08Z", 
                    "tags": "sunset sky beach gloucester goodharbor rockyneck", 
                    "title": "Good Harbor 2"
                  }, 
                  {
                    "author": "nobody@flickr.com (sammorrowphotography)", 
                    "author_id": "59463981@N00", 
                    "date_taken": "2008-02-24T17:11:48-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/sammorrowphotography/&quot;&gt;sammorrowphotography&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/sammorrowphotography/2291745273/&quot; title=&quot;Good Harbor Sunset&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2333/2291745273_dfba8683fd_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Good Harbor Sunset&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/sammorrowphotography/2291745273/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2333/2291745273_dfba8683fd_m.jpg"
                    }, 
                    "published": "2008-02-25T22:20:08Z", 
                    "tags": "sunset sky beach gloucester goodharbor rockyneck", 
                    "title": "Good Harbor Sunset"
                  }, 
                  {
                    "author": "nobody@flickr.com (Kitty e Kal-El)", 
                    "author_id": "8705414@N05", 
                    "date_taken": "2008-02-21T19:58:00-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/tatinski/&quot;&gt;Kitty e Kal-El&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/tatinski/2292548816/&quot; title=&quot;Sunset colors&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2298/2292548816_683be08fab_m.jpg&quot; width=&quot;240&quot; height=&quot;180&quot; alt=&quot;Sunset colors&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/tatinski/2292548816/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2298/2292548816_683be08fab_m.jpg"
                    }, 
                    "published": "2008-02-25T22:28:51Z", 
                    "tags": "sunset color nature colors colorful", 
                    "title": "Sunset colors"
                  }, 
                  {
                    "author": "nobody@flickr.com (Stormbird)", 
                    "author_id": "59264290@N00", 
                    "date_taken": "2007-04-04T20:14:54-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/59264290@N00/&quot;&gt;Stormbird&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/59264290@N00/2291754735/&quot; title=&quot;breeze block henge&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2414/2291754735_e07af4731f_m.jpg&quot; width=&quot;160&quot; height=&quot;240&quot; alt=&quot;breeze block henge&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/59264290@N00/2291754735/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2414/2291754735_e07af4731f_m.jpg"
                    }, 
                    "published": "2008-02-25T22:24:35Z", 
                    "tags": "sunset arty canonef35mmf2", 
                    "title": "breeze block henge"
                  }, 
                  {
                    "author": "nobody@flickr.com (p3n)", 
                    "author_id": "7938643@N08", 
                    "date_taken": "2008-02-25T17:35:45-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/t0mj0hns0n/&quot;&gt;p3n&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/t0mj0hns0n/2291752775/&quot; title=&quot;&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3203/2291752775_39cc48a99e_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/t0mj0hns0n/2291752775/", 
                    "media": {
                      "m": "http://farm4.static.flickr.com/3203/2291752775_39cc48a99e_m.jpg"
                    }, 
                    "published": "2008-02-25T22:23:40Z", 
                    "tags": "sunset photoshop canon germany radebeul 40d", 
                    "title": ""
                  }, 
                  {
                    "author": "nobody@flickr.com (stepanm)", 
                    "author_id": "69584604@N00", 
                    "date_taken": "2008-01-06T14:47:52-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/stepan/&quot;&gt;stepanm&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/stepan/2292534802/&quot; title=&quot;sunset&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2278/2292534802_90f990be5e_m.jpg&quot; width=&quot;240&quot; height=&quot;158&quot; alt=&quot;sunset&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/stepan/2292534802/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2278/2292534802_90f990be5e_m.jpg"
                    }, 
                    "published": "2008-02-25T22:22:27Z", 
                    "tags": "sunset landscape murmansk", 
                    "title": "sunset"
                  }, 
                  {
                    "author": "nobody@flickr.com (John\u00e2\u201e\u00a2)", 
                    "author_id": "17739807@N08", 
                    "date_taken": "2007-12-12T15:57:30-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/johnbm/&quot;&gt;John\u00e2\u201e\u00a2&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/johnbm/2292542948/&quot; title=&quot;Cabin boat at leigh&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2415/2292542948_98f0e40a90_m.jpg&quot; width=&quot;160&quot; height=&quot;240&quot; alt=&quot;Cabin boat at leigh&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;The weather hasn't been that great lately so thought I would go through some of my archives. This one was taken on 12th December last year.&lt;/p&gt;", 
                    "link": "http://www.flickr.com/photos/johnbm/2292542948/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2415/2292542948_98f0e40a90_m.jpg"
                    }, 
                    "published": "2008-02-25T22:26:11Z", 
                    "tags": "sunset sea sky cloud water boat twilight purple calm leigh lylac", 
                    "title": "Cabin boat at leigh"
                  }, 
                  {
                    "author": "nobody@flickr.com (anacm.silva)", 
                    "author_id": "81126336@N00", 
                    "date_taken": "2008-02-24T19:15:09-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/anasilva/&quot;&gt;anacm.silva&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/anasilva/2291748397/&quot; title=&quot;P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2050/2291748397_0df47176fb_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Aveiro&lt;br /&gt; Portugal&lt;/p&gt;", 
                    "link": "http://www.flickr.com/photos/anasilva/2291748397/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2050/2291748397_0df47176fb_m.jpg"
                    }, 
                    "published": "2008-02-25T22:21:35Z", 
                    "tags": "sunset portugal salinas p\u00c3\u00b4rdosol aveiro salinasdeaveiro", 
                    "title": "P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro"
                  }, 
                  {
                    "author": "nobody@flickr.com (Cepree4)", 
                    "author_id": "23704453@N07", 
                    "date_taken": "2008-02-21T17:20:48-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/23704453@N07/&quot;&gt;Cepree4&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/23704453@N07/2291728641/&quot; title=&quot;IMG_4270&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2334/2291728641_120bef358d_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;IMG_4270&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/23704453@N07/2291728641/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2334/2291728641_120bef358d_m.jpg"
                    }, 
                    "published": "2008-02-25T22:12:18Z", 
                    "tags": "sunset hdr", 
                    "title": "IMG_4270"
                  }, 
                  {
                    "author": "nobody@flickr.com (CANDYTANGERINE)", 
                    "author_id": "41482113@N00", 
                    "date_taken": "2008-02-25T14:20:26-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2292518142/&quot; title=&quot;s p l e n d i p p i n g&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2237/2292518142_21956d5853_m.jpg&quot; width=&quot;240&quot; height=&quot;201&quot; alt=&quot;s p l e n d i p p i n g&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/candytangerine/2292518142/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2237/2292518142_21956d5853_m.jpg"
                    }, 
                    "published": "2008-02-25T22:14:41Z", 
                    "tags": "pink blue sunset sky moon home cheese stars big long exposure luna timer beams", 
                    "title": "s p l e n d i p p i n g"
                  }, 
                  {
                    "author": "nobody@flickr.com (DanielJames)", 
                    "author_id": "37996577120@N01", 
                    "date_taken": "2008-02-22T18:11:09-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/revjim/&quot;&gt;DanielJames&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/revjim/2291740795/&quot; title=&quot;sticks in the mud&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2352/2291740795_a69d396b90_m.jpg&quot; width=&quot;159&quot; height=&quot;240&quot; alt=&quot;sticks in the mud&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/revjim/2291740795/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2352/2291740795_a69d396b90_m.jpg"
                    }, 
                    "published": "2008-02-25T22:18:00Z", 
                    "tags": "sunset sun water geotagged sticks texas unitedstates mud littleelm geo:lat=3318230200 geo:lon=9694531900", 
                    "title": "sticks in the mud"
                  }, 
                  {
                    "author": "nobody@flickr.com (bill1608)", 
                    "author_id": "89666969@N00", 
                    "date_taken": "2008-02-14T18:07:39-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/89666969@N00/&quot;&gt;bill1608&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/89666969@N00/2292529192/&quot; title=&quot;The Mark of Zorro&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2046/2292529192_3f3bc6fd43_m.jpg&quot; width=&quot;240&quot; height=&quot;154&quot; alt=&quot;The Mark of Zorro&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/89666969@N00/2292529192/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2046/2292529192_3f3bc6fd43_m.jpg"
                    }, 
                    "published": "2008-02-25T22:19:50Z", 
                    "tags": "sunset nature", 
                    "title": "The Mark of Zorro"
                  }, 
                  {
                    "author": "nobody@flickr.com (CANDYTANGERINE)", 
                    "author_id": "41482113@N00", 
                    "date_taken": "2008-02-25T14:19:15-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2291733901/&quot; title=&quot;hearty cheese&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3161/2291733901_94f6fb9ebc_m.jpg&quot; width=&quot;240&quot; height=&quot;210&quot; alt=&quot;hearty cheese&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/candytangerine/2291733901/", 
                    "media": {
                      "m": "http://farm4.static.flickr.com/3161/2291733901_94f6fb9ebc_m.jpg"
                    }, 
                    "published": "2008-02-25T22:14:45Z", 
                    "tags": "pink blue sunset sky moon home cheese stars big long exposure luna timer beams", 
                    "title": "hearty cheese"
                  }, 
                  {
                    "author": "nobody@flickr.com (Paul Patras)", 
                    "author_id": "29584905@N00", 
                    "date_taken": "2008-02-24T17:36:33-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/paulpatras/&quot;&gt;Paul Patras&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/paulpatras/2292525954/&quot; title=&quot;Sunset over Vatican&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2165/2292525954_b1d12674b7_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Sunset over Vatican&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Afternoon view from Castel S. Angelo, Roma.&lt;/p&gt;", 
                    "link": "http://www.flickr.com/photos/paulpatras/2292525954/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2165/2292525954_b1d12674b7_m.jpg"
                    }, 
                    "published": "2008-02-25T22:18:15Z", 
                    "tags": "sunset vatican roma santangelo", 
                    "title": "Sunset over Vatican"
                  }, 
                  {
                    "author": "nobody@flickr.com (DanielJames)", 
                    "author_id": "37996577120@N01", 
                    "date_taken": "2008-02-22T18:21:05-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/revjim/&quot;&gt;DanielJames&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/revjim/2292525550/&quot; title=&quot;a single drop&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3137/2292525550_621e263c34_m.jpg&quot; width=&quot;159&quot; height=&quot;240&quot; alt=&quot;a single drop&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/revjim/2292525550/", 
                    "media": {
                      "m": "http://farm4.static.flickr.com/3137/2292525550_621e263c34_m.jpg"
                    }, 
                    "published": "2008-02-25T22:18:04Z", 
                    "tags": "park sunset water geotagged texas unitedstates ripple littleelm doebranch geo:lat=3318229600 geo:lon=9694531900", 
                    "title": "a single drop"
                  }, 
                  {
                    "author": "nobody@flickr.com (CANDYTANGERINE)", 
                    "author_id": "41482113@N00", 
                    "date_taken": "2008-02-25T14:26:45-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2292517812/&quot; title=&quot;lumie lunie&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2323/2292517812_8fec38bdd1_m.jpg&quot; width=&quot;182&quot; height=&quot;240&quot; alt=&quot;lumie lunie&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/candytangerine/2292517812/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2323/2292517812_8fec38bdd1_m.jpg"
                    }, 
                    "published": "2008-02-25T22:14:34Z", 
                    "tags": "pink blue sunset sky moon home cheese stars big long exposure luna timer beams", 
                    "title": "lumie lunie"
                  }, 
                  {
                    "author": "nobody@flickr.com (norjam8)", 
                    "author_id": "25685920@N00", 
                    "date_taken": "2008-02-21T18:13:00-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/norjam8/&quot;&gt;norjam8&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/norjam8/2291729627/&quot; title=&quot;Dancing Trees&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3175/2291729627_13a46b6df5_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;Dancing Trees&quot; /&gt;&lt;/a&gt;&lt;/p&gt; ", 
                    "link": "http://www.flickr.com/photos/norjam8/2291729627/", 
                    "media": {
                      "m": "http://farm4.static.flickr.com/3175/2291729627_13a46b6df5_m.jpg"
                    }, 
                    "published": "2008-02-25T22:12:48Z", 
                    "tags": "trees winter sunset orange lake snow ice beach yellow riley dancing michigan imgp6097ap", 
                    "title": "Dancing Trees"
                  }, 
                  {
                    "author": "nobody@flickr.com (o_bbarone)", 
                    "author_id": "22944142@N06", 
                    "date_taken": "2007-12-27T17:38:43-08:00", 
                    "description": "&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/o_barone/&quot;&gt;o_bbarone&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/o_barone/2291739317/&quot; title=&quot;Tramonto a Cuma&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2227/2291739317_f4083462a1_m.jpg&quot; width=&quot;240&quot; height=&quot;136&quot; alt=&quot;Tramonto a Cuma&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;l'incredibile .. c'era una fila di macchine ferme a guardar qeusto spettacolo ...&lt;/p&gt;", 
                    "link": "http://www.flickr.com/photos/o_barone/2291739317/", 
                    "media": {
                      "m": "http://farm3.static.flickr.com/2227/2291739317_f4083462a1_m.jpg"
                    }, 
                    "published": "2008-02-25T22:17:15Z", 
                    "tags": "sunset eos tramonto campania blu napoli rosso barone cuma pozzuoli campi flegrei 400d oniricamente canoniani", 
                    "title": "Tramonto a Cuma"
                  }
                ], 
                "link": "http://www.flickr.com/photos/tags/sunset/", 
                "modified": "2008-02-25T22:21:17Z", 
                "title": "Photos from everyone tagged sunset"
              }, 
              "feedstr": "jsonFlickrFeed({\n\t\t\"title\": \"Photos from everyone tagged sunset\",\n\t\t\"link\": \"http://www.flickr.com/photos/tags/sunset/\",\n\t\t\"description\": \"\",\n\t\t\"modified\": \"2008-02-25T22:21:17Z\",\n\t\t\"generator\": \"http://www.flickr.com/\",\n\t\t\"items\": [\n\t   {\n\t\t\t\"title\": \"Ultimate light on the lake\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/frenchlandscapes/2291747727/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3146/2291747727_0c6c0fd351_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T20:54:23-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/frenchlandscapes/&quot;&gt;FrenchLandscapes&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/frenchlandscapes/2291747727/&quot; title=&quot;Ultimate light on the lake&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3146/2291747727_0c6c0fd351_m.jpg&quot; width=&quot;240&quot; height=&quot;180&quot; alt=&quot;Ultimate light on the lake&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;One of my firsts &amp;quot;serious&amp;quot; hdr try with landscapes.&lt;br /&gt; &lt;br /&gt; Nikon D200 and Sigma 10-20.&lt;br /&gt; 3 nef files converted to HDR and tone mapped with photomatix.&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:21:17Z\",\n\t\t\t\"author\": \"nobody@flickr.com (FrenchLandscapes)\",\n\t\t\t\"author_id\": \"16985849@N06\",\n\t\t\t\"tags\": \"light sunset lake france nature french landscape pond natural scenic environment provence var hdr hdri scenicsnotjustlandscapes\"\n\t   },\n\t   {\n\t\t\t\"title\": \"\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/lacamaralucida/2291753039/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3062/2291753039_e37bc6c539_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-11T13:20:23-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/lacamaralucida/&quot;&gt;La c\u00c3\u00a1mara l\u00c3\u00bacida&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/lacamaralucida/2291753039/&quot; title=&quot;&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3062/2291753039_e37bc6c539_m.jpg&quot; width=&quot;240&quot; height=&quot;175&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:23:48Z\",\n\t\t\t\"author\": \"nobody@flickr.com (La c\u00c3\u00a1mara l\u00c3\u00bacida)\",\n\t\t\t\"author_id\": \"39945239@N00\",\n\t\t\t\"tags\": \"windows sunset atardecer ventanas\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Good Harbor 2\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/sammorrowphotography/2291745279/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2131/2291745279_a2fa5a1916_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-24T17:12:06-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/sammorrowphotography/&quot;&gt;sammorrowphotography&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/sammorrowphotography/2291745279/&quot; title=&quot;Good Harbor 2&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2131/2291745279_a2fa5a1916_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Good Harbor 2&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:20:08Z\",\n\t\t\t\"author\": \"nobody@flickr.com (sammorrowphotography)\",\n\t\t\t\"author_id\": \"59463981@N00\",\n\t\t\t\"tags\": \"sunset sky beach gloucester goodharbor rockyneck\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Good Harbor Sunset\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/sammorrowphotography/2291745273/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2333/2291745273_dfba8683fd_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-24T17:11:48-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/sammorrowphotography/&quot;&gt;sammorrowphotography&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/sammorrowphotography/2291745273/&quot; title=&quot;Good Harbor Sunset&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2333/2291745273_dfba8683fd_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Good Harbor Sunset&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:20:08Z\",\n\t\t\t\"author\": \"nobody@flickr.com (sammorrowphotography)\",\n\t\t\t\"author_id\": \"59463981@N00\",\n\t\t\t\"tags\": \"sunset sky beach gloucester goodharbor rockyneck\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Sunset colors\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/tatinski/2292548816/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2298/2292548816_683be08fab_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-21T19:58:00-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/tatinski/&quot;&gt;Kitty e Kal-El&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/tatinski/2292548816/&quot; title=&quot;Sunset colors&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2298/2292548816_683be08fab_m.jpg&quot; width=&quot;240&quot; height=&quot;180&quot; alt=&quot;Sunset colors&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:28:51Z\",\n\t\t\t\"author\": \"nobody@flickr.com (Kitty e Kal-El)\",\n\t\t\t\"author_id\": \"8705414@N05\",\n\t\t\t\"tags\": \"sunset color nature colors colorful\"\n\t   },\n\t   {\n\t\t\t\"title\": \"breeze block henge\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/59264290@N00/2291754735/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2414/2291754735_e07af4731f_m.jpg\"},\n\t\t\t\"date_taken\": \"2007-04-04T20:14:54-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/59264290@N00/&quot;&gt;Stormbird&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/59264290@N00/2291754735/&quot; title=&quot;breeze block henge&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2414/2291754735_e07af4731f_m.jpg&quot; width=&quot;160&quot; height=&quot;240&quot; alt=&quot;breeze block henge&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:24:35Z\",\n\t\t\t\"author\": \"nobody@flickr.com (Stormbird)\",\n\t\t\t\"author_id\": \"59264290@N00\",\n\t\t\t\"tags\": \"sunset arty canonef35mmf2\"\n\t   },\n\t   {\n\t\t\t\"title\": \"\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/t0mj0hns0n/2291752775/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3203/2291752775_39cc48a99e_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T17:35:45-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/t0mj0hns0n/&quot;&gt;p3n&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/t0mj0hns0n/2291752775/&quot; title=&quot;&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3203/2291752775_39cc48a99e_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:23:40Z\",\n\t\t\t\"author\": \"nobody@flickr.com (p3n)\",\n\t\t\t\"author_id\": \"7938643@N08\",\n\t\t\t\"tags\": \"sunset photoshop canon germany radebeul 40d\"\n\t   },\n\t   {\n\t\t\t\"title\": \"sunset\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/stepan/2292534802/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2278/2292534802_90f990be5e_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-01-06T14:47:52-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/stepan/&quot;&gt;stepanm&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/stepan/2292534802/&quot; title=&quot;sunset&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2278/2292534802_90f990be5e_m.jpg&quot; width=&quot;240&quot; height=&quot;158&quot; alt=&quot;sunset&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:22:27Z\",\n\t\t\t\"author\": \"nobody@flickr.com (stepanm)\",\n\t\t\t\"author_id\": \"69584604@N00\",\n\t\t\t\"tags\": \"sunset landscape murmansk\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Cabin boat at leigh\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/johnbm/2292542948/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2415/2292542948_98f0e40a90_m.jpg\"},\n\t\t\t\"date_taken\": \"2007-12-12T15:57:30-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/johnbm/&quot;&gt;John\u00e2\u201e\u00a2&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/johnbm/2292542948/&quot; title=&quot;Cabin boat at leigh&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2415/2292542948_98f0e40a90_m.jpg&quot; width=&quot;160&quot; height=&quot;240&quot; alt=&quot;Cabin boat at leigh&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;The weather hasn't been that great lately so thought I would go through some of my archives. This one was taken on 12th December last year.&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:26:11Z\",\n\t\t\t\"author\": \"nobody@flickr.com (John\u00e2\u201e\u00a2)\",\n\t\t\t\"author_id\": \"17739807@N08\",\n\t\t\t\"tags\": \"sunset sea sky cloud water boat twilight purple calm leigh lylac\"\n\t   },\n\t   {\n\t\t\t\"title\": \"P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/anasilva/2291748397/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2050/2291748397_0df47176fb_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-24T19:15:09-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/anasilva/&quot;&gt;anacm.silva&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/anasilva/2291748397/&quot; title=&quot;P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2050/2291748397_0df47176fb_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;P\u00c3\u00b4r-do-Sol nas Salinas de Aveiro&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Aveiro&lt;br /&gt; Portugal&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:21:35Z\",\n\t\t\t\"author\": \"nobody@flickr.com (anacm.silva)\",\n\t\t\t\"author_id\": \"81126336@N00\",\n\t\t\t\"tags\": \"sunset portugal salinas p\u00c3\u00b4rdosol aveiro salinasdeaveiro\"\n\t   },\n\t   {\n\t\t\t\"title\": \"IMG_4270\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/23704453@N07/2291728641/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2334/2291728641_120bef358d_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-21T17:20:48-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/23704453@N07/&quot;&gt;Cepree4&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/23704453@N07/2291728641/&quot; title=&quot;IMG_4270&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2334/2291728641_120bef358d_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;IMG_4270&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:12:18Z\",\n\t\t\t\"author\": \"nobody@flickr.com (Cepree4)\",\n\t\t\t\"author_id\": \"23704453@N07\",\n\t\t\t\"tags\": \"sunset hdr\"\n\t   },\n\t   {\n\t\t\t\"title\": \"s p l e n d i p p i n g\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/candytangerine/2292518142/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2237/2292518142_21956d5853_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T14:20:26-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2292518142/&quot; title=&quot;s p l e n d i p p i n g&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2237/2292518142_21956d5853_m.jpg&quot; width=&quot;240&quot; height=&quot;201&quot; alt=&quot;s p l e n d i p p i n g&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:14:41Z\",\n\t\t\t\"author\": \"nobody@flickr.com (CANDYTANGERINE)\",\n\t\t\t\"author_id\": \"41482113@N00\",\n\t\t\t\"tags\": \"pink blue sunset sky moon home cheese stars big long exposure luna timer beams\"\n\t   },\n\t   {\n\t\t\t\"title\": \"sticks in the mud\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/revjim/2291740795/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2352/2291740795_a69d396b90_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-22T18:11:09-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/revjim/&quot;&gt;DanielJames&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/revjim/2291740795/&quot; title=&quot;sticks in the mud&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2352/2291740795_a69d396b90_m.jpg&quot; width=&quot;159&quot; height=&quot;240&quot; alt=&quot;sticks in the mud&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:18:00Z\",\n\t\t\t\"author\": \"nobody@flickr.com (DanielJames)\",\n\t\t\t\"author_id\": \"37996577120@N01\",\n\t\t\t\"tags\": \"sunset sun water geotagged sticks texas unitedstates mud littleelm geo:lat=3318230200 geo:lon=9694531900\"\n\t   },\n\t   {\n\t\t\t\"title\": \"The Mark of Zorro\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/89666969@N00/2292529192/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2046/2292529192_3f3bc6fd43_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-14T18:07:39-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/89666969@N00/&quot;&gt;bill1608&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/89666969@N00/2292529192/&quot; title=&quot;The Mark of Zorro&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2046/2292529192_3f3bc6fd43_m.jpg&quot; width=&quot;240&quot; height=&quot;154&quot; alt=&quot;The Mark of Zorro&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:19:50Z\",\n\t\t\t\"author\": \"nobody@flickr.com (bill1608)\",\n\t\t\t\"author_id\": \"89666969@N00\",\n\t\t\t\"tags\": \"sunset nature\"\n\t   },\n\t   {\n\t\t\t\"title\": \"hearty cheese\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/candytangerine/2291733901/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3161/2291733901_94f6fb9ebc_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T14:19:15-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2291733901/&quot; title=&quot;hearty cheese&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3161/2291733901_94f6fb9ebc_m.jpg&quot; width=&quot;240&quot; height=&quot;210&quot; alt=&quot;hearty cheese&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:14:45Z\",\n\t\t\t\"author\": \"nobody@flickr.com (CANDYTANGERINE)\",\n\t\t\t\"author_id\": \"41482113@N00\",\n\t\t\t\"tags\": \"pink blue sunset sky moon home cheese stars big long exposure luna timer beams\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Sunset over Vatican\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/paulpatras/2292525954/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2165/2292525954_b1d12674b7_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-24T17:36:33-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/paulpatras/&quot;&gt;Paul Patras&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/paulpatras/2292525954/&quot; title=&quot;Sunset over Vatican&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2165/2292525954_b1d12674b7_m.jpg&quot; width=&quot;240&quot; height=&quot;161&quot; alt=&quot;Sunset over Vatican&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Afternoon view from Castel S. Angelo, Roma.&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:18:15Z\",\n\t\t\t\"author\": \"nobody@flickr.com (Paul Patras)\",\n\t\t\t\"author_id\": \"29584905@N00\",\n\t\t\t\"tags\": \"sunset vatican roma santangelo\"\n\t   },\n\t   {\n\t\t\t\"title\": \"a single drop\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/revjim/2292525550/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3137/2292525550_621e263c34_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-22T18:21:05-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/revjim/&quot;&gt;DanielJames&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/revjim/2292525550/&quot; title=&quot;a single drop&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3137/2292525550_621e263c34_m.jpg&quot; width=&quot;159&quot; height=&quot;240&quot; alt=&quot;a single drop&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:18:04Z\",\n\t\t\t\"author\": \"nobody@flickr.com (DanielJames)\",\n\t\t\t\"author_id\": \"37996577120@N01\",\n\t\t\t\"tags\": \"park sunset water geotagged texas unitedstates ripple littleelm doebranch geo:lat=3318229600 geo:lon=9694531900\"\n\t   },\n\t   {\n\t\t\t\"title\": \"lumie lunie\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/candytangerine/2292517812/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2323/2292517812_8fec38bdd1_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-25T14:26:45-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/candytangerine/&quot;&gt;CANDYTANGERINE&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/candytangerine/2292517812/&quot; title=&quot;lumie lunie&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2323/2292517812_8fec38bdd1_m.jpg&quot; width=&quot;182&quot; height=&quot;240&quot; alt=&quot;lumie lunie&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:14:34Z\",\n\t\t\t\"author\": \"nobody@flickr.com (CANDYTANGERINE)\",\n\t\t\t\"author_id\": \"41482113@N00\",\n\t\t\t\"tags\": \"pink blue sunset sky moon home cheese stars big long exposure luna timer beams\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Dancing Trees\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/norjam8/2291729627/\",\n\t\t\t\"media\": {\"m\":\"http://farm4.static.flickr.com/3175/2291729627_13a46b6df5_m.jpg\"},\n\t\t\t\"date_taken\": \"2008-02-21T18:13:00-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/norjam8/&quot;&gt;norjam8&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/norjam8/2291729627/&quot; title=&quot;Dancing Trees&quot;&gt;&lt;img src=&quot;http://farm4.static.flickr.com/3175/2291729627_13a46b6df5_m.jpg&quot; width=&quot;240&quot; height=&quot;160&quot; alt=&quot;Dancing Trees&quot; /&gt;&lt;/a&gt;&lt;/p&gt; \",\n\t\t\t\"published\": \"2008-02-25T22:12:48Z\",\n\t\t\t\"author\": \"nobody@flickr.com (norjam8)\",\n\t\t\t\"author_id\": \"25685920@N00\",\n\t\t\t\"tags\": \"trees winter sunset orange lake snow ice beach yellow riley dancing michigan imgp6097ap\"\n\t   },\n\t   {\n\t\t\t\"title\": \"Tramonto a Cuma\",\n\t\t\t\"link\": \"http://www.flickr.com/photos/o_barone/2291739317/\",\n\t\t\t\"media\": {\"m\":\"http://farm3.static.flickr.com/2227/2291739317_f4083462a1_m.jpg\"},\n\t\t\t\"date_taken\": \"2007-12-27T17:38:43-08:00\",\n\t\t\t\"description\": \"&lt;p&gt;&lt;a href=&quot;http://www.flickr.com/people/o_barone/&quot;&gt;o_bbarone&lt;/a&gt; posted a photo:&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.flickr.com/photos/o_barone/2291739317/&quot; title=&quot;Tramonto a Cuma&quot;&gt;&lt;img src=&quot;http://farm3.static.flickr.com/2227/2291739317_f4083462a1_m.jpg&quot; width=&quot;240&quot; height=&quot;136&quot; alt=&quot;Tramonto a Cuma&quot; /&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;l'incredibile .. c'era una fila di macchine ferme a guardar qeusto spettacolo ...&lt;/p&gt;\",\n\t\t\t\"published\": \"2008-02-25T22:17:15Z\",\n\t\t\t\"author\": \"nobody@flickr.com (o_bbarone)\",\n\t\t\t\"author_id\": \"22944142@N06\",\n\t\t\t\"tags\": \"sunset eos tramonto campania blu napoli rosso barone cuma pozzuoli campi flegrei 400d oniricamente canoniani\"\n\t   }\n        ]\n})", 
              "from": "system in system/widgets", 
              "height": 55, 
              "imports": "/js-src/js-widgets/flickrjson.js", 
              "keywords": "sunset", 
              "notename": "sunset", 
              "text": "<script type='text/javascript'>\n/**\n*\tflickrjson.js - Note Soup flickr.com json api widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tviewtimeout: 10,\n\tviewtimer: 10,\n\n\tinit: function() {\n\t\tthis.keywords = (this.notename != 'Flickr Images') ? this.notename : 'sunset';\n\t\tthis.notename = this.keywords;\n\t\tnote.getflickr(this.keywords);\n\t},\n\n\tontick: function() {\n\n\t\tif (this.notename != this.keywords)\n\t\t\treturn this.init();\n\n\t\tthis.viewtimer = this.viewtimer - 1;\n\t\tif (this.viewtimer <= 0) {\n\t\t\tthis.click();\n\t\t\tthis.viewtimer = this.viewtimeout;\n\t\t}\n\t},\n\n\tgetURLHandler: function(response, success, options) {\n\t\tif (!success) {\n\t\t\tnotesoup.say('Failure loading data.');\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\t// prune 'jsonFlickrFeed('\n\t\t\tthis.feedstr = response.responseText;\n\t\t\tthis.feeddata = Ext.util.JSON.decode(this.feedstr.substr(15, this.feedstr.length-16));\n\t\t\tnotesoup.say('Received ' + this.feeddata.items.length + ' images...');\n\t\t\tthis.onrender = this.renderimage;\n\t\t\tthis.currentImage = 0;\n\t\t\tthis.show();\n\t\t} catch (e) {\n\t\t\tthis.setContentDiv('Error loading feed: ' + notesoup.dump(e));\n\t\t}\n\t},\n\n\trenderimage: function() {\n\t\tvar markup = [\n\t\t\t\"<img style='width:100%;' src='\",\n\t\t\tthis.getimage(),\n\t\t\t\"'/>\"\n\t\t].join('');\n\t\tthis.setContentDiv(markup);\n\t},\n\n\tgetimage: function() {\n\t\tif (!this.feeddata) return '';\n\t\treturn this.feeddata.items[this.currentImage].media.m;\n\t},\n\n\tclick: function(e) {\n\t\tif (!this.feeddata) return;\n\t\tthis.currentImage = this.currentImage + 1;\n\t\tif (this.currentImage >= this.feeddata.items.length)\n\t\t\tthis.currentImage = 0;\n\t\tthis.show();\n\t},\n\n\tgetflickr: function(str) {\n\t\tnotesoup.say('Fetching Flickr images for keyword: ' + str);\n\t\tthis.geturl('http://api.flickr.com/services/feeds/photos_public.gne?tags=' + escape(str) + '&format=json');\n\t}\n});\nExt.get(note.id+'_content').on('click', note.click, note);\nnote.init();\n</script>\nLoading...", 
              "viewtimeout": 10, 
              "viewtimer": 8, 
              "width": 250, 
              "xPos": 560, 
              "yPos": 519
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 55, 
              "imports": "/js-src/js-widgets/polling.js", 
              "notename": "Poll", 
              "text": "<script type='text/javascript'>\n/**\n*\tpoll.js - Note Soup polling widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tvotespervoter: 1,\n\n\txPos: 12,\n\tyPos: 36,\n\n\tvotexpos: 276,\n\tvoteypos: 36,\n\tvoteyinc: 42,\n\n\tunlockFolder: function() {\n\t\tnotesoup.setFolderACL(notesoup.foldername, {\n\t\t\treaders: '*',\n\t\t\tsenders: '*'\n\t\t});\n\t},\n\n\n\tlockFolder: function() {\n\t\tnotesoup.setFolderACL(notesoup.foldername, {\n\t\t\t//readers: '-*',\n\t\t\tsenders: '-*'\n\t\t});\n\t},\n\n\n\tisPollOwner: function() {\n\t\treturn (notesoup.loggedin && (notesoup.username == notesoup.foldername.split('/')[0]));\n\t},\n\n\n\tgetTopic: function(save) {\n\t\tthis.topic = notesoup.prompt('Enter a topic for the poll:', this.topic);\n\t\tif (save) {\n\t\t\tthis.save();\n\t\t\tthis.show();\n\t\t}\n\t},\n\n\n\tstartPoll: function() {\n\t\tif (!this.running && notesoup.loggedin && this.isPollOwner()) {\n\t\t\tif (!this.topic) this.getTopic();\n\t\t\tvar duration = notesoup.prompt('Starting poll: How long should voting be open?', '100 seconds');\n\t\t\tif (!duration) return;\n\t\t\tduration = notesoup.getDuration(duration);\n\t\t\tif (!duration) return;\n\t\t\tthis.starttime = new Date().getTime();\n\t\t\tthis.duration = duration;\n\t\t\tthis.endtime = this.starttime + duration;\n\t\t\tthis.polluser = notesoup.username;\n\t\t\tthis.unlockFolder();\n\t\t\tthis.running = true;\n\t\t\tthis.ended = false;\n\t\t\tthis.save();\n\t\t\tthis.show();\n\t\t\tnotesoup.folderSync();\n\t\t\tnotesoup.say('The poll is running.');\n\t\t}\n\t\telse {\n\t\t\tnotesoup.say('Sorry, only the poll owner can start the poll.', 'error');\n\t\t}\n\t},\n\n\n\tendPoll: function() {\n\t\tif (this.running && this.isPollOwner()) {\n\t\t\tthis.running = false;\n\t\t\tthis.ended = true;\n\t\t\tnotesoup.say('Ending poll...');\n\t\t\tthis.lockFolder();\n\t\t\tthis.updateVoteCounts();\n\t\t\tthis.save();\n\t\t\tnotesoup.folderSync();\n\t\t\tnotesoup.folderSay('The poll is closed.');\n\t\t}\n\t\telse {\n\t\t\tthis.running = false;\n\t\t}\n\t},\n\t\n\n\taddChoice: function() {\n\t\tif (this.running) return;\n\t\tif (!this.isPollOwner()) return;\n\t\tvar choicetext = prompt('Add Choice: Enter the text for this poll choice:', '');\n\t\tif (!choicetext) return;\n\t\tif (this.choices == undefined) this.choices = [];\n\t\tthis.choices.push(choicetext);\n\t\tif (this.votecounts == undefined) this.votecounts = [];\n\t\tthis.votecounts.push(0);\n\t\tthis.save();\n\t\tthis.show();\n\t},\n\n\n\tvote: function(choiceindex) {\n\t\tif (!notesoup.loggedin || !notesoup.username) {\n\t\t\tnotesoup.say('Sorry, you must be logged in to vote.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.running) {\n\t\t\tnotesoup.say('Sorry, the poll is not running.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tif ((choiceindex > this.choices.length) || (choiceindex < 0)) return;\n\t\tnotesoup.say('Submitting your vote: ' + this.choices[choiceindex]);\n\n\t\t//var id = 'notepollvote' + notesoup.randomName(20);\n\t\tnotesoup.saveNote({\n\t\t\tnotename: 'vote',\n\t\t\t//id: id,\n\t\t\txPos: this.votexpos,\n\t\t\tyPos: this.voteypos,\n\t\t\tapropos: this.id,\n\t\t\tbgcolor: notesoup.ui.defaultNoteColor,\n\t\t\ttext: this.choices[choiceindex]\n\t\t}, notesoup.foldername);\n\t\tthis.voteypos += this.voteyinc;\n\t},\n\n\n\n\ttallyVote: function(vote) {\n\t\tfor (var c=0; c < this.choices.length; c++) {\n\t\t\tif (vote.text == this.choices[c]) {\n\t\t\t\tvar voter = vote.from.split(' ')[0];\n\t\t\t\tif (!(voter in this.votes)) this.votes[voter] = [];\n\t\t\t\tthis.votes[voter].push(c);\n\t\t\t\twhile (this.votes[voter].length > this.votespervoter) {\n\t\t\t\t\t//notesoup.say('discarding rolloff vote for ' + voter);\n\t\t\t\t\tthis.votes[voter].shift();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthenote.flash('chocolate');\n\t\tnotesoup.say('Invalid vote.');\n\t},\n\n\n\ttotalize: function() {\n\t\tfor (var i=0; i < this.choices.length; i++) this.votecounts[i] = 0;\n\t\tthis.totalvotes = 0;\n\t\tfor (var voter in this.votes) {\n\t\t\tfor (var vote=0; vote < this.votes[voter].length; vote++) {\n\t\t\t\t//notesoup.say('Totalizer: ' + voter + ' ' + vote + ' ' + this.votes[voter][vote]);\n\t\t\t\tthis.votecounts[this.votes[voter][vote]]++;\n\t\t\t\tthis.totalvotes++;\n\t\t\t}\n\t\t}\n\t\tnotesoup.say('Totalizer sees ' + this.totalvotes + ' votes.', 'whisper');\n\t},\n\n\n\tpostGrandTotal: function() {\n\t\tvar t = this.totalvotes ? this.totalvotes : 0;\n\t\tExt.get(this.id + '_pc_total').update('<hr/>Total votes: ' + t);\n\t},\n\n\n\tpostTotals: function() {\n\t\tfor (var i=0; i < this.choices.length; i++) {\n\t\t\tExt.get(this.id + '_pc_v_' + i).update(''+this.votecounts[i]);\n\t\t}\n\t\tthis.postGrandTotal();\n\t},\n\n\n\tupdateVoteCounts: function() {\n\t\tthis.votes = {};\n\t\tvar notelist = notesoup.getNotesOrderedBy('mtime', true);\n\t\tfor (var n=0; n < notelist.length; n++) {\n\t\t\tvar thenote = notesoup.notes[notelist[n]];\n\t\t\tif (thenote.id == this.id) continue;\n\t\t\tif (!thenote.notename) continue;\n\t\t\tif (thenote.notename != 'vote') continue;\n\t\t\tif (!thenote.apropos) continue;\n\t\t\tif (thenote.apropos != this.id) continue;\n\n\t\t\tif (!thenote.text || !thenote.from || !thenote.mtime || \n\t\t\t\t(thenote.mtime * 1000 < this.starttime) || (thenote.mtime * 1000 > this.endtime)) {\n\t\t\t\tif (this.isPollOwner()) {\n\t\t\t\t\tnotesoup.say('Deleting malformed vote.');\n\t\t\t\t\tthenote.destroy();\n\t\t\t\t}\n\t\t\t\telse continue;\n\t\t\t}\n\t\t\tthis.tallyVote(thenote);\n\t\t}\n\t\tthis.totalize();\n\t\tthis.postTotals();\n\t},\n\n\n\tontick: function() {\n\t\tif (!this.running) return;\n\t\tif (new Date() > this.endtime) {\n\t\t\tif (this.isPollOwner()) {\n\t\t\t\tthis.endPoll();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.running = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// update time remaining\n\t\tthis.timeleft = this.endtime - new Date();\n\t\tExt.get(this.id + '_pc_timeleft').update('Time remaining: ' + notesoup.stringifyTimeDiff(this.timeleft));\n\n\t\t// set the color\n\t\tvar newcolor = '';\n\t\tif (this.timeleft < (15*1000)) newcolor = 'red';\n\t\telse if (this.timeleft < (60*1000)) newcolor = 'yellow';\n\t\tif (newcolor) {\n\t\t\tthis.getContentDiv().style.background = newcolor;\n\t\t}\n\n\t\ttry {\n\t\t\tthis.updateVoteCounts();\n\t\t} catch(e) {\n\t\t\tnotesoup.say('Exception updating vote count: ' + notesoup.dump(e));\n\t\t\treturn;\n\t\t}\n\t},\n\n\n\tformatChoice: function(index) {\n\t\treturn(['<tr>',\n\t\t\t'<td>',\n\t\t\t\tthis.running ? '<input type=\"submit\" value=\"vote\"'+\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).vote(' + index + ');\"/>' : '&bull;&nbsp;',\n\t\t\t'</td>',\n\t\t\t'<td style=\"width:80%;\">', this.choices[index], '</td>',\n\t\t\t'<td style=\"align:right;\"><span id=\"', \n\t\t\tthis.id, '_pc_v_', \n\t\t\t''+index, '\">', \n\t\t\t''+this.votecounts[index], \n\t\t\t'</span></td>',\n\t\t'</tr>'].join(''));\n\t},\n\n\n\tonrender: function() {\n\t\tvar o = [];\n\t\t\n\t\tif (this.running || this.ended || this.isPollOwner()) {\n\n\t\t\to.push(\n\t\t\t\tthis.topic ? this.topic : this.isPollOwner() ? 'Click \"enter topic\" to supply a topic for this space.' : '',\n\t\t\t\t'<hr/>',\n\t\t\t\t'<center>',\n\t\t\t\t\tthis.running ? 'The poll is open.' : \n\t\t\t\t\t\tthis.ended ? 'The poll has ended.' : \n\t\t\t\t\t\t\t'The poll has not started.',\n\t\t\t\t\t'<br/>',\n\t\t\t\t\t'<span id=\"', this.id, '_pc_timeleft\">&nbsp;</span>',\n\t\t\t\t'</center><hr/>');\n\n\t\t\tif (this.choices) {\n\t\t\t\to.push('<table>');\n\t\t\t\tfor (var c=0; c < this.choices.length; c++) {\n\t\t\t\t\to.push(this.formatChoice(c));\n\t\t\t\t}\n\t\t\t\to.push('</table>');\n\t\t\t}\n\t\t\telse o.push('There are no choices for the poll yet.  Click \"add choice\" to get started.');\n\t\t\to.push('<span style=\"align:right;\" id=\"', this.id, '_pc_total\"></span>');\n\t\t}\n\t\telse {\n\t\t\to.push('<br/><br/><center>The poll has not started.</center><br/><br/>');\n\t\t}\n\n\t\tif (this.isPollOwner()) {\n\t\t\tif (this.running) {\n\t\t\t\to.push('<hr/><center>',\n\t\t\t\t\t'<input type=\"submit\" value=\"end poll\"',\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).endPoll();\"/>',\n\t\t\t\t\t'</center>');\n\t\t\t} else {\n\t\t\t\to.push('<hr/><center>',\n\t\t\t\t\t'<input type=\"submit\" value=\"enter topic\"',\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).getTopic(true);\"/>',\n\t\t\t\t\t'&nbsp;',\n\t\t\t\t\t'<input type=\"submit\" value=\"add choice\"',\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).addChoice();\"/>');\n\t\t\t\tif (this.choices) o.push(\n\t\t\t\t\t'&nbsp;',\n\t\t\t\t\t'<input type=\"submit\" value=\"start poll\"',\n\t\t\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).startPoll();\"/>');\n\t\t\t\to.push('</center>');\n\t\t\t}\n\t\t}\n\t\tthis.setContentDiv(o.join(''));\n\t\tthis.postGrandTotal.defer(200, this);\n\t}\n});\nnote.show();\n</script>\nloading...", 
              "votespervoter": 1, 
              "votexpos": 276, 
              "voteyinc": 42, 
              "voteypos": 36, 
              "width": 250, 
              "xPos": 12, 
              "yPos": 36
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 88, 
              "imports": "/js-src/js-widgets/betasignup.js", 
              "notename": "Beta Signup", 
              "text": "<br/>\n<center><input type='submit' value='click here to sign up for the Note Soup interest list' \n\tonmousedown='javascript:document.location.href = \"mailto:beta@notesoup.net?\" + Ext.urlEncode({\n\t\t\tsubject: \"[beta] interest list signup request\",\n\t\t\tbody: \"I would like to sign up for the Note Soup beta waiting list and the general interest mailing list.\\n\\nHere are a few words about how I found out about Note Soup and why I want to participate in the Beta:\"\n\t\t});' />\n</center>\n<br/>\n", 
              "width": 250, 
              "xPos": 950, 
              "yPos": 36
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 73, 
              "imports": "/js-src/js-widgets/graphy.js", 
              "notename": "Graphy", 
              "text": "<script type='text/javascript'>\n/**\n*\tgraphy.js - Note Soup graph paper widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nnote.set({\n\n\n\tdrawGraphPaper: function(xmin, ymin, xmax, ymax, bcolor, xminor, yminor, cminor, xsemi, ysemi, csemi, xmajor, ymajor, cmajor) {\n\n\t\tvar ink = $n('Ink');\n\t\tink.think('Some graph paper would be nice...');\n\t\tif (bcolor) ink.sendself('clearRect', xmin, xmax, ymin, ymax, bcolor);\n\t\tif (xminor) for (var x = xmin; x <= xmax; x += xminor) ink.sendself('drawline', x, ymin, x, ymax, cminor, .5);\n\t\tif (yminor) for (var y = ymin; y <= ymax; y += yminor) ink.sendself('drawline', xmin, y, xmax, y, cminor, .5);\n\n\t\tif (xsemi) for (var x = xmin; x <= xmax; x += xsemi) ink.sendself('drawline', x, ymin, x, ymax, csemi, 1);\n\t\tif (ysemi) for (var y = ymin; y <= ymax; y += ysemi) ink.sendself('drawline', xmin, y, xmax, y, csemi, 1);\n\n\t\tif (xmajor) for (var x = xmin; x <= xmax; x += xmajor) ink.sendself('drawline', x, ymin, x, ymax, cmajor, 2);\n\t\tif (ymajor) for (var y = ymin; y <= ymax; y += ymajor) ink.sendself('drawline', xmin, y, xmax, y, cmajor, 2);\n\n\t},\n\n\tdraw: function() {\n\n\t\tvar pagesize = {\n\t\t\twindowWidth: Ext.lib.Dom.getViewWidth(), \n\t\t\twindowHeight: Ext.lib.Dom.getViewHeight()\n\t\t};\n\t\tvar inch = 110;\n\t\tthis.drawGraphPaper(0,0, pagesize.windowWidth, pagesize.windowHeight, 'white', \n\t\t\tinch/10, inch/10, 'lightgreen', inch/2, inch/2,'palegreen', inch, inch, 'mediumspringgreen');\n\t}\n});\n</script>\n<center>\nClick to draw graph paper.<br/>\n<input type='submit' value='draw' onclick = 'notesoup.ui.getEnclosingNote(this).draw();'/>\n</center>", 
              "width": 250, 
              "xPos": 274, 
              "yPos": 96
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/calculator.js", 
              "notename": "Calculator", 
              "text": "<script type='text/javascript'>\n/**\n*\tcalculator.js - Note Soup calculator widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tinit: function() {\n\t\tthis.show();\n\t},\n\n\tontick: function() {\n\t\tif (this.getField('calculatorForm', 'autorecalc')) this.calc();\n\t},\n\t\n\tstart: function() {\n\t\tthis.setField('calculatorForm', 'autorecalc', true);\n\t},\n\n\tstop: function() {\n\t\tthis.setField('calculatorForm', 'autorecalc', false);\n\t},\n\n\tcalc: function() {\n\t\tthis.formula = this.getField('calculatorForm', 'formula');\n\t\tthis.autorecalc = this.getField('calculatorForm', 'autorecalc');\n\t\tthis.value = null;\n\t\ttry {\n\t\t\tthis.value = eval(this.formula);\n\t\t} catch (e) {\n\t\t\tthis.value = 'ERROR: ' + e;\n\t\t}\n\t\tthis.setField('calculatorForm', 'value', this.value);\n\t\treturn this.value;\n\t},\n\t\n\tsaveForm: function() {\n\t\tthis.formula = this.getField('calculatorForm', 'formula');\n\t\tthis.autorecalc = this.getField('calculatorForm', 'autorecalc');\n\t\tthis.save();\n\t},\n\n\tgetvalue: function() {\n\t\treturn this.value;\n\t},\n\n\tsetvalue: function(newformula) {\n\t\tthis.formula = newformula;\n\t\treturn this.calc();\n\t},\n\t\n\n\tonrender: function() {\n\n\t\tvar calculatorForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: (this.formula && (this.formula.length > 40)) ? 'textarea' : 'textfield',\n\t\t\t\tfieldLabel: 'Formula',\n\t\t\t\tid: this.getFieldID('formula'),\n\t\t\t\tvalue: this.formula || '',\n\t\t\t\twidth: this.width - 36 - 86,\n\t\t\t\theight: (this.formula && (this.formula.length > 40)) ? Math.max(48, this.height - 85) : null\n\t\t\t},{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Value',\n\t\t\t\tid: this.getFieldID('value'),\n\t\t\t\tvalue: this.value || '',\n\t\t\t\twidth: this.width - 36 - 86\n\t\t\t},{\n\t\t\t\txtype: 'checkbox',\n\t\t\t\tfieldLabel: 'Auto recalc',\n\t\t\t\tid: this.getFieldID('autorecalc'),\n\t\t\t\tchecked: this.autorecalc\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Calc',\n\t\t\t\thandler: this.calc,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Save', \n\t\t\t\thandler: this.saveForm,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.calc,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tthis.setContentDiv('<br/>');\n\t\tcalculatorForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('calculatorForm', calculatorForm);\n\n\t\tExt.get(this.getFieldID('formula')).on('focus', this.stop, this);\n\t\tExt.get(this.getFieldID('value')).on('focus', this.stop, this);\n\t}\n});\nnote.init();\n</script>", 
              "width": 250, 
              "xPos": 798, 
              "yPos": 276
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/message.js", 
              "notename": "Message", 
              "text": "<script type='text/javascript'>\n/**\n*\tmessage.js - Note Soup message widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tsendit: function() {\n\t\tif (!notesoup.loggedin) {\n\t\t\tnotesoup.say('You must be logged in to do that.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tvar tofolder = '';\n\t\tif (this.replyto) tofolder = this.replyto;\n\t\telse {\n\t\t\tvar to = prompt('Send to:', '');\n\t\t\tif (!to) return;\n\t\t\tvar parts = to.split('/');\n\t\t\tif (parts.length == 1) tofolder = to + '/inbox';\n\t\t\telse if (parts.length == 2) tofolder = to;\n\t\t\telse {\n\t\t\t\tnotesoup.say('Address error.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Build a message note to save in the destination\t\t\n\t\tvar thenote = this.cleanNote();\n\t\tdelete thenote.zIndex;\n\n\t\tvar msg = notesoup.username + ': ' + this.getField('messageForm', 'msg');\n\n\t\tif (!thenote.msglog) thenote.msglog = [];\n\t\tthenote.msglog.push(msg);\n\n\t\tif (this.sendCount) {\n\t\t\tthenote.notename = 'Reply from ' + notesoup.username;\n\t\t\tthenote.sendCount++;\n\t\t}\n\t\telse {\n\t\t\tthenote.notename = 'Message from ' + notesoup.username;\n\t\t\tthenote.sendCount = 1;\n\t\t}\n\t\tthenote.replyto = notesoup.foldername;\n\n\t\tnotesoup.postRequest({\n\t\t\tmethod:\"savenote\",\n\t\t\tparams:{\n\t\t\t\tnote: thenote,\n\t\t\t\ttofolder: tofolder,\n\t\t\t\tnotifyfolder:notesoup.foldername\n\t\t\t}},{\n\t\t\tsuccessProc: this.sendCount ? this.quietDelete.createDelegate(this) : this.resetForm.createDelegate(this),\n\t\t\trequestMessage: 'Sending message...',\n\t\t\tfailureMessage: 'Could not deliver the message.  Confirm you have sender rights to the destination.'\n\t\t});\n\t},\n\n\n\tresetForm: function() {\n\t\tthis.setField('messageForm', 'msg', '');\n\t\tnotesoup.say('Message sent.');\n\t},\n\n\n\tquietDelete: function() {\n\t\tnotesoup.postRequest({\n\t\t\tmethod:\"sendnote\",\n\t\t\tparams:{\n\t\t\t\tnoteid: this.id,\n\t\t\t\tfromfolder: notesoup.foldername,\n\t\t\t\ttofolder: notesoup.username + '/trash',\n\t\t\t\tnotifyfolder: notesoup.foldername,\n\t\t\t\tdeleteoriginal: true\n\t\t\t}},{\n\t\t\trequestMessage: 'Message sent.'\n\t\t});\n\t},\n\n\n\tonrender: function() {\n\n\t\tvar messageForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\tlabelalign: 'top',\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: ('sendCount' in this) && (this.sendCount > 1) ? 'Reply' : 'Message',\n\t\t\t\tname: 'msg',\n\t\t\t\tid: this.getFieldID('msg'),\n\t\t\t\twidth: this.width - 36 - 86\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Send',\n\t\t\t\thandler: this.sendit,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Done',\n\t\t\t\thandler: this.destroy,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.sendit,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tvar o = [];\n\t\tif (this.msglog) {\n\t\t\tvar m = [];\n\t\t\tfor (var i=0; i < this.msglog.length; i++) m.push(this.msglog[i]);\n\t\t\to.push('<br/>');\n\t\t\to.push(m.reverse().join('<hr/>'));\n\t\t\to.push('<hr/>');\n\t\t}\n\t\to.push('<br/>');\n\t\tthis.setContentDiv(o.join(''));\n\t\tmessageForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('messageForm', messageForm);\n\t}\n});\nnote.show();\n</script>", 
              "width": 250, 
              "xPos": 536, 
              "yPos": 36
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 40, 
              "heightOffset": 70, 
              "imagecountdown": 6, 
              "imagedisplaytime": 6, 
              "imageroot": "http://notesoup.net/images/UII_Icons/24x24/", 
              "imports": "/js-src/js-widgets/porthole.js", 
              "isPortableHole": true, 
              "minHeight": 80, 
              "minWidth": 250, 
              "nextimage": "forward.png", 
              "notename": "Portable Hole", 
              "openfolderimage": "open.png", 
              "pauseimage": "pause.png", 
              "previmage": "backward.png", 
              "random": false, 
              "refreshimage": "refresh.png", 
              "settingsimage": "configuration.png", 
              "snapshotimage": "digital_camera.png", 
              "startimage": "play.png", 
              "text": "<script type='text/javascript'>\n/**\n*\tporthole.js - Note Soup portable hole widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tisPortableHole: true,\n\trandom: false,\n\n\tinit: function() {\n\t\tif (this.viewfolder) this.refreshNoteList();\n\t\telse if (this.feedurl) this.getFeed();\n\t\tthis.show();\n\t\tthis.updateControls();\n\t},\n\n\n\trefreshNoteList: function() {\n\t\tif (this.viewfolder) {\n\t\t\tdelete this.running;\n\t\t\tdelete this.targetnoteid;\n\t\t\tdelete this.targetnote;\n\t\t\tdelete this.notes;\n\t\t\tdelete this.noteidlist;\n\n\t\t\tnotesoup.postRequest({\n\t\t\t\tmethod:\"gettemplatelist\",\n\t\t\t\tparams:{\n\t\t\t\t\tfromfolder: this.viewfolder\n\t\t\t}},{\n\t\t\t\t//requestMessage: 'Fetching note list from ' + this.viewfolder + '...',\n\t\t\t\t//successMessage: 'Fetch complete.',\n\t\t\t\tsuccessProc:\tthis.handleNoteListUpdate,\n\t\t\t\tsuccessProcScope: this,\n\t\t\t\tfailureMessage: 'Failure fetching note list from ' + this.viewfolder\n\t\t\t});\n\t\t\tthis.showLoading();\n\t\t}\n\t},\n\n\n\t/**\n\t*\tnotelist:\n\t*\t[0]: foldername like charlie/inbox\n\t*\t[1]: noteid like noteN003kkrOI\n\t*\t[2]: notename like shopping list\n\t*/\n\thandleNoteListUpdate: function(response, options) {\n\t\tthis.setContentDiv('');\t// kill the loading indicator\n\t\tvar response = Ext.util.JSON.decode(response.responseText);\n\n\t\tif (response['error']) {\n\t\t\tnotesoup.say('Could not fetch note list.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tvar notelist = response.command[0][1];\n\n\t\tthis.noteidlist = [];\n\t\tfor (var i=0; i < notelist.length; i++) {\n\t\t\tif (notelist[i][1].indexOf('.') < 0) {\n\t\t\t\tthis.noteidlist.push(notelist[i][1]);\n\t\t\t}\n\t\t}\n\t\t//notesoup.say('Note id list: ' + notesoup.dump(this.noteidlist));\n\t\tif (this.random) this.randomNote();\n\t\telse this.firstNote();\n\t\tthis.running = true;\n\t},\n\n\n\n\t/**\n\t*\tFetch an RSS feed via the server\n\t*/\n\tgetFeed: function() {\n\t\tExt.Ajax.request({\n\t\t\tmethod: 'GET',\n\t\t\turl: '/getfeed',\n\t\t\tparams: {url: 'http' + this.feedurl.substr(4)},\n\t\t\tdisableCaching: false,\n\t\t\tsuccess: this.getFeedHandler,\n\t\t\tscope: this\n\t\t});\n\t\t//notesoup.say('Feed request sent...');\n\t\tthis.showLoading.createDelegate(this).defer(10);\n\t},\n\t\n\t\n\t/**\n\t*\tFormat and display the specified rss feed item.\n\t*\t@param {number} entry\tthe index of the entry in feed[entries]\n\t*/\n\tnoteFromRSSEntry: function(entry) {\n\t\tvar text = [];\n\t\ttext.push(\n\t\t\t'<b>', entry.title, ': </b>',\n\t\t\tentry.summary,\n\t\t\t'<a href=\"', entry.link, '\" target=\"_blank\">',\n\t\t\t'<img src=\"', notesoup.imageHost, 'images/famfamfam.com/link.png\"></a>',\n\t\t\tentry.updated ? '<hr/><h5>Updated: ' + entry.updated + '</h5>' : '');\n\n\t\treturn {\n\t\t\tnotename: this.feedname || 'RSS Hole',\n\t\t\ttext: text.join(''),\n\t\t\tid: 'feed' + notesoup.randomName(10),\n\t\t\tbgcolor: notesoup.ui.defaultNoteColor\n\t\t};\n\t},\n\t\n\t\n\t/**\n\t*\tHandler for getfeed: process incoming feed data.\n\t*\t@param {object} response\tthe response object\n\t*\t@param {boolean} success\ttrue if we got a feed back\n\t*/\n\tgetFeedHandler: function(response, success) {\n\t\tif (success) {\n\t\t\tthis.setContentDiv('Feed data received.');\n\t\t\tvar feed = Ext.util.JSON.decode(response.responseText);\n\t\t\tif (feed.bozo) {\n\t\t\t\tthis.setContentDiv('Server reports a format error in feed data.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.feedname = feed.feed.title || this.notename || '';\n\t\t\tthis.notes = {};\n\t\t\tthis.noteidlist = [];\n\t\t\tfor (var entry=0; entry < feed.entries.length; entry++) {\n\t\t\t\tvar thenote = this.noteFromRSSEntry(feed.entries[entry]);\n\t\t\t\tthis.notes[thenote.id] = thenote;\n\t\t\t\tthis.noteidlist.push(thenote.id);\n\t\t\t}\n\t\t\tthis.setContentDiv('');\n\t\t\t\n\t\t\tif (this.random) this.randomNote();\n\t\t\telse this.firstNote();\n\t\t\tthis.running = true;\n\t\t} \n\t\telse this.setContentDiv('Unable to fetch feed.');\n\t},\n\n\n\n\n\thandleNotePick: function(combo, record, index) {\n\t\tthis.cleanupGuests();\n\t\tif (index < 0) index = this.noteidlist.length - 1;\n\t\tif (index > this.noteidlist.length-1) index = 0;\n\t\tthis.targetnoteindex = index;\n\t\tthis.targetnoteid = this.noteidlist[this.targetnoteindex];\n\t\t\n\t\tif (this.notes && (this.targetnoteid in this.notes)) {\n\t\t\tthis.targetnote = this.notes[this.targetnoteid];\n\t\t\tthis.settimer();\n\t\t\tthis.show();\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tnotesoup.postRequest({\n\t\t\tmethod:\"getnote\",\n\t\t\tparams:{\n\t\t\t\tfromfolder: this.viewfolder,\n\t\t\t\tnoteid: this.targetnoteid\n\t\t\t}\n\t\t},{\n\t\t\t//requestMessage: 'Fetching note...',\n\t\t\tsuccessProc: this.getNoteHandler,\n\t\t\tsuccessProcScope: this,\n\t\t\tfailureMessage: 'Could not fetch note: ' + this.targetnoteid\n\t\t});\n\t},\n\n\n\tgetNoteHandler: function(response, options) {\n\t\t//notesoup.say('Fetch complete.');\n\t\t//notesoup.say(response.responseText);\n\t\tvar response = Ext.util.JSON.decode(response.responseText);\n\n\t\tif (response['error']) {\n\t\t\tthis.targetnote = {\n\t\t\t\tnotename: 'Error',\n\t\t\t\ttext: '<br/><br/><center>Error fetching note: ' + response.error + '</center></br></br>',\n\t\t\t\tbgcolor: 'red'\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tthis.targetnote = response.command[0][1];\n\t\t\tthis.settimer();\n\t\t}\n\t\t//notesoup.say('GETNOTEHANDLER: ' + notesoup.dump(this.targetnote));\n\t\tthis.show();\n\t},\n\n\n\t// player control panel\n\timageroot: \t\tnotesoup.imageHost + 'images/UII_Icons/24x24/',\n\tprevimage: \t\t'backward.png',\n\tstartimage: \t'play.png',\n\tpauseimage: \t'pause.png',\n\tnextimage:\t\t'forward.png',\n\trefreshimage: \t'refresh.png',\n\topenfolderimage:'open.png',\n\tsettingsimage:\t'configuration.png',\n\tsnapshotimage: \t'digital_camera.png',\n\n\timagedisplaytime: 6,\n\timagecountdown: 6,\n\n\tsettimer: function() {\n\t\tthis.imagecountdown = this.imagedisplaytime;\n\t},\n\n\tontick: function() {\n\t\tif (this.running) {\n\t\t\t//notesoup.say('countdown: ' + this.imagecountdown + typeof(this.imagecountdown));\n\t\t\tif (--this.imagecountdown <= 0) {\n\t\t\t\tthis.settimer();\n\t\t\t\t//if (this.random) this.randomNote.defer(Math.random() * 2000, this);\n\t\t\t\t//else this.nextNote.defer(Math.floor(Math.random() * 2000), this);\n\t\t\t\tif (this.random) this.randomNote();\n\t\t\t\telse this.nextNote();\n\t\t\t}\n\t\t}\n\t},\n\n\tfirstNote: function() {\n\t\tthis.handleNotePick(null, null, 0);\n\t},\n\n\tprevNote: function() {\n\t\tthis.handleNotePick(null, null, this.targetnoteindex-1);\n\t},\n\n\tnextNote: function() {\n\t\tthis.handleNotePick(null, null, this.targetnoteindex+1);\n\t},\n\t\n\trandomNote: function() {\n\t\tthis.handleNotePick(null, null, Math.floor(Math.random() * this.noteidlist.length));\n\t},\n\t\n\tpause: function() {\n\t\tnotesoup.say('Stopped.');\n\t\tdelete this.running;\n\t\tthis.updateControls();\n\t},\n\n\tstart: function() {\n\t\tnotesoup.say('Starting...');\n\t\tthis.running = true;\n\t\tthis.updateControls();\n\t},\n\t\n\topenfolder: function() {\n\t\tif (this.viewfolder)\n\t\t\tnotesoup.openFolder(this.viewfolder);\n\t},\n\t\n\tsettings: function() {\n\t\tvar f = notesoup.prompt('Enter the folder to view, or an RSS feed URL:', this.viewfolder || this.feedurl || notesoup.foldername);\n\t\tif (!f) return;\n\n\t\tif (f.substring(0,7) == 'feed://') {\n\t\t\tthis.feedurl = f;\n\t\t\tdelete this.viewfolder;\n\t\t\tthis.save();\n\t\t\tthis.getFeed();\n\t\t}\n\t\telse {\n\t\t\tthis.viewfolder = f;\n\t\t\tdelete this.feedurl;\n\t\t\tthis.save();\n\t\t\tthis.refreshNoteList();\n\t\t}\n\t},\n\n\tclone: function(obj) {\n\t\tvar theclone = {};\n\t\tfor (var o in obj) theclone[o] = obj[o];\n\t\treturn theclone;\n\t},\n\n\tsnapshot: function() {\n\t\tvar newnote = this.clone(this.targetnote);\n\t\tdelete newnote.id;\n\t\tdelete newnote.homediv;\n\t\tdelete newnote.xPos;\n\t\tdelete newnote.yPos;\n\t\tdelete newnote.zIndex;\n\t\tdelete newnote.isGuest;\n\t\tnotesoup.saveNote(newnote, notesoup.foldername);\n\t},\n\n\tmakeButton: function(img, handler) {\n\t\treturn ['<img src=\"', this.imageroot, img, '\"',\n\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).', handler, '();\"/>'].join('');\n\t},\n\n\trenderControls: function() {\n\t\tvar o = [];\n\t\to.push('<center>');\n\t\to.push(this.makeButton(this.settingsimage, 'settings'));\n\t\tif (this.noteidlist) {\n\t\t\to.push(this.makeButton(this.previmage, 'prevNote'));\n\n\t\t\tif (this.running) o.push(this.makeButton(this.pauseimage, 'pause'));\n\t\t\telse o.push(this.makeButton(this.startimage, 'start'));\n\n\t\t\to.push(this.makeButton(this.nextimage, 'nextNote'));\n\t\t\to.push(this.makeButton(this.snapshotimage, 'snapshot'));\n\t\t}\n\t\tif (this.viewfolder)\n\t\t\to.push(this.makeButton(this.openfolderimage, 'openfolder'));\n\t\to.push('</center>');\n\t\treturn o.join('');\n\t},\n\n\tupdateControls: function() {\n\t\tvar elt = Ext.get(this.id + '_title');\n\t\tif (elt) elt.update([\n\t\t\t//this.notename ? this.notename + '<hr/>' : '',\n\t\t\tthis.renderControls()\n\t\t].join(''));\n\t},\n\t\n\tguestNoteName: function() {\n\t\tfor (var i=0; i < 10000; i++) {\n\t\t\tvar name = 'guest' + notesoup.randomName(10);\n\t\t\tif (!$(name)) return name;\n\t\t}\n\t\tnotesoup.say('oops guestname');\n\t},\n\t\n\tcleanupGuests: function() {\n\t\tif (this.guestnotes) {\n\t\t\twhile (this.guestnotes.length > 0) {\n\t\t\t\tvar noteid = this.guestnotes.pop();\n\t\t\t\tif (noteid in notesoup.notes) {\n\t\t\t\t\tif (notesoup.notes[noteid].isPortableHole)\n\t\t\t\t\t\tnotesoup.notes[noteid].cleanupGuests();\n\t\t\t\t\tnotesoup.destroyNote(noteid);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (notesoup.debugLevel > 4)\n\t\t\t\t\t\tnotesoup.say('Guest already left: ' + noteid);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\txoffset: 14,\n\tyoffset: 38,\n\n\tonrender: function() {\n\t\tvar o = [];\n\t\tvar portHoleCover = {\n\t\t\tnotename: this.renderControls(),\t\t//'Portable Hole',\n\t\t\ttext:[ '<br/><center>',\n\t\t\t\t'<img src=\"http://notesoup.net/images/UII_Icons/80x80/smiley.png\" align=\"center\" />',\n\t\t\t\t'</center><br/>'].join(''),\n\t\t\tbgcolor: '#ffffff'\n\t\t};\n\t\tif (this.targetnote) {\n\t\t\tthis.cleanupGuests();\n\t\t\n\t\t\t//var guestnote = this.clone(this.targetnote.isPortableHole ? portHoleCover : this.targetnote);\n\t\t\tvar guestnote = {};\n\t\t\tif (this.targetnote.isPortableHole && (this.viewfolder == notesoup.foldername) &&\n\t\t\t\t(this.targetnote.id == this.id)) guestnote = this.clone(portHoleCover);\n\t\t\telse guestnote = this.clone(this.targetnote);\t\n\t\n\t\t\tguestnote.id = 'guest' + notesoup.randomName(10);\n\t\t\tguestnote.isGuest = true;\n\t\t\tguestnote.homediv = this.id + notesoup.ui.contentSuffix;\n\n\t\t\tguestnote.xPos = this.xPos + this.xoffset;\n\t\t\tguestnote.yPos = this.yPos + this.yoffset;\n\t\t\t//guestnote.xPos = Ext.get(guestnote.homediv).getX();\n\t\t\t//guestnote.yPos = Ext.get(guestnote.homediv).getY();\n\n\t\t\tguestnote.zIndex = this.zIndex + 1;\n\t\t\tnotesoup.updateNote(guestnote);\n\t\t\tif (!this.guestnotes) this.guestnotes = [];\n\t\t\tthis.guestnotes.push(guestnote.id);\n\t\t\tthis.guestnoteid = guestnote.id;\n\t\t}\n\t\tthis.updateControls();\n\t},\n\t\n\n\twidthOffset: 28,\n\theightOffset: 70,\t\t//92,\n\tminWidth: 250,\n\tminHeight: 80,\n\n\tsyncHeight: function() {\n\n\t\tif (!this.targetnote) return soupnote.prototype.syncHeight.apply(this);\n\t\tvar guestdiv = Ext.get(this.guestnoteid + notesoup.ui.divSuffix);\n\t\tif (!guestdiv) {\n\t\t\t//notesoup.say('Could not fetch guest div.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tvar guestsize = guestdiv.getSize();\n\t\tguestsize.width = Math.max(guestsize.width || 0, this.minWidth);\n\t\tguestsize.height = Math.max(guestsize.height || 0, this.minHeight);\n\t\t//notesoup.say('Adjusting to guest size: ' + guestsize.width + ' ' + guestsize.height);\n\n\t\tvar outerDiv = Ext.get(this.id + notesoup.ui.divSuffix);\n\t\tvar noteDiv = Ext.get(this.id);\n\t\tvar contentDiv = Ext.get(this.id + notesoup.ui.contentSuffix);\n\t\tif (!outerDiv || !contentDiv) {\n\t\t\tnotesoup.say('No outer DIV or no content DIV.', 'error');\n\t\t}\n\t\tcontentDiv.setSize(guestsize.width || notesoup.defaultNoteWidth, guestsize.height || notesoup.defaultNoteHeight, true);\n\t\tnoteDiv.setSize(guestsize.width + this.widthOffset, guestsize.height + this.heightOffset, true);\n\t\touterDiv.setSize(guestsize.width + this.widthOffset, guestsize.height + this.heightOffset, true);\n\t}\n});\nnote.init();\n</script>", 
              "width": 250, 
              "widthOffset": 28, 
              "xPos": 12, 
              "xoffset": 14, 
              "yPos": 156, 
              "yoffset": 38
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/clock.js", 
              "notename": "Clock", 
              "text": "<script type='text/javascript'>\n/**\n*\tclock.js - Note Soup clock widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tontick: function() {\n\t\tthis.setContentDiv([\n\t\t\t'<h2><center>',\n\t\t\t\tnotesoup.timeStamp('','time'),\n\t\t\t'</h2></center>'].join(''));\n\t}\n});\n</script>", 
              "width": 250, 
              "xPos": 274, 
              "yPos": 216
            }, 
            {
              "backZ": 0, 
              "bgcolor": "#ccffcc", 
              "canvasname": "backdrop", 
              "chalky": false, 
              "color": "black", 
              "from": "system in system/widgets", 
              "frontZ": 30000, 
              "height": 103, 
              "imports": "/js-src/js-widgets/ink.js", 
              "linewidth": 3, 
              "notename": "Ink", 
              "text": "<script type='text/javascript'>\n/**\n*\tink.js - Note Soup ink widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tchalky: false,\n\tlinewidth: 3,\n\tcolor: 'black',\n\tyoffset: 45,\n\n\tinit: function(canvasname) {\n\t\tif (canvasname) this.canvasname = canvasname;\n\t\telse this.canvasname = 'backdrop';\n\t\t\n\t\tif (this.chalky) {\n\t\t\tthis.color = 'white';\n\t\t\tthis.linewidth = 4;\n\t\t}\n\t\n\t\tvar canvas = document.getElementById(this.canvasname);\n\t\tvar ctx = canvas.getContext('2d');\n\t\tif (ctx) {\n\t\t\tnotesoup.say('Ink here!');\n\t\t\tthis.setEphemeral('ctx', ctx);\n\t\t}\n\t\telse {\n\t\t\tnotesoup.say('Ink: load failed: sorry, failed to get ctx.', 'error');\n\t\t\treturn;\n\t\t}\n\n\t\t//this.yoffset = Ext.get(this.canvasname).getTop();\n\t\tExt.get(this.canvasname).on('mousedown', this.startsegment, this);\n\t\tExt.get(this.canvasname).on('mousemove', this.updatesegment, this);\n\t\tExt.get(this.canvasname).on('mouseup', this.endsegment, this);\n\t},\n\n\tgetctx: function() {\n\t\treturn this.getEphemeral('ctx');\n\t},\n\n\tplay: function(sounduri) {\n\t\tnotesoup.sound.play(sounduri);\n\t},\n\n\tstartsegment: function(e) {\n\t\tthis.lastx = e.getPageX();\n\t\tthis.lasty = e.getPageY() - this.yoffset;\n\t\tthis.pendown = true;\n\t\tif (this.chalky) this.sendself('play', '/sound/43548__richymel__tiza.mp3');\n\t\tif (this.zIndex != this.frontZ) this.sendself('canvasfront');\n\t},\n\n\tendsegment: function(e) {\n\t\tdelete this.pendown;\n\t\tnotesoup.sound.stop();\n\t\tif (this.zIndex != this.backZ) this.sendself('canvasback');\n\t},\n\n\tfrontZ: 30000,\n\tbackZ: 0,\n\tsetZ: function(z) {\n\t\tthis.zIndex = z;\n\t\tvar container = Ext.get(this.canvasname);\n\t\tif (container) {\n\t\t\tcontainer.setStyle({position: 'absolute', zIndex: this.zIndex});\n\t\t}\n\t},\n\tcanvasfront: function() { this.setZ(this.frontZ); },\n\tcanvasback: function() { this.setZ(this.backZ); },\n\n\tupdatesegment: function(e) {\n\t\tif (!this.pendown) return;\n\n\t\tvar x = e.getPageX();\n\t\tvar y = e.getPageY() - this.yoffset;\n\t\tif ((x == this.lastx) && (y == this.lasty)) return;\n\t\t\n\t\tvar color = (notesoup.ui.defaultNoteColor == '#FFFF99') ? this.color : notesoup.ui.defaultNoteColor;\n\n\t\tthis.sendself('drawline', this.lastx, this.lasty, x, y, color, this.linewidth);\n\n\t\tthis.lastx = x;\n\t\tthis.lasty = y;\n\n\t},\n\t\n\tdrawline: function(x1, y1, x2, y2, color, linewidth) {\n\t\tthis.getctx().beginPath();\n\t\tthis.getctx().strokeStyle = color || this.color;\n\t\tthis.getctx().lineWidth = linewidth || this.linewidth;\n\t\tthis.getctx().moveTo(x1, y1);\n\t\tthis.getctx().lineTo(x2, y2);\n\t\tthis.getctx().stroke();\n\t},\n\t\n\tmoveTo: function(x, y) { this.getctx().moveTo(x, y); },\n\tlineTo: function(x, y) { this.getctx().lineTo(x, y); },\n\tbeginPath: function() { this.getctx().beginPath(); },\n\tclosePath: function() { this.getctx().closePath(); },\n\tfillStyle: function(s) { this.getctx().fillStyle = s; },\n\tfill: function() { this.getctx().fill(); },\n\tstrokeStyle: function(s) { this.getctx().strokeStyle = s; },\n\tstroke: function() { this.getctx().stroke(); },\n\tfillRect: function(x, y, width, height) { this.getctx().fillRect(x, y, width, height); },\n\tstrokeRect: function(x, y, width, height) { this.getctx().strokeRect(x, y, width, height); },\n\tclearRect: function(x, y, width, height) { this.getctx().clearRect(x, y, width, height); },\n\tclear: function() { this.getctx().clearRect(0, 0, 1200, 800); },\n\tarc: function(x, y, radius, startAngle, endAngle, ccw) { this.getctx().arc(x, y, radius, startAngle, endAngle, ccw); },\n\trect: function(x, y, width, height) { this.getctx().rect(x, y, width, height); },\n\tquadraticCurveTo: function(cp1x, cp1y, x, y) { this.getctx().quadraticCurveTo(cp1x, cp1y, x, y); },\n\tbezierCurveTo: function(cp1x, cp1y, cp2x, cp2y, x, y) { this.getctx().bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y); },\n\n\tdrawImage: function(image, x, y, width, height) { this.getctx().drawImage(image, x, y, width, height); },\n\n\tfillCircle: function(x, y, radius, color) {\n\t\tthis.getctx().beginPath();\n\t\tthis.getctx().fillStyle = color || this.color;\n\t\tthis.getctx().arc(x, y, radius, 0, 2*Math.PI, true);\n\t\tthis.getctx().fill();\n\t},\n\n\n/*****\nimage can be:\n1. http:blah\n2. data: blah\n3. an element or element id\nfunction draw() {\n  var ctx = document.getElementById('canvas').getContext('2d');\n\n  // create new image object to use as pattern\n  var img = new Image();\n  img.src = 'images/wallpaper.png';\n  img.onload = function(){\n\n    // create pattern\n    var ptrn = ctx.createPattern(img,'repeat');\n    ctx.fillStyle = ptrn;\n    ctx.fillRect(0,0,150,150);\n\n  }\n}\n      \nvar img = new Image();   // Create new Image object\nimg.src = 'myImage.png'; // Set source path\nWhen this script gets executed, the image starts loading. If loading isn't finished when a drawImage statement gets executed, the script halts until the image is finished loading. If you don't want this to happen, use an onload event handler:\nvar img = new Image();   // Create new Image object\nimg.onload = function(){\n  // execute drawImage statements here\n}\nimg.src = 'myImage.png'; // Set source path\n*****/\n\n\tglobalAlpha: function(alpha) { this.getctx.globalAlpha = alpha; },\n\n\tsnapshot: function() {\n\t\tvar canvas = document.getElementById(this.canvasname);\n\t\tif (!canvas || !canvas.toDataURL) {\n\t\t\tnotesoup.say('Sorry, this browser does not support snapshots.  Firefox is known to work.', 'warning');\n\t\t\treturn;\n\t\t}\n\t\tvar thenote = {\n\t\t\tnotename: 'Snapshot',\n\t\t\t//noframe: true,\n\t\t\tnotetype: 'proxy',\n\t\t\tbgcolor: this.bgcolor,\n\t\t\twidth: this.canvaswidth,\n\t\t\theight: this.canvasheight,\n\t\t\tproxyfor: canvas.toDataURL()\n\t\t};\n\t\tnotesoup.saveNote(thenote, notesoup.foldername);\n\t},\n\n\tclearButton: function() {\n\t\tthis.sendself('clear');\n\t}\n});\nnote.init();\n</script>\n<center>\nInk widget is here!<br/>\nClick to draw on the desktop.<br/>\nToolbar sets color.<br/>\n<center>\n<input type='submit' value='clear' onclick = 'notesoup.ui.getEnclosingNote(this).clearButton();'/>\n<input type='submit' value='snapshot' onclick = 'notesoup.ui.getEnclosingNote(this).snapshot();'/>\n</center>\n", 
              "width": 250, 
              "xPos": 798, 
              "yPos": 156, 
              "yoffset": 45
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 55, 
              "imports": "/js-src/js-widgets/uploadForm.js", 
              "notename": "File Upload", 
              "text": "<script type='text/javascript'>\n/**\n*\tuploadForm.js - Note Soup file upload widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\thandleResponse: function(elt, success, response) {\n\t\t//notesoup.say('Upload status: ' + elt.id + ' ' + success + ' ' + response.responseText);\n\t\tthis.setContentDiv(response.responseText);\n\t\tthis.show.createDelegate(this).defer(3000);\n\t\tnotesoup.sendSync();\n\t},\n\n\tsubmitForm: function() {\n\t\tvar form = this.getEphemeral('uploadForm').getForm();\n\t\tif (form) {\n\t\t\tvar el = form.el.dom;\n\t\t\tif (el) {\n\t\t\t\tel.setAttribute('enctype', 'multipart/form-data');\n\t\t\t\ttry {\n\t\t\t\t\tformManager = new Ext.UpdateManager(el);\n\t\t\t\t\tformManager.formUpdate(el, '/upload', true, this.handleResponse.createDelegate(this));\n\t\t\t\t\tthis.showLoading();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tnotesoup.say('form submission error: ' + notesoup.dump(e));\n\t\t\t\t}\n\t\t\t}\n\t\t}\t\t\t\t\n\t},\n\n\tonrender: function() {\n\n\t\tvar uploadForm = new Ext.FormPanel({\n\n\t\t\tlabelAlign: 'right',\n\t\t\tfileUpload: true,\n\t\t\tlabelWidth: 75,\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tid: this.getFieldID('thefile'),\n\t\t\t\tallowBlank: false,\n\t\t\t\tinputType: 'file',\n\t\t\t\tname: 'thefile',\n\t\t\t\tfieldLabel: 'File to upload',\n\t\t\t\twidth: 300\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Upload',\n\t\t\t\thandler: this.submitForm,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Done', \n\t\t\t\thandler: this.destroy,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.submitForm,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\tthis.setContentDiv('<br/>');\n\t\tuploadForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('uploadForm', uploadForm);\n\t}\n});\nnote.show();\n</script>\nLoading...", 
              "width": 250, 
              "xPos": 798, 
              "yPos": 216
            }, 
            {
              "allowAnonymous": false, 
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 55, 
              "imports": "/js-src/js-widgets/chat.js", 
              "notename": "Chat", 
              "text": "<script type='text/javascript'>\n/**\n*\tchat.js - Note Soup chat widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tallowAnonymous: false,\n\n\tchatSay: function() {\n\t\tvar user = notesoup.username;\n\t\tif (!notesoup.loggedin) {\n\t\t\tif (!this.allowAnonymous) {\n\t\t\t\tnotesoup.say('You must be logged in to chat.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuser = 'Anonymous';\n\t\t}\n\n\t\tvar utterance = this.getField('chatForm', 'chattext');\n\t\tif (utterance) {\n\t\t\tnotesoup.folderSay(utterance);\n\t\t\tif ($n('chat log')) {\n\t\t\t\t$n('chat log').append(user + ': ' + utterance + '<br/>');\n\t\t\t}\n\t\t\tthis.setField('chatForm', 'chattext', '');\n\t\t\tExt.get(this.id + '_chattext').focus(true);\n\t\t}\n\t},\n\n\tonrender: function() {\n\n\t\tvar chatForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 50, \n\t\t\tlabelalign: 'top',\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\n\t\t\titems: [{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Type here',\n\t\t\t\tid: this.getFieldID('chattext'),\n\t\t\t\tname: 'chattext',\n\t\t\t\tvalue: '',\n\t\t\t\twidth: 300\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'say it',\n\t\t\t\thandler: this.chatSay,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.chatSay,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/>';\n\t\tchatForm.render(thediv);\n\t\tthis.setEphemeral('chatForm', chatForm);\n\t\tExt.get(thediv).addKeyListener(13, this.chatSay, this);\n\t}\n});\nnote.show();\n</script>\nloading...", 
              "width": 250, 
              "xPos": 536, 
              "yPos": 96
            }, 
            {
              "backImage": "/images/cards_png/b1fv.png", 
              "bgcolor": "#ccffcc", 
              "buttons": [
                [
                  "1 up", 
                  "deal(1);"
                ], 
                [
                  "5 up", 
                  "deal(5);"
                ], 
                [
                  "shuffle", 
                  "shuffle();"
                ]
              ], 
              "cardcolumns": 7, 
              "cardgutter": 12, 
              "cardheight": 76, 
              "cardwidth": 130, 
              "cardxoffset": 150, 
              "cardyoffset": 50, 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/deck.js", 
              "notename": "Deck", 
              "ranks": [
                2, 
                3, 
                4, 
                5, 
                6, 
                7, 
                8, 
                9, 
                10, 
                "j", 
                "q", 
                "k", 
                "1"
              ], 
              "suits": [
                "s", 
                "h", 
                "d", 
                "c"
              ], 
              "text": "<script type='text/javascript'>\n/**\n*\tdeck.js - Note Soup playing card deck widget\n*\tCopyright 2007, 2008 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tbgcolor: '#008000',\n\n\tinit: function() {\n\t\tthis.show();\n\t\tthis.sendself.defer(1000, this, ['sync']);\n\t},\n\n\tbackImage: notesoup.imageHost + 'images/cards_png/b1fv.png',\t// or b2fv for red\n\tsuits: ['s','h','d','c'],\n\tranks: [2,3,4,5,6,7,8,9,10,'j','q','k','1'],\n\n\tcardxoffset: 150,\n\tcardyoffset: 50,\n\tcardwidth: 130,\n\tcardgutter: 12,\n\tcardheight: 76,\n\tcardcolumns: 7,\n\n\tmakecard: function() {\n\n\t\tvar x = this.cardxoffset + ((this.cardcount % this.cardcolumns) * (this.cardwidth + this.cardgutter));\n\t\tvar y = this.cardyoffset + Math.floor(this.cardcount / this.cardcolumns) * this.cardheight;\n\t\t//notesoup.say('Pos: ' + this.cardcount + ': ' + x + ' ' + y);\n\n\t\tvar thecard = this.getrandomcard();\n\t\tif (!thecard) return;\n\t\t \n\t\tvar cardnote = {\n\t\t\tid: 'card' + notesoup.randomName(20), \n\t\t\tmtime: notesoup.getServerTime(),\n\t\t\trank: thecard.rank,\n\t\t\tsuit: thecard.suit,\n\t\t\tdeckid: this.id,\n\t\t\tnosave: true,\n\t\t\twidth: this.cardwidth,\n\t\t\txPos: x,\n\t\t\tyPos: y,\n\t\t\tzIndex: 0,\n\t\t\tbgcolor: '#f9f9f9',\n\t\t\tnotetype: 'proxy',\n\t\t\tproxyfor: notesoup.imageHost + 'images/cards_png/' + this.suits[thecard.suit] + this.ranks[thecard.rank] + '.png',\n\t\t};\n\t\tthis.sendself('showcard', cardnote);\n\t},\n\n\tshowcard: function(thecard) {\n\t\tnotesoup.updateNote(thecard);\n\t},\n\n\tsnapcard: function() {\n\t\tnotesoup.sound.play('/sound/45813__themfish__draw_card.mp3');\n\t\t//\t\t19244__deathpie__cardDrop2.mp3');\n\t},\n\n\tdeletecard: function(cardid) {\n\t\tnotesoup.destroyNote(cardid);\n\t},\n\n\tdeal: function(howmany, showing) {\n\t\tthis.sendself('snapcard');\n\t\tthis.updatedealt();\n\t\twhile (howmany-- > 0) {\n\t\t\tthis.makecard(showing);\n\t\t}\n\t},\n\n\tshuffle: function() {\n\t\tnotesoup.sound.play('/sound/19245__deathpie__shuffle.mp3');\n\t\tthis.cards = {};\n\t\tfor (var n in notesoup.notes) {\n\t\t\tif (n == this.id) continue;\n\t\t\tif (notesoup.notes[n].deckid == this.id) {\n\t\t\t\t//notesoup.say(\"Deleting card \" + notesoup.notes[n].rank + ' ' + notesoup.notes[n].suit);\n\t\t\t\tthis.sendself('deletecard', n);\n\t\t\t}\n\t\t}\n\t},\n\t\n\tsync: function() {\n\t\tfor (var n in notesoup.notes) {\n\t\t\tif (n == this.id) continue;\n\t\t\tif (notesoup.notes[n].deckid == this.id) {\n\t\t\t\tthis.sendself('showcard', notesoup.notes[n]);\n\t\t\t}\n\t\t}\n\t},\n\n\tupdatedealt: function() {\n\t\tthis.dealt = [];\n\t\tthis.cardcount = 0;\n\n\t\tfor (var s=0; s < this.suits.length; s++) {\n\t\t\tthis.dealt[s] = [];\n\t\t\tfor (var r=0; r < this.ranks.length; r++) this.dealt[s][r] = false;\n\t\t}\n\n\t\tfor (var n in notesoup.notes) {\n\t\t\tif (notesoup.notes[n].deckid == this.id) {\n\t\t\t\tthis.cardcount++;\n\t\t\t\tthis.dealt[notesoup.notes[n].suit][notesoup.notes[n].rank] = true;\n\t\t\t}\n\t\t}\n\t\t//notesoup.say('Dealt: ' + this.cardcount);\n\t},\n\n\tgetrandomcard: function() {\n\t\tvar cardsleft = this.suits.length * this.ranks.length - this.cardcount;\n\t\tif (cardsleft <= 0) {\n\t\t\tnotesoup.say('No cards left to deal.  Shuffle to start again.', 'error');\n\t\t\treturn null;\n\t\t}\n\t\tvar cardpicked = this.random(cardsleft);\n\t\t//notesoup.say('Picked card ' + cardpicked + ' of ' + cardsleft);\n\n\t\tfor (var s=0; s < this.suits.length; s++) {\n\t\t\tfor (var r=0; r < this.ranks.length; r++) {\n\t\t\t\tif (this.dealt[s][r]) continue;\n\t\t\t\tif (--cardpicked < 0) {\n\t\t\t\t\tthis.dealt[s][r] = true;\n\t\t\t\t\tthis.cardcount++;\n\t\t\t\t\treturn {suit: s, rank: r};\n\t\t\t\t}\n\t\t\t\t//else notesoup.say('Skipping card ' + s + ' ' + r);\n\t\t\t}\n\t\t}\n\t\tnotesoup.say('oops dealbot broke');\n\t\treturn null;\n\t},\n\n\n\trandom: function(max) { return Math.floor(Math.random() * max); },\n\tpick: function(list) { return '' + list[Math.floor(Math.random() * list.length)]; },\n\tpicksuit: function() { return random(4); },\n\tpickrank: function() { return random(13); },\n\n\tbuttons: [\n\t\t['1 up', 'deal(1);'],\n\t\t//['1 down', 'deal(1, false);'],\n\t\t['5 up', 'deal(5);'],\n\t\t//['5 down', 'deal(5, false);'],\n\t\t['shuffle', 'shuffle();']\n\t],\n\n\tmakeButton: function(b) {\n\t\treturn [\n\t\t\t'<input type=\"submit\" value=\"', b[0], \n\t\t\t'\" onclick=\"{notesoup.ui.getEnclosingNote(this).', b[1], ';return false;}\" />'\n\t\t].join('');\n\t},\n\n\tmakeButtons: function() {\n\t\tvar o = [];\n\t\to.push('<center>');\n\t\tfor (var i=0; i < this.buttons.length; i++) {\n\t\t\to.push(this.makeButton(this.buttons[i]));\n\t\t}\n\t\to.push('</center>');\n\t\treturn o.join('');\n\t},\n\n\tonrender: function() {\n\t\tvar markup = [\n\t\t\t'<img style=\"width:100%;\" src=\"', this.backImage, '\"/>',\n\t\t\tthis.makeButtons()\n\t\t].join('');\n\t\tthis.setContentDiv(markup);\n\t},\n\n\tface: function(upness) {\n\t\t//notesoup.say('Click! ' + suit + ' ' + rank);\n\t\t//this.showing = upness;\n\t\t//this.onrender();\n\t},\n\n\tclick: function(e) {\n\t\tthis.sendself('face', !this.showing);\n\t}\n});\n//Ext.get(note.id+'_content').on('click', note.click, note);\nnote.init();\n</script>", 
              "width": 140, 
              "xPos": 798, 
              "yPos": 36
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 58, 
              "imports": "/js-src/js-widgets/timer.js", 
              "notename": "Timer", 
              "text": "<script type='text/javascript'>\n/**\n*\ttimer.js - Note Soup timer widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tstart: function() {\n\t\tthis.starttime = new Date().toString();\n\t\tthis.running = true;\n\t\tthis.save();\n\t\tnotesoup.say('Timer started: ' + this.starttime);\n\t},\n\n\tontick: function() {\n\t\tif (!this.running) return;\n\t\tthis.setContentDiv([\n\t\t\t'<center>', '<h2>', \n\t\t\t\tnotesoup.stringifyTimeDiff(new Date() - Date.parse(this.starttime)), \n\t\t\t\t'</h2><br/>',\n\t\t\t\t'<h5>since ', this.starttime, '</h5>',\n\t\t\t'</center>'\n\t\t].join(''));\n\t}\n});\n</script>\n<center>\n<input type='submit' value='start' onclick = 'notesoup.ui.getEnclosingNote(this).start();'/>\n</center>\n", 
              "width": 250, 
              "xPos": 536, 
              "yPos": 396
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 55, 
              "imports": "/js-src/js-widgets/folderacl.js", 
              "notename": "Folder Access Control", 
              "text": "<script type='text/javascript'>\n/**\n*\tfolderacl.js - Note Soup folder permissions UI\n*\tCopyright 2007, 2008 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tnotename: 'Folder Access Control',\n\t//bgcolor: '#99ccff',\n\n\tinit: function() {\n\t\tthis.show();\n\t\tthis.refresh();\n\t},\n\n\tgetdata: function(key) {\n\t\tif ('folderacl' in notesoup) return notesoup.folderacl[key];\n\t\treturn '';\n\t},\n\n\tonrender: function() {\n\t\n\t\tif (!notesoup.isowner) {\n\t\t\tthis.setContentDiv([\n\t\t\t\t'<center><br/>',\n\t\t\t\t'Sorry, only the folder owner has permission to change access rights here.<br/>',\n\t\t\t\t'<br/>',\n\t\t\t\t'</center>'\n\t\t\t].join(''));\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar folderACLForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 70,\n\t\t\tminButtonWidth: 50 ,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Folder',\n\t\t\t\tid: this.getFieldID('folder'),\n\t\t\t\tname: 'folder',\n\t\t\t\tvalue: this.getdata('folder'),\n\t\t\t\twidth: this.width - 36 - 76\n\t\t\t},{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Read',\n\t\t\t\tid: this.getFieldID('readers'),\n\t\t\t\tname: 'readers',\n\t\t\t\tvalue: this.getdata('readers'),\n\t\t\t\twidth: this.width - 36 - 76\n\t\t\t},{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Write',\n\t\t\t\tid: this.getFieldID('editors'),\n\t\t\t\tname: 'editors',\n\t\t\t\tvalue: this.getdata('editors'),\n\t\t\t\twidth: this.width - 36 - 76\n\t\t\t},{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Append',\n\t\t\t\tid: this.getFieldID('senders'),\n\t\t\t\tname: 'senders',\n\t\t\t\tvalue: this.getdata('senders'),\n\t\t\t\twidth: this.width - 36 - 76\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'save',\n\t\t\t\thandler: this.saveACL,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'refresh',\n\t\t\t\thandler: this.refresh,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'done',\n\t\t\t\thandler: this.destroy,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tthis.setContentDiv('<br/>');\n\t\tfolderACLForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('folderACLForm', folderACLForm);\n\t\t//this.onrender = this.renderform;\n\t\treturn folderACLForm;\n\t},\n\n\tsaveACL: function() {\n\t\tnotesoup.setFolderACL(this.getField('folderACLForm', 'folder'), {\n\t\t\t'senders': this.getField('folderACLForm', 'senders'),\n\t\t\t'readers': this.getField('folderACLForm', 'readers'),\n\t\t\t'editors': this.getField('folderACLForm', 'editors')\n\t\t});\n\t},\n\n\tupdateValues: function() {\n\t\tthis.setField('folderACLForm', 'folder', notesoup.folderacl.folder);\n\t\tthis.setField('folderACLForm', 'senders', notesoup.folderacl.senders);\n\t\tthis.setField('folderACLForm', 'readers', notesoup.folderacl.readers);\n\t\tthis.setField('folderACLForm', 'editors', notesoup.folderacl.editors);\n\t},\n\t\n\trefresh: function() {\n\t\tif (!notesoup.isowner) return;\n\t\tvar folder = notesoup.foldername;\n\t\tvar theForm = this.getEphemeral('folderACLForm');\n\t\tif (theForm) {\n\t\t\tvar f = this.getField('folderACLForm', 'folder');\n\t\t\tif (f) folder = f;\n\t\t}\n\t\tnotesoup.getFolderACL(folder, note.updateValues, notesoup.notes[note.id]);\n\t}\n});\nnote.init();\n</script>\nLoading...", 
              "width": 250, 
              "xPos": 12, 
              "yPos": 96
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/countdowntimer.js", 
              "notename": "Countdown Timer", 
              "text": "<script type='text/javascript'>\n/**\n*\tcountdown.js - Note Soup count down timer widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tontick: function() {\n\t\tif (this.running) this.updateDisplay();\n\t},\n\n\tonrender: function() {\n\t\tif (this.running) this.updateDisplay();\n\t\telse this.showInputForm();\n\t},\n\n\tshowInputForm: function() {\n\t\tvar myForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\tlabelalign: 'top',\n\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Subject',\n\t\t\t\tname: 'subject',\n\t\t\t\tid: this.getFieldID('subject'),\n\t\t\t\tvalue: this.subject || '',\n\t\t\t\twidth: this.width - 36 - 86,\n\t\t\t\tvalue: this.notename || '',\n\t\t\t\twidth: 250\n\t\t\t},{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Deadline timestamp',\n\t\t\t\tname: 'deadline',\n\t\t\t\tid: this.getFieldID('deadline'),\n\t\t\t\tvalue: this.deadline ? this.deadline : new Date(),\n\t\t\t\twidth: 250\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'go',\n\t\t\t\thandler: this.submitForm,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.submitForm,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/><center><h2>Countdown To Deadline</h2></center><br/>';\n\t\tmyForm.render(thediv);\n\t\tthis.setEphemeral('myForm', myForm);\n\t},\n\n\tsubmitForm: function(e) {\n\t\tnotesoup.say('Starting countdown to: ' + this.getField('myForm', 'subject') + ' at ' + this.getField('myForm', 'deadline'));\n\t\tthis.setupClock(this.getField('myForm', 'subject'), this.getField('myForm', 'deadline'));\n\t\tthis.save();\n\t},\n\n\tsetupClock: function(subject, deadline) {\n\t\tif (!subject || !deadline) return;\n\t\tvar t = new Date();\n\t\tthis.set({\n\t\t\trunning: true,\n\t\t\tediting: false,\n\t\t\tnotename: subject,\n\t\t\tdeadline: deadline,\n\t\t\tdeadlinetime: Date.parse(deadline)\n\t\t});\n\t\tExt.get(this.id + '_title').update(subject);\n\t\tthis.ontick = function() {this.onrender();};\n\t},\n\n\teditClock: function() {\n\t\tthis.editing = true;\n\t\tthis.show();\n\t},\n\t\n\tupdateDisplay: function() {\n\t\tvar timediff = this.deadlinetime - new Date().getTime();\n\t\tvar preposition = 'until ';\n\t\tif (timediff < 0) {\n\t\t\tpreposition = 'since ';\n\t\t\ttimediff = (-timediff);\n\t\t}\n\t\tthis.setContentDiv([\n\t\t\t'<br/><h2><center>', \n\t\t\t\tnotesoup.stringifyTimeDiff(timediff), '<br/>',\n\t\t\t\tpreposition, this.deadline,\n\t\t\t'</center></h2><br/>'\n\t\t].join(''));\n\t}\n});\nnote.show();\n</script>", 
              "width": 250, 
              "xPos": 274, 
              "yPos": 276
            }, 
            {
              "bgcolor": "#ccffcc", 
              "bidyinc": 42, 
              "bidypos": 228, 
              "closedACL": {
                "senders": "-*"
              }, 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/auction.js", 
              "notename": "Auction", 
              "runningACL": {
                "readers": "*", 
                "senders": "*"
              }, 
              "text": "<script type='text/javascript'>\n/**\n*\tauction.js - Note Soup auction widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\txPos: 12,\n\tyPos: 36,\n\n\tbidypos: 228,\n\tbidyinc: 42,\n\n\trunningACL: {\n\t\treaders: '*',\n\t\tsenders: '*'\n\t},\n\tclosedACL: {\n\t\t//readers: '-*',\n\t\tsenders: '-*'\n\t},\n\t\n\tisAuctionOwner: function() {\n\t\treturn (notesoup.loggedin && (notesoup.username == notesoup.foldername.split('/')[0]));\n\t},\n\n\n\tstartAuction: function() {\n\t\tif (!this.running && notesoup.loggedin && this.isAuctionOwner()) {\n\t\t\tvar duration = notesoup.prompt('Starting Auction: How long should the auction last?', '100 seconds');\n\t\t\tif (!duration) return;\n\t\t\tduration = notesoup.getDuration(duration);\n\t\t\tif (!duration) return;\n\t\t\tthis.starttime = new Date().getTime();\n\t\t\tthis.duration = duration;\n\t\t\tthis.endtime = this.starttime + duration;\n\t\t\tthis.auctionuser = notesoup.username;\n\t\t\tnotesoup.setFolderACL(notesoup.foldername, this.runningACL);\n\t\t\tthis.running = true;\n\t\t\tthis.save();\n\t\t\tthis.show();\n\t\t\tnotesoup.say('The auction is running.');\n\t\t}\n\t\telse {\n\t\t\tnotesoup.say('Sorry, only the auction owner can start the auction.', 'error');\n\t\t}\n\t},\n\n\n\tendAuction: function() {\n\t\tif (this.running && this.isAuctionOwner()) {\n\t\t\tthis.running = false;\n\t\t\tnotesoup.say('Ending auction...');\n\t\t\tnotesoup.setFolderACL(notesoup.foldername, this.closedACL);\n\t\t\tnotesoup.folderSay('The auction is closed.');\n\t\t\t\n\t\t\tvar text = this.highbidder ? \n\t\t\t\t'Winning bidder: ' + this.highbidder + '<br/>Winning bid: ' + this.highbid :\n\t\t\t\t'There were no bids.';\n\t\t\t\n\t\t\tnotesoup.saveNote({\n\t\t\t\tnotename: 'Auction ended at ' + new Date(),\n\t\t\t\tbgcolor: 'lime',\n\t\t\t\txPos: this.xPos,\n\t\t\t\tyPos: this.yPos,\n\t\t\t\ttext: '<br/><br/><center>' + text + '</center><br/><br/>'\n\t\t\t}, notesoup.foldername);\n\t\t\tthis.destroy();\n\t\t}\n\t\telse {\n\t\t\tnotesoup.say('Sorry, only the auction owner can end the auction.', 'error');\n\t\t}\n\t},\n\n\n\tbid: function() {\n\t\tif (!notesoup.loggedin || !notesoup.username) {\n\t\t\tnotesoup.say('Sorry, you must be logged in to bid.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.running) {\n\t\t\tnotesoup.say('Sorry, the auction is not running.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tvar bidval = this.getField('auctionForm', 'mybid');\n\t\tif (!bidval) return;\n\n\t\tvar bid = parseFloat(bidval);\n\t\tif (this.highbid && (bid <= this.highbid)) {\n\t\t\tnotesoup.say('Sorry, your bid must be greater than the current high bid.');\n\t\t\treturn;\n\t\t}\n\t\tnotesoup.say('Submitting your bid: ' + bid);\n\n\t\t//var id = 'noteauctionbid' + notesoup.randomName(20);\n\t\tnotesoup.saveNote({\n\t\t\tnotename: 'bid',\n\t\t\txPos: 12,\n\t\t\tyPos: this.bidypos,\n\t\t\tapropos: this.id,\n\t\t\tbgcolor: notesoup.ui.defaultNoteColor,\n\t\t\ttext: '' + bid + ' by ' + notesoup.username + ' at ' + new Date()\n\t\t}, notesoup.foldername);\n\t\tthis.setField('auctionForm', 'mybid', '');\n\t\tthis.bidypos += this.bidyinc;\n\t},\n\n\n\tontick: function() {\n\t\tif (!this.running) return;\n\t\tif (new Date() > this.endtime) {\n\t\t\tif (this.isAuctionOwner()) {\n\t\t\t\tthis.endAuction();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.running = false;\n\t\t\t\tthis.setContentDiv('<br/><br/>The auction has ended...<br/><br/>');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// update time remaining\n\t\tthis.timeleft = this.endtime - new Date();\n\n\t\t// set the color\n\t\tvar newcolor = '';\n\t\tif (this.timeleft < (15*1000)) newcolor = 'red';\n\t\telse if (this.timeleft < (60*1000)) newcolor = 'yellow';\n\t\tif (newcolor && (newcolor != this.bgcolor)) {\n\t\t\tthis.bgcolor = newcolor;\n\t\t\tthis.show();\n\t\t}\n\n\t\t// find and post high bid\n\t\tthis.highbid = 0.0;\n\t\tthis.highbidder = '';\n\t\tfor (var n in notesoup.notes) {\n\t\t\tif (n == this.id) continue;\n\t\t\tvar thenote = notesoup.notes[n];\n\t\t\tif (thenote.notename != 'bid') continue;\n\n\t\t\tif (!thenote.text || !thenote.from || !thenote.mtime || \n\t\t\t\t(thenote.mtime * 1000 < this.starttime) || (thenote.mtime * 1000 > this.endtime)) {\n\t\t\t\tif (this.isAuctionOwner()) {\n\t\t\t\t\tnotesoup.say('Deleting malformed bid.');\n\t\t\t\t\tthenote.destroy();\n\t\t\t\t\t//notesoup.say(thenote.toJSON());\n\t\t\t\t}\n\t\t\t\telse continue;\n\t\t\t}\n\t\t\tvar bid = parseFloat(thenote.text);\n\t\t\tif (bid > this.highbid)  {\n\t\t\t\tthis.highbid = bid;\n\t\t\t\tthis.highbidder = thenote.from.split(' ')[0];\n\t\t\t}\n\t\t\tif (thenote.yPos >= this.bidypos) {\n\t\t\t\tthis.bidypos = thenote.yPos + this.bidyinc;\n\t\t\t}\n\t\t}\n\n\t\tthis.setField('auctionForm', 'timeleft',  notesoup.stringifyTimeDiff(this.timeleft));\n\t\tthis.setField('auctionForm', 'highbid', ''+this.highbid || '');\n\t\tthis.setField('auctionForm', 'highbidder', ''+this.highbidder || '');\n\t},\n\n\n\tonrender: function() {\n\t\n\t\tvar preamble = '';\n\n\t\tvar auctionForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\titems: [{xtype: 'hidden'}],\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false\n\t\t});\n\n\t\tif (this.running) {\n\t\t\tauctionForm.add({\n\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\tfieldLabel: 'Time remaining',\n\t\t\t\t\tid: this.getFieldID('timeleft'),\n\t\t\t\t\tname: 'timeleft',\n\t\t\t\t\twidth: this.width - 36 - 86\n\t\t\t\t},{\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\tfieldLabel: 'High bid',\n\t\t\t\t\tid: this.getFieldID('highbid'),\n\t\t\t\t\tname: 'highbid',\n\t\t\t\t\twidth: this.width - 36 - 86\n\t\t\t\t},{\n\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\tfieldLabel: 'High bidder',\n\t\t\t\t\tid: this.getFieldID('highbidder'),\n\t\t\t\t\tname: 'highbidder',\n\t\t\t\t\twidth: this.width - 36 - 86\n\t\t\t\t},{\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\tfieldLabel: 'Enter your bid here',\n\t\t\t\t\tid: this.getFieldID('mybid'),\n\t\t\t\t\tname: 'mybid',\n\t\t\t\t\twidth: this.width - 36 - 86\n\t\t\t\t}\n\t\t\t);\n\t\n\t\t\tauctionForm.addButton({\n\t\t\t\ttext: 'bid',\n\t\t\t\thandler: this.bid,\n\t\t\t\tscope: this\n\t\t\t});\n\n\t\t\tif (this.isAuctionOwner()) {\n\t\t\t\tauctionForm.addButton({\n\t\t\t\t\ttext: 'end auction',\n\t\t\t\t\thandler: this.endAuction,\n\t\t\t\t\tscope: this\n\t\t\t\t});\n\t\t\t}\n\t\t} \n\t\telse {\n\t\t\tpreamble = '<center><br/><br/>Waiting for the auction owner to start the auction.<br/><br/></center>';\n\t\t\tif (this.isAuctionOwner()) {\t\t\n\t\t\t\tauctionForm.addButton({\n\t\t\t\t\ttext: 'start',\n\t\t\t\t\thandler: this.startAuction,\n\t\t\t\t\tscope: this\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.setContentDiv(preamble);\n\t\tvar thediv = this.getContentDiv();\n\t\tauctionForm.render(thediv);\n\t\tthis.setEphemeral('auctionForm', auctionForm);\n\t\t//Ext.get(thediv).addKeyListener(13, this.bid, this);\n\t}\n});\nnote.show();\n</script>", 
              "width": 250, 
              "xPos": 274, 
              "yPos": 36
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/ajaxrtt.js", 
              "notename": "AjaxRTT", 
              "text": "<script type='text/javascript'>\n/**\n*\tajaxrtt.js - Note Soup ajax performance widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tontick: function() {\n\t\tthis.refresh();\n\t},\n\n\tonrender: function() {\n\t\tvar textInputForm = new Ext.FormPanel({\n\t\t\thideLabels:true,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tid: this.getFieldID('value'),\n\t\t\t\tname: 'value',\n\t\t\t\twidth: this.width - 36\t\t//175,\n\t\t\t}]\n\t\t});\n\t\tthis.setContentDiv('');\n\t\ttextInputForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('textInputForm', textInputForm);\n\t},\n\n\tgetvalue: function() {\n\t\treturn this.getField('textInputForm', 'value');\n\t},\n\n\trefresh: function() {\n\t\tthis.setvalue(''+notesoup.rttstack);\n\t},\n\n\tsetvalue: function(newvalue) {\n\t\tthis.setField('textInputForm', 'value', newvalue);\n\t}\n});\nnote.show();\n</script>", 
              "width": 250, 
              "xPos": 274, 
              "yPos": 396
            }, 
            {
              "bgcolor": "#ccffcc", 
              "from": "system in system/widgets", 
              "height": 40, 
              "imports": "/js-src/js-widgets/chatty.js", 
              "notename": "Send a Message", 
              "text": "<script type='text/javascript'>\n/**\n*\tchatty.js - Note Soup chat widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tsendit: function() {\n\t\tvar to = this.getField('chattyForm', 'to');\n\t\tvar msg = this.getField('chattyForm', 'msg');\n\t\tif (to && msg) notesoup.postEvent('/talk/' + to, 'say', msg);\n\t},\n\t\n\tping: function() {\n\t\tvar to = this.getField('chattyForm', 'to');\n\t\tif (to) notesoup.postEvent('/talk/' + to, 'say', 'Ping!');\n\t},\n\n\tresetForm: function() {\n\t\tthis.setField('chattyForm', 'msg', '');\n\t\tnotesoup.say('Message sent.');\n\t},\n\n\tonrender: function() {\n\n\t\tvar chattyForm = new Ext.FormPanel({\n\t\t\t//labelWidth: 75,\n\t\t\tlabelalign: 'top',\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'To',\n\t\t\t\tname: 'to',\n\t\t\t\tid: this.getFieldID('to'),\n\t\t\t\twidth: this.width - 36 - 86\n\t\t\t},{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Say',\n\t\t\t\tname: 'msg',\n\t\t\t\tid: this.getFieldID('msg'),\n\t\t\t\twidth: this.width - 36 - 86\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Ping',\n\t\t\t\thandler: this.ping,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Send',\n\t\t\t\thandler: this.sendit,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Done',\n\t\t\t\thandler: this.destroy,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.sendit,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tthis.setContentDiv('<br/>');\n\t\tchattyForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('chattyForm', chattyForm);\n\t}\n});\nnote.show();\n</script>", 
              "width": 250, 
              "xPos": 274, 
              "yPos": 156
            }
          ], 
          "notename": "backup of system/widgets", 
          "restore": "{notesoup.saveNoteList(this.notelist);}", 
          "text": "<center>Sun Dec 25 2011 06:52:04 GMT-0700 (MST)<br/><input type='submit' value='click to restore' onclick='notesoup.ui.getEnclosingNote(this).calleventhandler(\"restore\");'/></center>"
        }, 
        "4": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 58, 
          "id": "4", 
          "imports": "/js-src/js-widgets/timer.js", 
          "mtime": 1324657141190, 
          "notename": "Timer", 
          "text": "<script type='text/javascript'>\n/**\n*\ttimer.js - Note Soup timer widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tstart: function() {\n\t\tthis.starttime = new Date().toString();\n\t\tthis.running = true;\n\t\tthis.save();\n\t\tnotesoup.say('Timer started: ' + this.starttime);\n\t},\n\n\tontick: function() {\n\t\tif (!this.running) return;\n\t\tthis.setContentDiv([\n\t\t\t'<center>', '<h2>', \n\t\t\t\tnotesoup.stringifyTimeDiff(new Date() - Date.parse(this.starttime)), \n\t\t\t\t'</h2><br/>',\n\t\t\t\t'<h5>since ', this.starttime, '</h5>',\n\t\t\t'</center>'\n\t\t].join(''));\n\t}\n});\n</script>\n<center>\n<input type='submit' value='start' onclick = 'notesoup.ui.getEnclosingNote(this).start();'/>\n</center>\n", 
          "width": 250, 
          "xPos": 536, 
          "yPos": 396, 
          "zIndex": 28
        }, 
        "5": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 328, 
          "id": "5", 
          "imports": "/js-src/js-widgets/folderacl.js", 
          "mtime": 1324657141191, 
          "notename": "Folder Access Control", 
          "text": "<script type='text/javascript'>\n/**\n*\tfolderacl.js - Note Soup folder permissions UI\n*\tCopyright 2007, 2008 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tnotename: 'Folder Access Control',\n\t//bgcolor: '#99ccff',\n\n\tinit: function() {\n\t\tthis.show();\n\t\tthis.refresh();\n\t},\n\n\tgetdata: function(key) {\n\t\tif ('folderacl' in notesoup) return notesoup.folderacl[key];\n\t\treturn '';\n\t},\n\n\tonrender: function() {\n\t\n\t\tif (!notesoup.isowner) {\n\t\t\tthis.setContentDiv([\n\t\t\t\t'<center><br/>',\n\t\t\t\t'Sorry, only the folder owner has permission to change access rights here.<br/>',\n\t\t\t\t'<br/>',\n\t\t\t\t'</center>'\n\t\t\t].join(''));\n\t\t\treturn;\n\t\t}\n\t\n\t\tvar folderACLForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 70,\n\t\t\tminButtonWidth: 50 ,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Folder',\n\t\t\t\tid: this.getFieldID('folder'),\n\t\t\t\tname: 'folder',\n\t\t\t\tvalue: this.getdata('folder'),\n\t\t\t\twidth: this.width - 36 - 76\n\t\t\t},{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Read',\n\t\t\t\tid: this.getFieldID('readers'),\n\t\t\t\tname: 'readers',\n\t\t\t\tvalue: this.getdata('readers'),\n\t\t\t\twidth: this.width - 36 - 76\n\t\t\t},{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Write',\n\t\t\t\tid: this.getFieldID('editors'),\n\t\t\t\tname: 'editors',\n\t\t\t\tvalue: this.getdata('editors'),\n\t\t\t\twidth: this.width - 36 - 76\n\t\t\t},{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Append',\n\t\t\t\tid: this.getFieldID('senders'),\n\t\t\t\tname: 'senders',\n\t\t\t\tvalue: this.getdata('senders'),\n\t\t\t\twidth: this.width - 36 - 76\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'save',\n\t\t\t\thandler: this.saveACL,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'refresh',\n\t\t\t\thandler: this.refresh,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'done',\n\t\t\t\thandler: this.destroy,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tthis.setContentDiv('<br/>');\n\t\tfolderACLForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('folderACLForm', folderACLForm);\n\t\t//this.onrender = this.renderform;\n\t\treturn folderACLForm;\n\t},\n\n\tsaveACL: function() {\n\t\tnotesoup.setFolderACL(this.getField('folderACLForm', 'folder'), {\n\t\t\t'senders': this.getField('folderACLForm', 'senders'),\n\t\t\t'readers': this.getField('folderACLForm', 'readers'),\n\t\t\t'editors': this.getField('folderACLForm', 'editors')\n\t\t});\n\t},\n\n\tupdateValues: function() {\n\t\tthis.setField('folderACLForm', 'folder', notesoup.folderacl.folder);\n\t\tthis.setField('folderACLForm', 'senders', notesoup.folderacl.senders);\n\t\tthis.setField('folderACLForm', 'readers', notesoup.folderacl.readers);\n\t\tthis.setField('folderACLForm', 'editors', notesoup.folderacl.editors);\n\t},\n\t\n\trefresh: function() {\n\t\tif (!notesoup.isowner) return;\n\t\tvar folder = notesoup.foldername;\n\t\tvar theForm = this.getEphemeral('folderACLForm');\n\t\tif (theForm) {\n\t\t\tvar f = this.getField('folderACLForm', 'folder');\n\t\t\tif (f) folder = f;\n\t\t}\n\t\tnotesoup.getFolderACL(folder, note.updateValues, notesoup.notes[note.id]);\n\t}\n});\nnote.init();\n</script>\nLoading...", 
          "width": 250, 
          "xPos": 12, 
          "yPos": 96, 
          "zIndex": 6
        }, 
        "6": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 186, 
          "id": "6", 
          "imports": "/js-src/js-widgets/countdowntimer.js", 
          "mtime": 1324657141191, 
          "notename": "Countdown Timer", 
          "text": "<script type='text/javascript'>\n/**\n*\tcountdown.js - Note Soup count down timer widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tontick: function() {\n\t\tif (this.running) this.updateDisplay();\n\t},\n\n\tonrender: function() {\n\t\tif (this.running) this.updateDisplay();\n\t\telse this.showInputForm();\n\t},\n\n\tshowInputForm: function() {\n\t\tvar myForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\tlabelalign: 'top',\n\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Subject',\n\t\t\t\tname: 'subject',\n\t\t\t\tid: this.getFieldID('subject'),\n\t\t\t\tvalue: this.subject || '',\n\t\t\t\twidth: this.width - 36 - 86,\n\t\t\t\tvalue: this.notename || '',\n\t\t\t\twidth: 250\n\t\t\t},{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'Deadline timestamp',\n\t\t\t\tname: 'deadline',\n\t\t\t\tid: this.getFieldID('deadline'),\n\t\t\t\tvalue: this.deadline ? this.deadline : new Date(),\n\t\t\t\twidth: 250\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'go',\n\t\t\t\thandler: this.submitForm,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.submitForm,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/><center><h2>Countdown To Deadline</h2></center><br/>';\n\t\tmyForm.render(thediv);\n\t\tthis.setEphemeral('myForm', myForm);\n\t},\n\n\tsubmitForm: function(e) {\n\t\tnotesoup.say('Starting countdown to: ' + this.getField('myForm', 'subject') + ' at ' + this.getField('myForm', 'deadline'));\n\t\tthis.setupClock(this.getField('myForm', 'subject'), this.getField('myForm', 'deadline'));\n\t\tthis.save();\n\t},\n\n\tsetupClock: function(subject, deadline) {\n\t\tif (!subject || !deadline) return;\n\t\tvar t = new Date();\n\t\tthis.set({\n\t\t\trunning: true,\n\t\t\tediting: false,\n\t\t\tnotename: subject,\n\t\t\tdeadline: deadline,\n\t\t\tdeadlinetime: Date.parse(deadline)\n\t\t});\n\t\tExt.get(this.id + '_title').update(subject);\n\t\tthis.ontick = function() {this.onrender();};\n\t},\n\n\teditClock: function() {\n\t\tthis.editing = true;\n\t\tthis.show();\n\t},\n\t\n\tupdateDisplay: function() {\n\t\tvar timediff = this.deadlinetime - new Date().getTime();\n\t\tvar preposition = 'until ';\n\t\tif (timediff < 0) {\n\t\t\tpreposition = 'since ';\n\t\t\ttimediff = (-timediff);\n\t\t}\n\t\tthis.setContentDiv([\n\t\t\t'<br/><h2><center>', \n\t\t\t\tnotesoup.stringifyTimeDiff(timediff), '<br/>',\n\t\t\t\tpreposition, this.deadline,\n\t\t\t'</center></h2><br/>'\n\t\t].join(''));\n\t}\n});\nnote.show();\n</script>", 
          "width": 250, 
          "xPos": 274, 
          "yPos": 276, 
          "zIndex": 19
        }, 
        "7": {
          "bgcolor": "#ccffcc", 
          "bidyinc": 42, 
          "bidypos": 228, 
          "closedACL": {
            "senders": "-*"
          }, 
          "from": "system in system/widgets", 
          "height": 152, 
          "id": "7", 
          "imports": "/js-src/js-widgets/auction.js", 
          "mtime": 1324657141191, 
          "notename": "Auction", 
          "runningACL": {
            "readers": "*", 
            "senders": "*"
          }, 
          "text": "<script type='text/javascript'>\n/**\n*\tauction.js - Note Soup auction widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\txPos: 12,\n\tyPos: 36,\n\n\tbidypos: 228,\n\tbidyinc: 42,\n\n\trunningACL: {\n\t\treaders: '*',\n\t\tsenders: '*'\n\t},\n\tclosedACL: {\n\t\t//readers: '-*',\n\t\tsenders: '-*'\n\t},\n\t\n\tisAuctionOwner: function() {\n\t\treturn (notesoup.loggedin && (notesoup.username == notesoup.foldername.split('/')[0]));\n\t},\n\n\n\tstartAuction: function() {\n\t\tif (!this.running && notesoup.loggedin && this.isAuctionOwner()) {\n\t\t\tvar duration = notesoup.prompt('Starting Auction: How long should the auction last?', '100 seconds');\n\t\t\tif (!duration) return;\n\t\t\tduration = notesoup.getDuration(duration);\n\t\t\tif (!duration) return;\n\t\t\tthis.starttime = new Date().getTime();\n\t\t\tthis.duration = duration;\n\t\t\tthis.endtime = this.starttime + duration;\n\t\t\tthis.auctionuser = notesoup.username;\n\t\t\tnotesoup.setFolderACL(notesoup.foldername, this.runningACL);\n\t\t\tthis.running = true;\n\t\t\tthis.save();\n\t\t\tthis.show();\n\t\t\tnotesoup.say('The auction is running.');\n\t\t}\n\t\telse {\n\t\t\tnotesoup.say('Sorry, only the auction owner can start the auction.', 'error');\n\t\t}\n\t},\n\n\n\tendAuction: function() {\n\t\tif (this.running && this.isAuctionOwner()) {\n\t\t\tthis.running = false;\n\t\t\tnotesoup.say('Ending auction...');\n\t\t\tnotesoup.setFolderACL(notesoup.foldername, this.closedACL);\n\t\t\tnotesoup.folderSay('The auction is closed.');\n\t\t\t\n\t\t\tvar text = this.highbidder ? \n\t\t\t\t'Winning bidder: ' + this.highbidder + '<br/>Winning bid: ' + this.highbid :\n\t\t\t\t'There were no bids.';\n\t\t\t\n\t\t\tnotesoup.saveNote({\n\t\t\t\tnotename: 'Auction ended at ' + new Date(),\n\t\t\t\tbgcolor: 'lime',\n\t\t\t\txPos: this.xPos,\n\t\t\t\tyPos: this.yPos,\n\t\t\t\ttext: '<br/><br/><center>' + text + '</center><br/><br/>'\n\t\t\t}, notesoup.foldername);\n\t\t\tthis.destroy();\n\t\t}\n\t\telse {\n\t\t\tnotesoup.say('Sorry, only the auction owner can end the auction.', 'error');\n\t\t}\n\t},\n\n\n\tbid: function() {\n\t\tif (!notesoup.loggedin || !notesoup.username) {\n\t\t\tnotesoup.say('Sorry, you must be logged in to bid.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.running) {\n\t\t\tnotesoup.say('Sorry, the auction is not running.', 'error');\n\t\t\treturn;\n\t\t}\n\t\tvar bidval = this.getField('auctionForm', 'mybid');\n\t\tif (!bidval) return;\n\n\t\tvar bid = parseFloat(bidval);\n\t\tif (this.highbid && (bid <= this.highbid)) {\n\t\t\tnotesoup.say('Sorry, your bid must be greater than the current high bid.');\n\t\t\treturn;\n\t\t}\n\t\tnotesoup.say('Submitting your bid: ' + bid);\n\n\t\t//var id = 'noteauctionbid' + notesoup.randomName(20);\n\t\tnotesoup.saveNote({\n\t\t\tnotename: 'bid',\n\t\t\txPos: 12,\n\t\t\tyPos: this.bidypos,\n\t\t\tapropos: this.id,\n\t\t\tbgcolor: notesoup.ui.defaultNoteColor,\n\t\t\ttext: '' + bid + ' by ' + notesoup.username + ' at ' + new Date()\n\t\t}, notesoup.foldername);\n\t\tthis.setField('auctionForm', 'mybid', '');\n\t\tthis.bidypos += this.bidyinc;\n\t},\n\n\n\tontick: function() {\n\t\tif (!this.running) return;\n\t\tif (new Date() > this.endtime) {\n\t\t\tif (this.isAuctionOwner()) {\n\t\t\t\tthis.endAuction();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.running = false;\n\t\t\t\tthis.setContentDiv('<br/><br/>The auction has ended...<br/><br/>');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// update time remaining\n\t\tthis.timeleft = this.endtime - new Date();\n\n\t\t// set the color\n\t\tvar newcolor = '';\n\t\tif (this.timeleft < (15*1000)) newcolor = 'red';\n\t\telse if (this.timeleft < (60*1000)) newcolor = 'yellow';\n\t\tif (newcolor && (newcolor != this.bgcolor)) {\n\t\t\tthis.bgcolor = newcolor;\n\t\t\tthis.show();\n\t\t}\n\n\t\t// find and post high bid\n\t\tthis.highbid = 0.0;\n\t\tthis.highbidder = '';\n\t\tfor (var n in notesoup.notes) {\n\t\t\tif (n == this.id) continue;\n\t\t\tvar thenote = notesoup.notes[n];\n\t\t\tif (thenote.notename != 'bid') continue;\n\n\t\t\tif (!thenote.text || !thenote.from || !thenote.mtime || \n\t\t\t\t(thenote.mtime * 1000 < this.starttime) || (thenote.mtime * 1000 > this.endtime)) {\n\t\t\t\tif (this.isAuctionOwner()) {\n\t\t\t\t\tnotesoup.say('Deleting malformed bid.');\n\t\t\t\t\tthenote.destroy();\n\t\t\t\t\t//notesoup.say(thenote.toJSON());\n\t\t\t\t}\n\t\t\t\telse continue;\n\t\t\t}\n\t\t\tvar bid = parseFloat(thenote.text);\n\t\t\tif (bid > this.highbid)  {\n\t\t\t\tthis.highbid = bid;\n\t\t\t\tthis.highbidder = thenote.from.split(' ')[0];\n\t\t\t}\n\t\t\tif (thenote.yPos >= this.bidypos) {\n\t\t\t\tthis.bidypos = thenote.yPos + this.bidyinc;\n\t\t\t}\n\t\t}\n\n\t\tthis.setField('auctionForm', 'timeleft',  notesoup.stringifyTimeDiff(this.timeleft));\n\t\tthis.setField('auctionForm', 'highbid', ''+this.highbid || '');\n\t\tthis.setField('auctionForm', 'highbidder', ''+this.highbidder || '');\n\t},\n\n\n\tonrender: function() {\n\t\n\t\tvar preamble = '';\n\n\t\tvar auctionForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 75,\n\t\t\titems: [{xtype: 'hidden'}],\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false\n\t\t});\n\n\t\tif (this.running) {\n\t\t\tauctionForm.add({\n\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\tfieldLabel: 'Time remaining',\n\t\t\t\t\tid: this.getFieldID('timeleft'),\n\t\t\t\t\tname: 'timeleft',\n\t\t\t\t\twidth: this.width - 36 - 86\n\t\t\t\t},{\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\tfieldLabel: 'High bid',\n\t\t\t\t\tid: this.getFieldID('highbid'),\n\t\t\t\t\tname: 'highbid',\n\t\t\t\t\twidth: this.width - 36 - 86\n\t\t\t\t},{\n\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\tfieldLabel: 'High bidder',\n\t\t\t\t\tid: this.getFieldID('highbidder'),\n\t\t\t\t\tname: 'highbidder',\n\t\t\t\t\twidth: this.width - 36 - 86\n\t\t\t\t},{\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\tfieldLabel: 'Enter your bid here',\n\t\t\t\t\tid: this.getFieldID('mybid'),\n\t\t\t\t\tname: 'mybid',\n\t\t\t\t\twidth: this.width - 36 - 86\n\t\t\t\t}\n\t\t\t);\n\t\n\t\t\tauctionForm.addButton({\n\t\t\t\ttext: 'bid',\n\t\t\t\thandler: this.bid,\n\t\t\t\tscope: this\n\t\t\t});\n\n\t\t\tif (this.isAuctionOwner()) {\n\t\t\t\tauctionForm.addButton({\n\t\t\t\t\ttext: 'end auction',\n\t\t\t\t\thandler: this.endAuction,\n\t\t\t\t\tscope: this\n\t\t\t\t});\n\t\t\t}\n\t\t} \n\t\telse {\n\t\t\tpreamble = '<center><br/><br/>Waiting for the auction owner to start the auction.<br/><br/></center>';\n\t\t\tif (this.isAuctionOwner()) {\t\t\n\t\t\t\tauctionForm.addButton({\n\t\t\t\t\ttext: 'start',\n\t\t\t\t\thandler: this.startAuction,\n\t\t\t\t\tscope: this\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.setContentDiv(preamble);\n\t\tvar thediv = this.getContentDiv();\n\t\tauctionForm.render(thediv);\n\t\tthis.setEphemeral('auctionForm', auctionForm);\n\t\t//Ext.get(thediv).addKeyListener(13, this.bid, this);\n\t}\n});\nnote.show();\n</script>", 
          "width": 250, 
          "xPos": 274, 
          "yPos": 36, 
          "zIndex": 2
        }, 
        "8": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 110, 
          "id": "8", 
          "imports": "/js-src/js-widgets/ajaxrtt.js", 
          "mtime": 1324657141191, 
          "notename": "AjaxRTT", 
          "text": "<script type='text/javascript'>\n/**\n*\tajaxrtt.js - Note Soup ajax performance widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tontick: function() {\n\t\tthis.refresh();\n\t},\n\n\tonrender: function() {\n\t\tvar textInputForm = new Ext.FormPanel({\n\t\t\thideLabels:true,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tid: this.getFieldID('value'),\n\t\t\t\tname: 'value',\n\t\t\t\twidth: this.width - 36\t\t//175,\n\t\t\t}]\n\t\t});\n\t\tthis.setContentDiv('');\n\t\ttextInputForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('textInputForm', textInputForm);\n\t},\n\n\tgetvalue: function() {\n\t\treturn this.getField('textInputForm', 'value');\n\t},\n\n\trefresh: function() {\n\t\tthis.setvalue(''+notesoup.rttstack);\n\t},\n\n\tsetvalue: function(newvalue) {\n\t\tthis.setField('textInputForm', 'value', newvalue);\n\t}\n});\nnote.show();\n</script>", 
          "width": 250, 
          "xPos": 274, 
          "yPos": 396, 
          "zIndex": 27
        }, 
        "9": {
          "bgcolor": "#ccffcc", 
          "from": "system in system/widgets", 
          "height": 188, 
          "id": "9", 
          "imports": "/js-src/js-widgets/chatty.js", 
          "mtime": 1324657141192, 
          "notename": "Send a Message", 
          "text": "<script type='text/javascript'>\n/**\n*\tchatty.js - Note Soup chat widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tsendit: function() {\n\t\tvar to = this.getField('chattyForm', 'to');\n\t\tvar msg = this.getField('chattyForm', 'msg');\n\t\tif (to && msg) notesoup.postEvent('/talk/' + to, 'say', msg);\n\t},\n\t\n\tping: function() {\n\t\tvar to = this.getField('chattyForm', 'to');\n\t\tif (to) notesoup.postEvent('/talk/' + to, 'say', 'Ping!');\n\t},\n\n\tresetForm: function() {\n\t\tthis.setField('chattyForm', 'msg', '');\n\t\tnotesoup.say('Message sent.');\n\t},\n\n\tonrender: function() {\n\n\t\tvar chattyForm = new Ext.FormPanel({\n\t\t\t//labelWidth: 75,\n\t\t\tlabelalign: 'top',\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\t\t\titems: [{\n\t\t\t\txtype: 'textfield',\n\t\t\t\tfieldLabel: 'To',\n\t\t\t\tname: 'to',\n\t\t\t\tid: this.getFieldID('to'),\n\t\t\t\twidth: this.width - 36 - 86\n\t\t\t},{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Say',\n\t\t\t\tname: 'msg',\n\t\t\t\tid: this.getFieldID('msg'),\n\t\t\t\twidth: this.width - 36 - 86\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Ping',\n\t\t\t\thandler: this.ping,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Send',\n\t\t\t\thandler: this.sendit,\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Done',\n\t\t\t\thandler: this.destroy,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.sendit,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\n\t\tthis.setContentDiv('<br/>');\n\t\tchattyForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('chattyForm', chattyForm);\n\t}\n});\nnote.show();\n</script>", 
          "width": 250, 
          "xPos": 274, 
          "yPos": 156, 
          "zIndex": 11
        }
      }
    ]
  ], 
  "error": null, 
  "result": ""
}
