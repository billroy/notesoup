{"xPos":300,"from":"system from system/widgets","bgcolor":"#ccffcc","imports":"http://chowder.notesoup.net/js-src/js-widgets/chat.js","mtime":1203791081.000000,"yPos":150,"height":55,"allowAnonymous":false,"width":250,"notename":"Chat","text":"<script type='text/javascript'>\n/**\n*\tchat.js - Note Soup chat widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tallowAnonymous: false,\n\n\tchatSay: function() {\n\t\tvar user = notesoup.username;\n\t\tif (!notesoup.loggedin) {\n\t\t\tif (!this.allowAnonymous) {\n\t\t\t\tnotesoup.say('You must be logged in to chat.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuser = 'Anonymous';\n\t\t}\n\n\t\tvar utterance = this.getField('chatForm', 'chattext');\n\t\tif (utterance) {\n\t\t\tnotesoup.folderSay(utterance);\n\t\t\tif ($n('chat log')) {\n\t\t\t\t$n('chat log').append(user + ': ' + utterance + '<br/>');\n\t\t\t}\n\t\t\tthis.setField('chatForm', 'chattext', '');\n\t\t\tExt.get(this.id + '_chattext').focus(true);\n\t\t}\n\t},\n\n\tonrender: function() {\n\n\t\tvar chatForm = new Ext.FormPanel({\n\t\t\tlabelWidth: 50, \n\t\t\tlabelalign: 'top',\n\t\t\twidth: this.width - 36,\n\t\t\tbodyStyle: 'background:' + (this.bgcolor || notesoup.ui.defaultNoteColor),\n\t\t\tborder: false,\n\t\t\tbodyBorder: false,\n\n\t\t\titems: [{\n\t\t\t\txtype: 'textarea',\n\t\t\t\tfieldLabel: 'Type here',\n\t\t\t\tid: this.getFieldID('chattext'),\n\t\t\t\tname: 'chattext',\n\t\t\t\tvalue: '',\n\t\t\t\twidth: 300\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'say it',\n\t\t\t\thandler: this.chatSay,\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tkeys: [{\n\t\t\t\tkey: 13,\n\t\t\t\tfn: this.chatSay,\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t});\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/>';\n\t\tchatForm.render(thediv);\n\t\tthis.setEphemeral('chatForm', chatForm);\n\t\tExt.get(thediv).addKeyListener(13, this.chatSay, this);\n\t}\n});\nnote.show();\n</script>\nloading...","syncme":true,"id":"note7ZvAHTOH"}