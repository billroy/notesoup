{"viewfolder":"widgets/portablehole","text":"<script type='text/javascript'>\n/**\n*\tporthole.js - Note Soup portable hole widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tuseFolderPicker: false,\n\n\n\thandleFolderPick: function(combo, record, index) {\n\t\tthis.viewfolder =  notesoup.folderlist[index];\n\t\tthis.refreshNoteList();\n\t},\n\t\n\thandleRefreshButton: function() {\n\t\t//this.viewfolder = this.getEphemeral('portholeForm').getValues()['foldername'];\n\t\tvar f = notesoup.prompt('Enter the folder to view:', this.viewfolder);\n\t\tif (!f) return;\n\t\tthis.viewfolder = f;\n\t\tthis.refreshNoteList();\n\t},\n\n\trefreshNoteList: function() {\n\t\tdelete this.notelist;\n\t\tdelete this.notedisplaylist;\n\t\tdelete this.targetnoteid;\n\t\tdelete this.targetnote;\n\t\tnotesoup.getNoteList(this.viewfolder, this.handleNoteListUpdate.createDelegate(this));\n\t\tthis.showLoading();\n\t},\n\n\n\t/**\n\t*\tnotelist:\n\t*\t[0]: foldername like charlie/inbox\n\t*\t[1]: noteid like noteN003kkrOI\n\t*\t[2]: notename like shopping list\n\t*/\n\thandleNoteListUpdate: function(notelist) {\n\t\t//Ext.get(this.id + '_ph_fp').selectByValue(this.viewfolder, true);\n\t\tthis.notelist = notelist;\n\t\tthis.notedisplaylist = [];\n\t\tthis.noteidlist = [];\n\t\tfor (var i=0; i < notelist.length; i++) {\n\t\t\tif (notelist[i][1].indexOf('.') < 0) {\n\t\t\t\tthis.notedisplaylist.push([notelist[i][2]]);\n\t\t\t\tthis.noteidlist.push(notelist[i][1]);\n\t\t\t}\n\t\t}\n\t\tnotesoup.say('Note id list: ' + notesoup.dump(this.noteidlist));\n\t\tthis.handleNotePick(null, null, 0);\n\t\tthis.running = true;\n\t},\n\n\n\thandleNotePick: function(combo, record, index) {\n\t\tif (index < 0) index = this.noteidlist.length - 1;\n\t\tif (index > this.noteidlist.length-1) index = 0;\n\t\tthis.targetnoteindex = index;\n\t\tthis.targetnoteid = this.noteidlist[this.targetnoteindex];\n\t\tnotesoup.postRequest({\n\t\t\tmethod:\"getnote\",\n\t\t\tparams:{\n\t\t\t\tfromfolder: this.viewfolder,\n\t\t\t\tnoteid: this.targetnoteid\n\t\t\t}\n\t\t},{\n\t\t\t//requestMessage: 'Fetching note...',\n\t\t\tsuccessProc: this.getNoteHandler,\n\t\t\tsuccessProcScope: this,\n\t\t\tfailureMessage: 'Could not fetch note: ' + this.targetnoteid\n\t\t});\n\t},\n\n\n\tgetNoteHandler: function(response, options) {\n\t\t//notesoup.say('Fetch complete.');\n\t\t//notesoup.say(response.responseText);\n\t\tvar response = Ext.util.JSON.decode(response.responseText);\n\t\tthis.targetnote = response.command[0][1];\n\t\t//notesoup.say('GETNOTEHANDLER: ' + notesoup.dump(this.targetnote));\n\t\tthis.show();\n\t},\n\n\n\tlistwrap: function(list) {\n\t\tvar o = [];\n\t\tif (list) for (var i=0; i < list.length; i++) {\n\t\t\to.push([list[i]]);\n\t\t}\n\t\treturn o;\n\t},\n\n\n\n\t// player control panel\n\timageroot: \t\t'http://notesoup.net/images/UII_Icons/32x32/',\n\tprevimage: \t\t'backward.png',\n\tstartimage: \t'play.png',\n\tpauseimage: \t'pause.png',\n\tnextimage:\t\t'forward.png',\n\trefreshimage: \t'open.png',\n\n\timagedisplaytime: 3,\n\timagecountdown: 3,\n\n\tontick: function() {\n\t\tif (!this.running) return;\n\t\t//notesoup.say('countdown: ' + this.imagecountdown + typeof(this.imagecountdown));\n\t\tif (--this.imagecountdown <= 0) {\n\t\t\tthis.imagecountdown = this.imagedisplaytime;\n\t\t\tthis.nextNote();\n\t\t}\n\t},\n\n\tprevNote: function() {\n\t\tthis.handleNotePick(null, null, this.targetnoteindex-1);\n\t},\n\n\tnextNote: function() {\n\t\tthis.handleNotePick(null, null, this.targetnoteindex+1);\n\t},\n\t\n\tpause: function() {\n\t\tnotesoup.say('Stopped.');\n\t\tdelete this.running;\n\t\tthis.show();\n\t},\n\n\tstart: function() {\n\t\tnotesoup.say('Starting...');\n\t\tthis.running = true;\n\t\tthis.show();\n\t},\n\n\tmakeButton: function(img, handler) {\n\t\treturn ['<img src=\"', this.imageroot, img, '\"',\n\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).', handler, '();\"/>'].join('');\n\t},\n\n\trenderControls: function() {\n\t\tvar o = [];\n\t\to.push('<center>');\n\t\tif (this.notelist) {\n\t\t\to.push(this.makeButton(this.previmage, 'prevNote'));\n\n\t\t\tif (this.running) o.push(this.makeButton(this.pauseimage, 'pause'));\n\t\t\telse o.push(this.makeButton(this.startimage, 'start'));\n\n\t\t\to.push(this.makeButton(this.nextimage, 'nextNote'));\n\t\t}\n\t\to.push(this.makeButton(this.refreshimage, 'handleRefreshButton'));\n\t\to.push('</center>');\n\t\treturn o.join('');\n\t},\n\n\tonrender: function() {\n\t\ttitle = Ext.get(this.id + '_title').update(this.renderControls());\n\t\tvar o = [];\n\t\tif (this.targetnote) {\n\t\t\tvar t = new soupnote(this.targetnote);\n\t\t\to.push(t.getMarkup());\n\t\t\tdelete t;\n\t\t}\n\t\tExt.get(this.getContentDiv()).update(o.join(''), true);\t// true to load scripts\n\t},\n\n\tonrender2: function() {\n\t\tvar o = [];\n\n\t\to.push(this.renderControls());\n\t\ttitle = Ext.get(this.id + '_title');\n\t\tif (title) title.update(this.notename);\n\n\t\tif (this.targetnote) {\n\t\t\tvar t = new soupnote(this.targetnote);\n\t\t\to.push('<hr/>');\n\t\t\to.push(t.getMarkup());\n\t\t\tdelete t;\n\t\t}\n\t\tExt.get(this.getContentDiv()).update(o.join(''), true);\t// true to load scripts\n\t}\n});\nnote.show();\n</script>","height":99,"useFolderPicker":false,"imageroot":"http://notesoup.net/images/UII_Icons/32x32/","mtime":1196514721.741259,"nextimage":"forward.png","id":"notejxWR77Le","previmage":"backward.png","from":"widgets from widgets/portablehole","pauseimage":"pause.png","bgcolor":"#99CCFF","targetnoteindex":0,"notelist":[["widgets/portablehole","noteECXHUBVi","Portable Hole"],["widgets/portablehole","noteLJCVNjF4","Here is the portable hole:"],["widgets/portablehole","noteU2xx3zAf","How to Use the Portable Hole"],["widgets/portablehole","noteY7rfKj5J","Portable Hole"],["widgets/portablehole","notebA8wY1eY","Welcome"],["widgets/portablehole","notej6hJqEat","What is the Portable Hole?"],["widgets/portablehole","notejxWR77Le","Portable Hole"],["widgets/portablehole","notelymYrmoX","What on Earth For?"],["widgets/portablehole","notevsWYaOk6","Caution"]],"imagecountdown":3,"refreshimage":"open.png","running":true,"notedisplaylist":[["Portable Hole"],["Here is the portable hole:"],["How to Use the Portable Hole"],["Portable Hole"],["Welcome"],["What is the Portable Hole?"],["Portable Hole"],["What on Earth For?"],["Caution"]],"targetnote":{"viewfolder":"widgets/public","text":"<script type='text/javascript'>\n/**\n*\tporthole.js - Note Soup portable hole widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tuseFolderPicker: false,\n\n\n\thandleFolderPick: function(combo, record, index) {\n\t\tthis.viewfolder =  notesoup.folderlist[index];\n\t\tthis.refreshNoteList();\n\t},\n\t\n\thandleRefreshButton: function() {\n\t\t//this.viewfolder = this.getEphemeral('portholeForm').getValues()['foldername'];\n\t\tvar f = notesoup.prompt('Enter the folder to view:', this.viewfolder);\n\t\tif (!f) return;\n\t\tthis.viewfolder = f;\n\t\tthis.refreshNoteList();\n\t},\n\n\trefreshNoteList: function() {\n\t\tdelete this.notelist;\n\t\tdelete this.notedisplaylist;\n\t\tdelete this.targetnoteid;\n\t\tdelete this.targetnote;\n\t\tnotesoup.getNoteList(this.viewfolder, this.handleNoteListUpdate.createDelegate(this));\n\t\tthis.showLoading();\n\t},\n\n\n\t/**\n\t*\tnotelist:\n\t*\t[0]: foldername like charlie/inbox\n\t*\t[1]: noteid like noteN003kkrOI\n\t*\t[2]: notename like shopping list\n\t*/\n\thandleNoteListUpdate: function(notelist) {\n\t\t//Ext.get(this.id + '_ph_fp').selectByValue(this.viewfolder, true);\n\t\tthis.notelist = notelist;\n\t\tthis.notedisplaylist = [];\n\t\tthis.noteidlist = [];\n\t\tfor (var i=0; i < notelist.length; i++) {\n\t\t\tif (notelist[i][1].indexOf('.') < 0) {\n\t\t\t\tthis.notedisplaylist.push([notelist[i][2]]);\n\t\t\t\tthis.noteidlist.push(notelist[i][1]);\n\t\t\t}\n\t\t}\n\t\tnotesoup.say('Note id list: ' + notesoup.dump(this.noteidlist));\n\t\tthis.handleNotePick(null, null, 0);\n\t\tthis.running = true;\n\t},\n\n\n\thandleNotePick: function(combo, record, index) {\n\t\tif (index < 0) index = this.noteidlist.length - 1;\n\t\tif (index > this.noteidlist.length-1) index = 0;\n\t\tthis.targetnoteindex = index;\n\t\tthis.targetnoteid = this.noteidlist[this.targetnoteindex];\n\t\tnotesoup.postRequest({\n\t\t\tmethod:\"getnote\",\n\t\t\tparams:{\n\t\t\t\tfromfolder: this.viewfolder,\n\t\t\t\tnoteid: this.targetnoteid\n\t\t\t}\n\t\t},{\n\t\t\t//requestMessage: 'Fetching note...',\n\t\t\tsuccessProc: this.getNoteHandler,\n\t\t\tsuccessProcScope: this,\n\t\t\tfailureMessage: 'Could not fetch note: ' + this.targetnoteid\n\t\t});\n\t},\n\n\n\tgetNoteHandler: function(response, options) {\n\t\t//notesoup.say('Fetch complete.');\n\t\t//notesoup.say(response.responseText);\n\t\tvar response = Ext.util.JSON.decode(response.responseText);\n\t\tthis.targetnote = response.command[0][1];\n\t\t//notesoup.say('GETNOTEHANDLER: ' + notesoup.dump(this.targetnote));\n\t\tthis.show();\n\t},\n\n\n\tlistwrap: function(list) {\n\t\tvar o = [];\n\t\tif (list) for (var i=0; i < list.length; i++) {\n\t\t\to.push([list[i]]);\n\t\t}\n\t\treturn o;\n\t},\n\n\n\n\t// player control panel\n\timageroot: \t\t'http://notesoup.net/images/UII_Icons/32x32/',\n\tprevimage: \t\t'backward.png',\n\tstartimage: \t'play.png',\n\tpauseimage: \t'pause.png',\n\tnextimage:\t\t'forward.png',\n\trefreshimage: \t'open.png',\n\n\timagedisplaytime: 3,\n\timagecountdown: 3,\n\n\tontick: function() {\n\t\tif (!this.running) return;\n\t\t//notesoup.say('countdown: ' + this.imagecountdown + typeof(this.imagecountdown));\n\t\tif (--this.imagecountdown <= 0) {\n\t\t\tthis.imagecountdown = this.imagedisplaytime;\n\t\t\tthis.nextNote();\n\t\t}\n\t},\n\n\tprevNote: function() {\n\t\tthis.handleNotePick(null, null, this.targetnoteindex-1);\n\t},\n\n\tnextNote: function() {\n\t\tthis.handleNotePick(null, null, this.targetnoteindex+1);\n\t},\n\t\n\tpause: function() {\n\t\tnotesoup.say('Stopped.');\n\t\tdelete this.running;\n\t\tthis.show();\n\t},\n\n\tstart: function() {\n\t\tnotesoup.say('Starting...');\n\t\tthis.running = true;\n\t\tthis.show();\n\t},\n\n\tmakeButton: function(img, handler) {\n\t\treturn ['<img src=\"', this.imageroot, img, '\"',\n\t\t\t' onclick=\"notesoup.ui.getEnclosingNote(this).', handler, '();\"/>'].join('');\n\t},\n\n\trenderControls: function() {\n\t\tvar o = [];\n\t\to.push('<center>');\n\t\tif (this.notelist) {\n\t\t\to.push(this.makeButton(this.previmage, 'prevNote'));\n\n\t\t\tif (this.running) o.push(this.makeButton(this.pauseimage, 'pause'));\n\t\t\telse o.push(this.makeButton(this.startimage, 'start'));\n\n\t\t\to.push(this.makeButton(this.nextimage, 'nextNote'));\n\t\t}\n\t\to.push(this.makeButton(this.refreshimage, 'handleRefreshButton'));\n\t\to.push('</center>');\n\t\treturn o.join('');\n\t},\n\n\tonrender: function() {\n\t\ttitle = Ext.get(this.id + '_title').update(this.renderControls());\n\t\tvar o = [];\n\t\tif (this.targetnote) {\n\t\t\tvar t = new soupnote(this.targetnote);\n\t\t\to.push(t.getMarkup());\n\t\t\tdelete t;\n\t\t}\n\t\tExt.get(this.getContentDiv()).update(o.join(''), true);\t// true to load scripts\n\t},\n\n\tonrender2: function() {\n\t\tvar o = [];\n\n\t\to.push(this.renderControls());\n\t\ttitle = Ext.get(this.id + '_title');\n\t\tif (title) title.update(this.notename);\n\n\t\tif (this.targetnote) {\n\t\t\tvar t = new soupnote(this.targetnote);\n\t\t\to.push('<hr/>');\n\t\t\to.push(t.getMarkup());\n\t\t\tdelete t;\n\t\t}\n\t\tExt.get(this.getContentDiv()).update(o.join(''), true);\t// true to load scripts\n\t}\n});\nnote.show();\n</script>","height":294,"useFolderPicker":false,"imageroot":"http://notesoup.net/images/UII_Icons/32x32/","mtime":1196514503.153258,"nextimage":"forward.png","id":"noteECXHUBVi","previmage":"backward.png","from":"widgets in widgets/portablehole","pauseimage":"pause.png","bgcolor":"#99CCFF","targetnoteindex":9,"notelist":[["widgets/public","note0JQp1NOA","link to widgets/forms"],["widgets/public","note2k50VehP","link to widgets/flickrlab"],["widgets/public","noteHSOKlMuS","link to widgets/controls"],["widgets/public","noteJI0iUHO3","link to widgets/auction"],["widgets/public","noteKmv9gVbn","link to widgets/access"],["widgets/public","noteSlxGJdO4","link to widgets/rsszoo"],["widgets/public","noteWHPo5qen","link to widgets/time"],["widgets/public","notec3zyq8PC","link to widgets/messaging"],["widgets/public","notexprf4wK0","link to widgets/poll"],["widgets/public","notexsbCtUWw","Welcome"]],"imagecountdown":3,"refreshimage":"open.png","zIndex":35,"running":true,"notedisplaylist":[["link to widgets/forms"],["link to widgets/flickrlab"],["link to widgets/controls"],["link to widgets/auction"],["link to widgets/access"],["link to widgets/rsszoo"],["link to widgets/time"],["link to widgets/messaging"],["link to widgets/poll"],["Welcome"]],"targetnote":{"syncme":true,"xPos":10,"from":"widgets in widgets/public","bgcolor":"#00ccff","text":"&nbsp;<p><a href=\"/folder/widgets/poll\"><center><img src=\"/images/souplink-large.png\"/></center></a><br/>The Polling Widget Factory","yPos":722,"height":235,"zIndex":33,"width":240,"notename":"link to widgets/poll","mtime":1196348570.345428,"id":"notexprf4wK0"},"xPos":25,"noteidlist":["note0JQp1NOA","note2k50VehP","noteHSOKlMuS","noteJI0iUHO3","noteKmv9gVbn","noteSlxGJdO4","noteWHPo5qen","notec3zyq8PC","notexprf4wK0","notexsbCtUWw"],"startimage":"play.png","yPos":160,"imagedisplaytime":3,"notename":"Portable Hole","targetnoteid":"notexsbCtUWw","width":"250"},"xPos":606,"noteidlist":["noteECXHUBVi","noteLJCVNjF4","noteU2xx3zAf","noteY7rfKj5J","notebA8wY1eY","notej6hJqEat","notejxWR77Le","notelymYrmoX","notevsWYaOk6"],"startimage":"play.png","yPos":429,"imagedisplaytime":3,"notename":"Portable Hole","targetnoteid":"noteECXHUBVi","width":"250"}