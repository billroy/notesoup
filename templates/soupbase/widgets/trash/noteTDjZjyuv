{"xPos":33,"from":"widgets from widgets/inbox","bgcolor":"#99ccff","text":"<script type='text/javascript'>\n/**\n*\tnotesoup-ui-folderacl.js - Note Soup folder permissions UI\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\tnotename: 'Folder Access Control',\n\tbgcolor: '#99ccff',\n\n\trenderform: function() {\n\t\tthis.setContentDiv('');\n\t\tthis.getform().render(this.getContentDiv());\n\t},\n\n\tgetdata: function(key) {\n\t\tif ('folderacl' in notesoup) return notesoup.folderacl[key];\n\t\treturn '';\n\t},\n\n\tgetform: function() {\n\t\tvar theForm = this.getEphemeral('folderACLForm');\n\t\tif (theForm) return theForm;\n\n\t\tvar folderACLForm = new Ext.form.Form({\n\t\t\tlabelWidth: 70,\n\t\t\tminButtonWidth: 50 \n\t\t});\n\t\tfolderACLForm.add(new Ext.form.TextField({\n\t\t\tfieldLabel: 'Folder',\n\t\t\tid: 'folder-' + this.id,\n\t\t\tname: 'folder',\n\t\t\tvalue: this.getdata('folder'),\n\t\t\twidth: this.width - 36 - 76\n\t\t}));\n\t\tfolderACLForm.add(new Ext.form.TextArea({\n\t\t\tfieldLabel: 'Read',\n\t\t\tid: 'readers-' + this.id,\n\t\t\tname: 'readers',\n\t\t\tvalue: this.getdata('readers'),\n\t\t\twidth: this.width - 36 - 76\n\t\t}));\n\t\tfolderACLForm.add(new Ext.form.TextArea({\n\t\t\tfieldLabel: 'Write',\n\t\t\tid: 'editors-' + this.id,\n\t\t\tname: 'editors',\n\t\t\tvalue: this.getdata('editors'),\n\t\t\twidth: this.width - 36 - 76\n\t\t}));\n\t\tfolderACLForm.add(new Ext.form.TextArea({\n\t\t\tfieldLabel: 'Append',\n\t\t\tid: 'senders-' + this.id,\n\t\t\tname: 'senders',\n\t\t\tvalue: this.getdata('senders'),\n\t\t\twidth: this.width - 36 - 76\n\t\t}));\n\n\t\tfolderACLForm.addButton({\n\t\t\ttext: 'save',\n\t\t\thandler: this.saveACL,\n\t\t\tscope: this\n\t\t});\n\t\tfolderACLForm.addButton({\n\t\t\ttext: 'refresh',\n\t\t\thandler: this.refresh,\n\t\t\tscope: this\n\t\t});\n\t\tfolderACLForm.addButton({\n\t\t\ttext: 'done',\n\t\t\thandler: this.destroy,\n\t\t\tscope: this\n\t\t});\n\n\t\tthis.setContentDiv('');\n\t\tfolderACLForm.render(this.getContentDiv());\n\t\tthis.setEphemeral('folderACLForm', folderACLForm);\n\t\tthis.onrender = this.renderform;\n\t\treturn folderACLForm;\n\t},\n\n\tsaveACL: function() {\n\t\tvar v = this.getform().getValues();\n\t\tnotesoup.setFolderACL(v['folder'], {\n\t\t\t'senders': v['senders'],\n\t\t\t'readers': v['readers'],\n\t\t\t'editors': v['editors']\n\t\t});\n\t},\n\n\tupdateValues: function() {\n\t\tthis.getform().setValues({\n\t\t\tfolder: notesoup.folderacl.folder,\n\t\t\tsenders: notesoup.folderacl.senders,\n\t\t\treaders: notesoup.folderacl.readers,\n\t\t\teditors: notesoup.folderacl.editors\n\t\t});\n\t},\n\t\n\trefresh: function() {\n\t\tvar folder = notesoup.foldername;\n\t\tvar theForm = this.getform();\n\t\tif (theForm) {\n\t\t\tvar f = theForm.getValues()['folder'];\n\t\t\tif (f) folder = f;\n\t\t}\n\t\tnotesoup.getFolderACL(folder, note.updateValues, notesoup.notes[note.id]);\n\t}\n});\nnote.refresh();\n</script>","yPos":330,"height":67,"width":"250","notename":"Folder Access Control","mtime":1197046377.339538,"sentby":"widgets from widgets/inbox","id":"noteTDjZjyuv"}