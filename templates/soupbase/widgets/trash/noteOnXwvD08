{"xPos":200,"width":"250","text":"<script type='text/javascript'>\n/**\n*\tchat.js - Note Soup chat widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\tallowAnonymous: false,\n\n\tchatSay: function() {\n\t\tvar user = notesoup.username;\n\t\tif (!notesoup.loggedin) {\n\t\t\tif (!this.allowAnonymous) {\n\t\t\t\tnotesoup.say('You must be logged in to chat.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuser = 'Anonymous';\n\t\t}\n\n\t\tvar theForm = this.getEphemeral('chatForm');\n\t\tvar v = theForm.getValues();\n\t\tvar utterance = v['chattext'];\n\t\tif (utterance) {\n\t\t\tnotesoup.folderSay(utterance);\n\t\t\tif ($n('chat log')) {\n\t\t\t\t$n('chat log').append(user + ': ' + utterance + '<br/>');\n\t\t\t}\n\t\t\ttheForm.setValues({'chattext':''});\n\t\t\tExt.get(this.id + '_chattext').focus(true);\n\t\t}\n\t},\n\n\tonrender: function() {\n\t\tvar chatForm = new Ext.form.Form({\n\t\t\tlabelWidth: 50, \n\t\t\tlabelalign: 'top'\n\t\t});\n\t\tchatForm.add(new Ext.form.TextArea({\n\t\t\tfieldLabel: 'Type here',\n\t\t\tid: this.id + '_chattext',\n\t\t\tname: 'chattext',\n\t\t\tvalue: '',\n\t\t\twidth: 300\n\t\t}));\n\t\tchatForm.addButton({\n\t\t\ttext: 'say it',\n\t\t\thandler: this.chatSay,\n\t\t\tscope: this\n\t\t});\n\t\tvar thediv = this.getContentDiv();\n\t\tthediv.innerHTML = '<br/>';\n\t\tchatForm.render(thediv);\n\t\tthis.setEphemeral('chatForm', chatForm);\n\t\tExt.get(thediv).addKeyListener(13, this.chatSay, this);\n\t}\n});\nnote.show();\n</script>\nloading...","yPos":50,"height":179,"bgcolor":"#FFFF99","notename":"Chat Widget","mtime":1196208704.596050,"sentby":"widgets from widgets/chat","id":"noteOnXwvD08"}