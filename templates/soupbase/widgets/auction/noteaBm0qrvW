{"xPos":16,"width":390,"text":"<script type='text/javascript'>\n/**\n*\tuploadForm.js - Note Soup file upload widget\n*\tCopyright 2007 by Bill Roy\n*\tAll rights reserved.\n*/\nvar note = notesoup.ui.getEnclosingNote(this);\nnote.set({\n\n\thandleResponse: function(elt, success, response) {\n\t\t//notesoup.say('Upload status: ' + elt.id + ' ' + success + ' ' + response.responseText);\n\t\tthis.setContentDiv(response.responseText);\n\t\tthis.show.createDelegate(this).defer(3000);\n\t\tnotesoup.sendSync();\n\t},\n\n\tsubmitForm: function() {\n\t\tvar form = this.getEphemeral('uploadForm');\n\t\tif (form) {\n\t\t\tvar el = form.el.dom;\n\t\t\tif (el) {\n\t\t\t\tel.setAttribute('enctype', 'multipart/form-data');\n\t\t\t\ttry {\n\t\t\t\t\tformManager = new Ext.UpdateManager(el);\n\t\t\t\t\tformManager.formUpdate(el, '/upload', true, this.handleResponse.createDelegate(this));\n\t\t\t\t\tthis.showLoading();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tnotesoup.say('form submission error: ' + notesoup.dump(e));\n\t\t\t\t}\n\t\t\t}\n\t\t}\t\t\t\t\n\t},\n\n\tonrender: function() {\n\n\t\tvar uploadForm = new Ext.form.Form({\n\t\t\t//url: '/upload',\n\t\t\tlabelAlign: 'right',\n\t\t\tfileUpload: true,\n\t\t\t//baseParams: {tofolder: notesoup.foldername}\n\t\t});\n\t\t\n\t\tuploadForm.add(new Ext.form.TextField({\n\t\t\tallowBlank: false,\n\t\t\tinputType: 'file',\n\t\t\tname: 'thefile',\n\t\t\tfieldLabel: 'File to upload',\n\t\t\twidth: 300\n\t\t}));\n\n\t\tuploadForm.addButton({\n\t\t\ttext: 'upload',\n\t\t\thandler: this.submitForm,\n\t\t\tscope: this\n\t\t});\n\t\t\n\t\tuploadForm.addButton({\n\t\t\ttext: 'done',\n\t\t\thandler: this.destroy,\n\t\t\tscope: this\n\t\t});\n\n\t\tthis.setEphemeral('uploadForm', uploadForm);\n\t\tthis.setContentDiv('');\n\t\tuploadForm.render(this.getContentDiv());\n\t}\n});\nnote.show();\n</script>\nLoading...","yPos":509,"height":89,"zIndex":17,"bgcolor":"#99CCFF","notename":"File Upload Widget","mtime":1196183155.089255,"sentby":"widgets from system/templates","id":"noteaBm0qrvW"}